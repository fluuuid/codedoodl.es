!function(t){function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=17)}([function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e.d(n,"ARRAY_TYPE",function(){return a}),n.setMatrixArrayType=function(t){a=t},n.toRadian=function(t){return t*i},n.equals=function(t,n){return Math.abs(t-n)<=r*Math.max(1,Math.abs(t),Math.abs(n))};const r=1e-6;n.EPSILON=r;let a="undefined"!=typeof Float32Array?Float32Array:Array;const o=Math.random;n.RANDOM=o;const i=Math.PI/180},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n,e){"use strict";function r(t,n,e){let r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],h=e[0],d=e[1],v=e[2],M=e[3],b=e[4],m=e[5],p=e[6],g=e[7],y=e[8];return t[0]=h*r+d*i+v*s,t[1]=h*a+d*u+v*f,t[2]=h*o+d*c+v*l,t[3]=M*r+b*i+m*s,t[4]=M*a+b*u+m*f,t[5]=M*o+b*c+m*l,t[6]=p*r+g*i+y*s,t[7]=p*a+g*u+y*f,t[8]=p*o+g*c+y*l,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){let t=new o.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat4=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},n.clone=function(t){let n=new o.ARRAY_TYPE(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},n.fromValues=function(t,n,e,r,a,i,u,c,s){let f=new o.ARRAY_TYPE(9);return f[0]=t,f[1]=n,f[2]=e,f[3]=r,f[4]=a,f[5]=i,f[6]=u,f[7]=c,f[8]=s,f},n.set=function(t,n,e,r,a,o,i,u,c,s){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=c,t[8]=s,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.transpose=function(t,n){if(t===n){let e=n[1],r=n[2],a=n[5];t[1]=n[3],t[2]=n[6],t[3]=e,t[5]=n[7],t[6]=r,t[7]=a}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},n.invert=function(t,n){let e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=f*i-u*s,h=-f*o+u*c,d=s*o-i*c,v=e*l+r*h+a*d;return v?(v=1/v,t[0]=l*v,t[1]=(-f*r+a*s)*v,t[2]=(u*r-a*i)*v,t[3]=h*v,t[4]=(f*e-a*c)*v,t[5]=(-u*e+a*o)*v,t[6]=d*v,t[7]=(-s*e+r*c)*v,t[8]=(i*e-r*o)*v,t):null},n.adjoint=function(t,n){let e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8];return t[0]=i*f-u*s,t[1]=a*s-r*f,t[2]=r*u-a*i,t[3]=u*c-o*f,t[4]=e*f-a*c,t[5]=a*o-e*u,t[6]=o*s-i*c,t[7]=r*c-e*s,t[8]=e*i-r*o,t},n.determinant=function(t){let n=t[0],e=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],c=t[7],s=t[8];return n*(s*o-i*c)+e*(-s*a+i*u)+r*(c*a-o*u)},n.multiply=r,n.translate=function(t,n,e){let r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],h=e[0],d=e[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=c,t[6]=h*r+d*i+s,t[7]=h*a+d*u+f,t[8]=h*o+d*c+l,t},n.rotate=function(t,n,e){let r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],h=Math.sin(e),d=Math.cos(e);return t[0]=d*r+h*i,t[1]=d*a+h*u,t[2]=d*o+h*c,t[3]=d*i-h*r,t[4]=d*u-h*a,t[5]=d*c-h*o,t[6]=s,t[7]=f,t[8]=l,t},n.scale=function(t,n,e){let r=e[0],a=e[1];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=a*n[3],t[4]=a*n[4],t[5]=a*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t},n.fromRotation=function(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat2d=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},n.fromQuat=function(t,n){let e=n[0],r=n[1],a=n[2],o=n[3],i=e+e,u=r+r,c=a+a,s=e*i,f=r*i,l=r*u,h=a*i,d=a*u,v=a*c,M=o*i,b=o*u,m=o*c;return t[0]=1-l-v,t[3]=f-m,t[6]=h+b,t[1]=f+m,t[4]=1-s-v,t[7]=d-M,t[2]=h-b,t[5]=d+M,t[8]=1-s-l,t},n.normalFromMat4=function(t,n){let e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=n[9],h=n[10],d=n[11],v=n[12],M=n[13],b=n[14],m=n[15],p=e*u-r*i,g=e*c-a*i,y=e*s-o*i,_=r*c-a*u,P=r*s-o*u,x=a*s-o*c,E=f*M-l*v,O=f*b-h*v,w=f*m-d*v,A=l*b-h*M,R=l*m-d*M,S=h*m-d*b,T=p*S-g*R+y*A+_*w-P*O+x*E;return T?(T=1/T,t[0]=(u*S-c*R+s*A)*T,t[1]=(c*w-i*S-s*O)*T,t[2]=(i*R-u*w+s*E)*T,t[3]=(a*R-r*S-o*A)*T,t[4]=(e*S-a*w+o*O)*T,t[5]=(r*w-e*R-o*E)*T,t[6]=(M*x-b*P+m*_)*T,t[7]=(b*y-v*x-m*g)*T,t[8]=(v*P-M*y+m*p)*T,t):null},n.projection=function(t,n,e){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},n.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t},n.subtract=a,n.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t},n.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]},n.equals=function(t,n){let e=t[0],r=t[1],a=t[2],i=t[3],u=t[4],c=t[5],s=t[6],f=t[7],l=t[8],h=n[0],d=n[1],v=n[2],M=n[3],b=n[4],m=n[5],p=n[6],g=n[7],y=n[8];return Math.abs(e-h)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(r-d)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-v)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-M)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(u-b)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-m)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(s-p)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(f-g)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(l-y)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))};var o=e(0);const i=r;n.mul=i;const u=a;n.sub=u},function(t,n,e){"use strict";function r(){let t=new v.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){let n=t[0],e=t[1],r=t[2];return Math.sqrt(n*n+e*e+r*r)}function o(t,n,e){let r=new v.ARRAY_TYPE(3);return r[0]=t,r[1]=n,r[2]=e,r}function i(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function u(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t}function c(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t}function s(t,n){let e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2];return Math.sqrt(e*e+r*r+a*a)}function f(t,n){let e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2];return e*e+r*r+a*a}function l(t){let n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r}function h(t,n){let e=n[0],r=n[1],a=n[2],o=e*e+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o),t}function d(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(t){var n=new v.ARRAY_TYPE(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},n.length=a,n.fromValues=o,n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},n.set=function(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t},n.subtract=i,n.multiply=u,n.divide=c,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t},n.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t},n.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t},n.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t},n.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t},n.distance=s,n.squaredDistance=f,n.squaredLength=l,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t},n.normalize=h,n.dot=d,n.cross=function(t,n,e){let r=n[0],a=n[1],o=n[2],i=e[0],u=e[1],c=e[2];return t[0]=a*c-o*u,t[1]=o*i-r*c,t[2]=r*u-a*i,t},n.lerp=function(t,n,e,r){let a=n[0],o=n[1],i=n[2];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t[2]=i+r*(e[2]-i),t},n.hermite=function(t,n,e,r,a,o){let i=o*o,u=i*(2*o-3)+1,c=i*(o-2)+o,s=i*(o-1),f=i*(3-2*o);return t[0]=n[0]*u+e[0]*c+r[0]*s+a[0]*f,t[1]=n[1]*u+e[1]*c+r[1]*s+a[1]*f,t[2]=n[2]*u+e[2]*c+r[2]*s+a[2]*f,t},n.bezier=function(t,n,e,r,a,o){let i=1-o,u=i*i,c=o*o,s=u*i,f=3*o*u,l=3*c*i,h=c*o;return t[0]=n[0]*s+e[0]*f+r[0]*l+a[0]*h,t[1]=n[1]*s+e[1]*f+r[1]*l+a[1]*h,t[2]=n[2]*s+e[2]*f+r[2]*l+a[2]*h,t},n.random=function(t,n){n=n||1;let e=2*v.RANDOM()*Math.PI,r=2*v.RANDOM()-1,a=Math.sqrt(1-r*r)*n;return t[0]=Math.cos(e)*a,t[1]=Math.sin(e)*a,t[2]=r*n,t},n.transformMat4=function(t,n,e){let r=n[0],a=n[1],o=n[2],i=e[3]*r+e[7]*a+e[11]*o+e[15];return i=i||1,t[0]=(e[0]*r+e[4]*a+e[8]*o+e[12])/i,t[1]=(e[1]*r+e[5]*a+e[9]*o+e[13])/i,t[2]=(e[2]*r+e[6]*a+e[10]*o+e[14])/i,t},n.transformMat3=function(t,n,e){let r=n[0],a=n[1],o=n[2];return t[0]=r*e[0]+a*e[3]+o*e[6],t[1]=r*e[1]+a*e[4]+o*e[7],t[2]=r*e[2]+a*e[5]+o*e[8],t},n.transformQuat=function(t,n,e){let r=n[0],a=n[1],o=n[2],i=e[0],u=e[1],c=e[2],s=e[3],f=s*r+u*o-c*a,l=s*a+c*r-i*o,h=s*o+i*a-u*r,d=-i*r-u*a-c*o;return t[0]=f*s+d*-i+l*-c-h*-u,t[1]=l*s+d*-u+h*-i-f*-c,t[2]=h*s+d*-c+f*-u-l*-i,t},n.rotateX=function(t,n,e,r){let a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},n.rotateY=function(t,n,e,r){let a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},n.rotateZ=function(t,n,e,r){let a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},n.angle=function(t,n){let e=o(t[0],t[1],t[2]),r=o(n[0],n[1],n[2]);h(e,e),h(r,r);let a=d(e,r);return a>1?0:a<-1?Math.PI:Math.acos(a)},n.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]},n.equals=function(t,n){let e=t[0],r=t[1],a=t[2],o=n[0],i=n[1],u=n[2];return Math.abs(e-o)<=v.EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(r-i)<=v.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=v.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var v=e(0);const M=i;n.sub=M;const b=u;n.mul=b;const m=c;n.div=m;const p=s;n.dist=p;const g=f;n.sqrDist=g;const y=a;n.len=y;const _=l;n.sqrLen=_;const P=function(){let t=r();return function(n,e,r,a,o,i){let u,c;for(e||(e=3),r||(r=0),c=a?Math.min(a*e+r,n.length):n.length,u=r;u<c;u+=e)t[0]=n[u],t[1]=n[u+1],t[2]=n[u+2],o(t,t,i),n[u]=t[0],n[u+1]=t[1],n[u+2]=t[2];return n}}();n.forEach=P},function(t,n,e){"use strict";function r(){let t=new d.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}function o(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t[3]=n[3]*e[3],t}function i(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t[3]=n[3]/e[3],t}function u(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t}function c(t,n){let e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2],o=n[3]-t[3];return Math.sqrt(e*e+r*r+a*a+o*o)}function s(t,n){let e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2],o=n[3]-t[3];return e*e+r*r+a*a+o*o}function f(t){let n=t[0],e=t[1],r=t[2],a=t[3];return Math.sqrt(n*n+e*e+r*r+a*a)}function l(t){let n=t[0],e=t[1],r=t[2],a=t[3];return n*n+e*e+r*r+a*a}function h(t,n){let e=n[0],r=n[1],a=n[2],o=n[3],i=e*e+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=e*i,t[1]=r*i,t[2]=a*i,t[3]=o*i),t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(t){let n=new d.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},n.fromValues=function(t,n,e,r){let a=new d.ARRAY_TYPE(4);return a[0]=t,a[1]=n,a[2]=e,a[3]=r,a},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},n.set=function(t,n,e,r,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},n.subtract=a,n.multiply=o,n.divide=i,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},n.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t[3]=Math.min(n[3],e[3]),t},n.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t[3]=Math.max(n[3],e[3]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},n.scale=u,n.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t},n.distance=c,n.squaredDistance=s,n.length=f,n.squaredLength=l,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},n.normalize=h,n.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},n.lerp=function(t,n,e,r){let a=n[0],o=n[1],i=n[2],u=n[3];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t[2]=i+r*(e[2]-i),t[3]=u+r*(e[3]-u),t},n.random=function(t,n){return n=n||1,t[0]=d.RANDOM(),t[1]=d.RANDOM(),t[2]=d.RANDOM(),t[3]=d.RANDOM(),h(t,t),u(t,t,n),t},n.transformMat4=function(t,n,e){let r=n[0],a=n[1],o=n[2],i=n[3];return t[0]=e[0]*r+e[4]*a+e[8]*o+e[12]*i,t[1]=e[1]*r+e[5]*a+e[9]*o+e[13]*i,t[2]=e[2]*r+e[6]*a+e[10]*o+e[14]*i,t[3]=e[3]*r+e[7]*a+e[11]*o+e[15]*i,t},n.transformQuat=function(t,n,e){let r=n[0],a=n[1],o=n[2],i=e[0],u=e[1],c=e[2],s=e[3],f=s*r+u*o-c*a,l=s*a+c*r-i*o,h=s*o+i*a-u*r,d=-i*r-u*a-c*o;return t[0]=f*s+d*-i+l*-c-h*-u,t[1]=l*s+d*-u+h*-i-f*-c,t[2]=h*s+d*-c+f*-u-l*-i,t[3]=n[3],t},n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},n.equals=function(t,n){let e=t[0],r=t[1],a=t[2],o=t[3],i=n[0],u=n[1],c=n[2],s=n[3];return Math.abs(e-i)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(r-u)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-c)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-s)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))};var d=e(0);const v=a;n.sub=v;const M=o;n.mul=M;const b=i;n.div=b;const m=c;n.dist=m;const p=s;n.sqrDist=p;const g=f;n.len=g;const y=l;n.sqrLen=y;const _=function(){let t=r();return function(n,e,r,a,o,i){let u,c;for(e||(e=4),r||(r=0),c=a?Math.min(a*e+r,n.length):n.length,u=r;u<c;u+=e)t[0]=n[u],t[1]=n[u+1],t[2]=n[u+2],t[3]=n[u+3],o(t,t,i),n[u]=t[0],n[u+1]=t[1],n[u+2]=t[2],n[u+3]=t[3];return n}}();n.forEach=_},function(t,n,e){"use strict";(function(t){var e,r,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(i,u){"object"===o(n)&&"object"===o(t)?t.exports=u():(r=[],void 0!==(a="function"==typeof(e=u)?e.apply(n,r):e)&&(t.exports=a))}(0,function(){return function(t){function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var e={};return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=15)}([function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r=null;n.library="lowww-core",n.version="1.0.9",n.setContext=function(t){r=t},n.getContext=function(){return r}},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r=e(2),a=e(22),o=e(23),i=e(7),u=e(24),c=e(25),s=e(26),f=e(8),l=e(9);e.d(n,"glMatrix",function(){return r}),e.d(n,"mat2",function(){return a}),e.d(n,"mat2d",function(){return o}),e.d(n,"mat3",function(){return i}),e.d(n,"mat4",function(){return u}),e.d(n,"quat",function(){return c}),e.d(n,"vec2",function(){return s}),e.d(n,"vec3",function(){return f}),e.d(n,"vec4",function(){return l})},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0}),e.d(n,"ARRAY_TYPE",function(){return a}),n.setMatrixArrayType=function(t){a=t},n.toRadian=function(t){return t*i},n.equals=function(t,n){return Math.abs(t-n)<=r*Math.max(1,Math.abs(t),Math.abs(n))};var r=1e-6;n.EPSILON=r;var a="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;n.RANDOM=o;var i=Math.PI/180},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=e(1),o=function(t){return t&&t.__esModule?t:{default:t}}(e(29)),i=0,u=0,c=a.vec3.create(),s=!1,f=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.uid=i++,this.parent=null,this.children=[],this.position=new o.default,this.rotation=new o.default,this.scale=new o.default(1,1,1),this._transparent=!1,this._visible=!0,this.quaternion=a.quat.create(),this.target=a.vec3.create(),this.up=a.vec3.fromValues(0,1,0),this.lookToTarget=!1,this.matrices={parent:a.mat4.create(),model:a.mat4.create(),lookAt:a.mat4.create()},this.dirty={sorting:!1,transparent:!1,attributes:!1}}return r(t,[{key:"updateMatrices",value:function(){a.mat4.identity(this.matrices.parent),a.mat4.identity(this.matrices.model),a.mat4.identity(this.matrices.lookAt),a.quat.identity(this.quaternion),this.parent&&(a.mat4.copy(this.matrices.parent,this.parent.matrices.model),a.mat4.multiply(this.matrices.model,this.matrices.model,this.matrices.parent)),this.lookToTarget?(a.mat4.targetTo(this.matrices.lookAt,this.position.data,this.target,this.up),a.mat4.multiply(this.matrices.model,this.matrices.model,this.matrices.lookAt)):(a.mat4.translate(this.matrices.model,this.matrices.model,this.position.data),a.quat.rotateX(this.quaternion,this.quaternion,this.rotation.x),a.quat.rotateY(this.quaternion,this.quaternion,this.rotation.y),a.quat.rotateZ(this.quaternion,this.quaternion,this.rotation.z),u=a.quat.getAxisAngle(c,this.quaternion),a.mat4.rotate(this.matrices.model,this.matrices.model,u,c)),a.mat4.scale(this.matrices.model,this.matrices.model,this.scale.data)}},{key:"add",value:function(t){t.parent=this,this.children.push(t),this.dirty.sorting=!0}},{key:"remove",value:function(t){var n=this.children.indexOf(t);-1!==n&&(t.destroy(),this.children.splice(n,1),this.dirty.sorting=!0)}},{key:"traverse",value:function(t){void 0===t&&(t=this,s=!1);for(var n=0;n<t.children.length;n++)this.traverse(t.children[n]);return null!==t.parent&&t.updateMatrices(),(t.dirty.sorting||t.dirty.transparent)&&(t.dirty.transparent=!1,s=!0),s}},{key:"transparent",set:function(t){this.dirty.transparent=this.transparent!==t,this._transparent=t},get:function(){return this._transparent}},{key:"visible",set:function(t){this.dirty.sorting=this.visible!==t,this._visible=t},get:function(){return this._visible}}]),t}();n.default=f},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(e(3)),i=e(12),u=e(0),c=e(11),s=function(t){function n(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":o(n))&&"function"!=typeof n?t:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.attributes={},t.uniforms={},t.polygonOffset=!1,t.polygonOffsetFactor=0,t.polygonOffsetUnits=1,t.instanceCount=0,t.isInstance=!1,t}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":o(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,a.default),r(n,[{key:"setAttribute",value:function(t,n,e){var r=(0,c.getTypeSize)(n);this.attributes[t]={value:e,size:r}}},{key:"setIndex",value:function(t){this.indices={value:t}}},{key:"setUniform",value:function(t,n,e){this.uniforms[t]={value:e,type:n}}},{key:"setShader",value:function(t,n){this.vertex=t,this.fragment=n}},{key:"setInstanceAttribute",value:function(t,n,e){var r=(0,c.getTypeSize)(n);this.attributes[t]={value:e,size:r,instanced:!0}}},{key:"setInstanceCount",value:function(t){this.instanceCount=t,this.instanceCount>0?this.isInstance=!0:this.isInstance=!1}},{key:"init",value:function(){var t=(0,u.getContext)();this.program=(0,i.createProgram)(t,this.vertex,this.fragment),this.vao=new c.Vao,(0,c.initAttributes)(this.attributes,this.program),(0,c.initUniforms)(this.uniforms,this.program),this.indices&&(this.indices.buffer=t.createBuffer()),this.vao.bind(),this.bind(),this.vao.unbind(),this.unbind()}},{key:"destroy",value:function(){}},{key:"bind",value:function(){var t=(0,u.getContext)();this.indices&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indices.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.value,t.STATIC_DRAW)),(0,c.bindAttributes)(this.attributes)}},{key:"unbind",value:function(){var t=(0,u.getContext)();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}},{key:"update",value:function(){var t=(0,u.getContext)();this.dirty.attributes&&((0,c.updateAttributes)(this.attributes),this.dirty.attributes=!0),(0,c.updateUniforms)(this.uniforms),this.polygonOffset?(t.enable(t.POLYGON_OFFSET_FILL),t.polygonOffset(this.polygonOffsetFactor,this.polygonOffsetUnits)):t.disable(t.POLYGON_OFFSET_FILL),this.transparent&&(t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA))}},{key:"draw",value:function(){var t=(0,u.getContext)();this.isInstance?t.drawElementsInstanced(t.TRIANGLES,this.indices.value.length,t.UNSIGNED_SHORT,0,this.instanceCount):this.indices?t.drawElements(t.TRIANGLES,this.indices.value.length,t.UNSIGNED_SHORT,0):t.drawArrays(t.TRIANGLES,0,this.attributes.a_position.value.length/3)}}]),n}();n.default=s},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0}),n.NOISE=n.FOG=n.LIGHT=n.UBO=void 0;var r=e(16),a=e(17),o=e(18),i=e(19);n.UBO=o.UBO,n.LIGHT=r.LIGHT,n.FOG=a.FOG,n.NOISE=i.NOISE},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});n.MAX_DIRECTIONAL=2,n.DIRECTIONAL_LIGHT=1e3},function(t,n,e){function r(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],h=e[0],d=e[1],v=e[2],M=e[3],b=e[4],m=e[5],p=e[6],g=e[7],y=e[8];return t[0]=h*r+d*i+v*s,t[1]=h*a+d*u+v*f,t[2]=h*o+d*c+v*l,t[3]=M*r+b*i+m*s,t[4]=M*a+b*u+m*f,t[5]=M*o+b*c+m*l,t[6]=p*r+g*i+y*s,t[7]=p*a+g*u+y*f,t[8]=p*o+g*c+y*l,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new o.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat4=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},n.clone=function(t){var n=new o.ARRAY_TYPE(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},n.fromValues=function(t,n,e,r,a,i,u,c,s){var f=new o.ARRAY_TYPE(9);return f[0]=t,f[1]=n,f[2]=e,f[3]=r,f[4]=a,f[5]=i,f[6]=u,f[7]=c,f[8]=s,f},n.set=function(t,n,e,r,a,o,i,u,c,s){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=c,t[8]=s,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],a=n[5];t[1]=n[3],t[2]=n[6],t[3]=e,t[5]=n[7],t[6]=r,t[7]=a}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},n.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=f*i-u*s,h=-f*o+u*c,d=s*o-i*c,v=e*l+r*h+a*d;return v?(v=1/v,t[0]=l*v,t[1]=(-f*r+a*s)*v,t[2]=(u*r-a*i)*v,t[3]=h*v,t[4]=(f*e-a*c)*v,t[5]=(-u*e+a*o)*v,t[6]=d*v,t[7]=(-s*e+r*c)*v,t[8]=(i*e-r*o)*v,t):null},n.adjoint=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8];return t[0]=i*f-u*s,t[1]=a*s-r*f,t[2]=r*u-a*i,t[3]=u*c-o*f,t[4]=e*f-a*c,t[5]=a*o-e*u,t[6]=o*s-i*c,t[7]=r*c-e*s,t[8]=e*i-r*o,t},n.determinant=function(t){var n=t[0],e=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],c=t[7],s=t[8];return n*(s*o-i*c)+e*(-s*a+i*u)+r*(c*a-o*u)},n.multiply=r,n.translate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],h=e[0],d=e[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=c,t[6]=h*r+d*i+s,t[7]=h*a+d*u+f,t[8]=h*o+d*c+l,t},n.rotate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],h=Math.sin(e),d=Math.cos(e);return t[0]=d*r+h*i,t[1]=d*a+h*u,t[2]=d*o+h*c,t[3]=d*i-h*r,t[4]=d*u-h*a,t[5]=d*c-h*o,t[6]=s,t[7]=f,t[8]=l,t},n.scale=function(t,n,e){var r=e[0],a=e[1];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=a*n[3],t[4]=a*n[4],t[5]=a*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t},n.fromRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat2d=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},n.fromQuat=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e+e,u=r+r,c=a+a,s=e*i,f=r*i,l=r*u,h=a*i,d=a*u,v=a*c,M=o*i,b=o*u,m=o*c;return t[0]=1-l-v,t[3]=f-m,t[6]=h+b,t[1]=f+m,t[4]=1-s-v,t[7]=d-M,t[2]=h-b,t[5]=d+M,t[8]=1-s-l,t},n.normalFromMat4=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=n[9],h=n[10],d=n[11],v=n[12],M=n[13],b=n[14],m=n[15],p=e*u-r*i,g=e*c-a*i,y=e*s-o*i,_=r*c-a*u,P=r*s-o*u,x=a*s-o*c,E=f*M-l*v,O=f*b-h*v,w=f*m-d*v,A=l*b-h*M,R=l*m-d*M,S=h*m-d*b,T=p*S-g*R+y*A+_*w-P*O+x*E;return T?(T=1/T,t[0]=(u*S-c*R+s*A)*T,t[1]=(c*w-i*S-s*O)*T,t[2]=(i*R-u*w+s*E)*T,t[3]=(a*R-r*S-o*A)*T,t[4]=(e*S-a*w+o*O)*T,t[5]=(r*w-e*R-o*E)*T,t[6]=(M*x-b*P+m*_)*T,t[7]=(b*y-v*x-m*g)*T,t[8]=(v*P-M*y+m*p)*T,t):null},n.projection=function(t,n,e){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},n.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t},n.subtract=a,n.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t},n.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],i=t[3],u=t[4],c=t[5],s=t[6],f=t[7],l=t[8],h=n[0],d=n[1],v=n[2],M=n[3],b=n[4],m=n[5],p=n[6],g=n[7],y=n[8];return Math.abs(e-h)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(r-d)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-v)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-M)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(u-b)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-m)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(s-p)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(f-g)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(l-y)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))};var o=e(2),i=r;n.mul=i;var u=a;n.sub=u},function(t,n,e){function r(){var t=new v.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){var n=t[0],e=t[1],r=t[2];return Math.sqrt(n*n+e*e+r*r)}function o(t,n,e){var r=new v.ARRAY_TYPE(3);return r[0]=t,r[1]=n,r[2]=e,r}function i(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function u(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t}function c(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t}function s(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2];return Math.sqrt(e*e+r*r+a*a)}function f(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2];return e*e+r*r+a*a}function l(t){var n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r}function h(t,n){var e=n[0],r=n[1],a=n[2],o=e*e+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o),t}function d(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(t){var n=new v.ARRAY_TYPE(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},n.length=a,n.fromValues=o,n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},n.set=function(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t},n.subtract=i,n.multiply=u,n.divide=c,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t},n.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t},n.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t},n.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t},n.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t},n.distance=s,n.squaredDistance=f,n.squaredLength=l,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t},n.normalize=h,n.dot=d,n.cross=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[0],u=e[1],c=e[2];return t[0]=a*c-o*u,t[1]=o*i-r*c,t[2]=r*u-a*i,t},n.lerp=function(t,n,e,r){var a=n[0],o=n[1],i=n[2];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t[2]=i+r*(e[2]-i),t},n.hermite=function(t,n,e,r,a,o){var i=o*o,u=i*(2*o-3)+1,c=i*(o-2)+o,s=i*(o-1),f=i*(3-2*o);return t[0]=n[0]*u+e[0]*c+r[0]*s+a[0]*f,t[1]=n[1]*u+e[1]*c+r[1]*s+a[1]*f,t[2]=n[2]*u+e[2]*c+r[2]*s+a[2]*f,t},n.bezier=function(t,n,e,r,a,o){var i=1-o,u=i*i,c=o*o,s=u*i,f=3*o*u,l=3*c*i,h=c*o;return t[0]=n[0]*s+e[0]*f+r[0]*l+a[0]*h,t[1]=n[1]*s+e[1]*f+r[1]*l+a[1]*h,t[2]=n[2]*s+e[2]*f+r[2]*l+a[2]*h,t},n.random=function(t,n){n=n||1;var e=2*v.RANDOM()*Math.PI,r=2*v.RANDOM()-1,a=Math.sqrt(1-r*r)*n;return t[0]=Math.cos(e)*a,t[1]=Math.sin(e)*a,t[2]=r*n,t},n.transformMat4=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[3]*r+e[7]*a+e[11]*o+e[15];return i=i||1,t[0]=(e[0]*r+e[4]*a+e[8]*o+e[12])/i,t[1]=(e[1]*r+e[5]*a+e[9]*o+e[13])/i,t[2]=(e[2]*r+e[6]*a+e[10]*o+e[14])/i,t},n.transformMat3=function(t,n,e){var r=n[0],a=n[1],o=n[2];return t[0]=r*e[0]+a*e[3]+o*e[6],t[1]=r*e[1]+a*e[4]+o*e[7],t[2]=r*e[2]+a*e[5]+o*e[8],t},n.transformQuat=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[0],u=e[1],c=e[2],s=e[3],f=s*r+u*o-c*a,l=s*a+c*r-i*o,h=s*o+i*a-u*r,d=-i*r-u*a-c*o;return t[0]=f*s+d*-i+l*-c-h*-u,t[1]=l*s+d*-u+h*-i-f*-c,t[2]=h*s+d*-c+f*-u-l*-i,t},n.rotateX=function(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},n.rotateY=function(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},n.rotateZ=function(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},n.angle=function(t,n){var e=o(t[0],t[1],t[2]),r=o(n[0],n[1],n[2]);h(e,e),h(r,r);var a=d(e,r);return a>1?0:a<-1?Math.PI:Math.acos(a)},n.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],o=n[0],i=n[1],u=n[2];return Math.abs(e-o)<=v.EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(r-i)<=v.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=v.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var v=e(2),M=i;n.sub=M;var b=u;n.mul=b;var m=c;n.div=m;var p=s;n.dist=p;var g=f;n.sqrDist=g;var y=a;n.len=y;var _=l;n.sqrLen=_;var P=function(){var t=r();return function(n,e,r,a,o,i){var u=void 0,c=void 0;for(e||(e=3),r||(r=0),c=a?Math.min(a*e+r,n.length):n.length,u=r;u<c;u+=e)t[0]=n[u],t[1]=n[u+1],t[2]=n[u+2],o(t,t,i),n[u]=t[0],n[u+1]=t[1],n[u+2]=t[2];return n}}();n.forEach=P},function(t,n,e){function r(){var t=new d.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}function o(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t[3]=n[3]*e[3],t}function i(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t[3]=n[3]/e[3],t}function u(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t}function c(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2],o=n[3]-t[3];return Math.sqrt(e*e+r*r+a*a+o*o)}function s(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2],o=n[3]-t[3];return e*e+r*r+a*a+o*o}function f(t){var n=t[0],e=t[1],r=t[2],a=t[3];return Math.sqrt(n*n+e*e+r*r+a*a)}function l(t){var n=t[0],e=t[1],r=t[2],a=t[3];return n*n+e*e+r*r+a*a}function h(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e*e+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=e*i,t[1]=r*i,t[2]=a*i,t[3]=o*i),t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(t){var n=new d.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},n.fromValues=function(t,n,e,r){var a=new d.ARRAY_TYPE(4);return a[0]=t,a[1]=n,a[2]=e,a[3]=r,a},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},n.set=function(t,n,e,r,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},n.subtract=a,n.multiply=o,n.divide=i,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},n.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t[3]=Math.min(n[3],e[3]),t},n.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t[3]=Math.max(n[3],e[3]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},n.scale=u,n.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t},n.distance=c,n.squaredDistance=s,n.length=f,n.squaredLength=l,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},n.normalize=h,n.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},n.lerp=function(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=n[3];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t[2]=i+r*(e[2]-i),t[3]=u+r*(e[3]-u),t},n.random=function(t,n){return n=n||1,t[0]=d.RANDOM(),t[1]=d.RANDOM(),t[2]=d.RANDOM(),t[3]=d.RANDOM(),h(t,t),u(t,t,n),t},n.transformMat4=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3];return t[0]=e[0]*r+e[4]*a+e[8]*o+e[12]*i,t[1]=e[1]*r+e[5]*a+e[9]*o+e[13]*i,t[2]=e[2]*r+e[6]*a+e[10]*o+e[14]*i,t[3]=e[3]*r+e[7]*a+e[11]*o+e[15]*i,t},n.transformQuat=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[0],u=e[1],c=e[2],s=e[3],f=s*r+u*o-c*a,l=s*a+c*r-i*o,h=s*o+i*a-u*r,d=-i*r-u*a-c*o;return t[0]=f*s+d*-i+l*-c-h*-u,t[1]=l*s+d*-u+h*-i-f*-c,t[2]=h*s+d*-c+f*-u-l*-i,t[3]=n[3],t},n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],o=t[3],i=n[0],u=n[1],c=n[2],s=n[3];return Math.abs(e-i)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(r-u)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-c)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-s)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))};var d=e(2),v=a;n.sub=v;var M=o;n.mul=M;var b=i;n.div=b;var m=c;n.dist=m;var p=s;n.sqrDist=p;var g=f;n.len=g;var y=l;n.sqrLen=y;var _=function(){var t=r();return function(n,e,r,a,o,i){var u=void 0,c=void 0;for(e||(e=4),r||(r=0),c=a?Math.min(a*e+r,n.length):n.length,u=r;u<c;u+=e)t[0]=n[u],t[1]=n[u+1],t[2]=n[u+2],t[3]=n[u+3],o(t,t,i),n[u]=t[0],n[u+1]=t[1],n[u+2]=t[2],n[u+3]=t[3];return n}}();n.forEach=_},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0}),n.randomRange=function(t,n){return Math.random()*(n-t)+t}},function(t,n,e){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.updateUniforms=n.initUniforms=n.updateAttributes=n.bindAttributes=n.initAttributes=n.createProgram=n.getTypeSize=n.Vao=n.Ubo=void 0;var a=r(e(34)),o=r(e(35)),i=e(36),u=e(12),c=e(37),s=e(38);n.Ubo=a.default,n.Vao=o.default,n.getTypeSize=i.getTypeSize,n.createProgram=u.createProgram,n.initAttributes=c.initAttributes,n.bindAttributes=c.bindAttributes,n.updateAttributes=c.updateAttributes,n.initUniforms=s.initUniforms,n.updateUniforms=s.updateUniforms},function(t,n,e){function r(t,n,e){var r=t.createShader(e);t.shaderSource(r,n),t.compileShader(r);if(!t.getShaderParameter(r,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(r);throw t.deleteShader(r),console.error(a,n),new Error(a)}return r}Object.defineProperty(n,"__esModule",{value:!0});n.createProgram=function(t,n,e){var a=r(t,n,t.VERTEX_SHADER),o=r(t,e,t.FRAGMENT_SHADER),i=t.createProgram();return t.attachShader(i,a),t.attachShader(i,o),t.linkProgram(i),i}},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r=e(1),a=function(t){return t&&t.__esModule?t:{default:t}}(e(3)),i=function(t){function n(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":o(n))&&"function"!=typeof n?t:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.directional=[],t.fog={color:r.vec4.fromValues(0,0,0,1),start:500,end:1e3,density:25e-5,enable:!1},t}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":o(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,a.default),n}();n.default=i},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=e(0),o=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);var e=(0,a.getContext)();Object.assign(this,{magFilter:e.NEAREST,minFilter:e.NEAREST,wrapS:e.CLAMP_TO_EDGE,wrapT:e.CLAMP_TO_EDGE,transparent:!1},n);var r=new Uint8Array([255,255,255,255]);this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,this.magFilter),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,this.minFilter),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,this.wrapS),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,this.wrapT),this.transparent&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.bindTexture(e.TEXTURE_2D,null)}return r(t,[{key:"fromImage",value:function(t){var n=this,e=new Image;e.crossOrigin="",e.onload=function(){n.update(e)},e.src=t}},{key:"update",value:function(t){var n=(0,a.getContext)();n.bindTexture(n.TEXTURE_2D,this.texture),n.generateMipmap(n.TEXTURE_2D),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.bindTexture(n.TEXTURE_2D,null)}}]),t}();n.default=o},function(t,n,e){function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}Object.defineProperty(n,"__esModule",{value:!0}),n.Performance=n.Texture=n.Particles=n.Mesh=n.Model=n.Scene=n.Renderer=n.cameras=n.utils=n.chunks=n.session=void 0;var o=a(e(0)),i=a(e(5)),u=a(e(20)),c=a(e(27)),s=r(e(31)),f=r(e(13)),l=r(e(4)),h=r(e(39)),d=r(e(40)),v=r(e(14)),M=r(e(41));n.session=o,n.chunks=i,n.utils=u,n.cameras=c,n.Renderer=s.default,n.Scene=f.default,n.Model=l.default,n.Mesh=h.default,n.Particles=d.default,n.Texture=v.default,n.Performance=M.default},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r={factory:function(){return"\n        // factory light\n        vec3 inverseLightDirection = normalize(vec3(-0.25, -0.25, 1)); // light position\n        vec3 directionalColor = vec3(max(dot(v_normal, inverseLightDirection), 0.0));\n        vec3 factory = mix(vec3(0.0), directionalColor, 0.989); // light intensity\n        base.rgb *= factory;\n\n        // if valid, calculate real lights\n        if (u_use_lights > 0.0) {\n            "+r.directional()+"\n        }"},directional:function(){return"\n            vec3 dcolor = vec3(0.0);\n\n            for (int i = 0; i < MAX_DIRECTIONAL; i++) {\n                vec3 inverseLightDirection = normalize(directionalLights[i].dlPosition.xyz);\n                vec3 light = vec3(max(dot(v_normal, inverseLightDirection), 0.0));\n                vec3 directionalColor = directionalLights[i].dlColor.rgb * light;\n                dcolor += mix(dcolor, directionalColor, directionalLights[i].flIntensity);\n            }\n            dcolor /= float(MAX_DIRECTIONAL);\n\n            base.rgb *= dcolor;\n        "}};n.LIGHT=r},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r={linear:function(){return"\n        if (fogSettings.a > 0.0) {\n            \n    float fogStart = fogSettings.x;\n    float fogEnd = fogSettings.y;\n    float fogDensity = fogSettings.z;\n\n    float dist = 0.0;\n    float fogFactor = 0.0;\n    dist = gl_FragCoord.z / gl_FragCoord.w;\n            fogFactor = (fogEnd - dist) / (fogEnd - fogStart);\n            fogFactor = clamp(fogFactor, 0.0, 1.0);\n            base = mix(fogColor, base, fogFactor);\n        }"},exponential:function(){return"\n        if (fogSettings.a > 0.0) {\n            \n    float fogStart = fogSettings.x;\n    float fogEnd = fogSettings.y;\n    float fogDensity = fogSettings.z;\n\n    float dist = 0.0;\n    float fogFactor = 0.0;\n    dist = gl_FragCoord.z / gl_FragCoord.w;\n            fogFactor = 1.0 / exp(dist * fogDensity);\n            fogFactor = clamp(fogFactor, 0.0, 1.0);\n            base = mix(fogColor, base, fogFactor);\n        }"},exponential2:function(){return"\n        if (fogSettings.a > 0.0) {\n            \n    float fogStart = fogSettings.x;\n    float fogEnd = fogSettings.y;\n    float fogDensity = fogSettings.z;\n\n    float dist = 0.0;\n    float fogFactor = 0.0;\n    dist = gl_FragCoord.z / gl_FragCoord.w;\n            fogFactor = 1.0 / exp((dist * fogDensity) * (dist * fogDensity));\n            fogFactor = clamp(fogFactor, 0.0, 1.0);\n            base = mix(fogColor, base, fogFactor);\n        }"}};n.FOG=r},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0}),n.UBO=void 0;var r=e(6),a={scene:function(){return"\n            uniform perScene {\n                mat4 projectionMatrix;\n                mat4 viewMatrix;\n                vec4 fogSettings;\n                vec4 fogColor;\n                float iGlobalTime;\n            };"},model:function(){return"\n            uniform perModel {\n                mat4 modelMatrix;\n                mat4 normalMatrix;\n            };"},lights:function(){return"\n            #define MAX_DIRECTIONAL "+r.MAX_DIRECTIONAL+"\n\n            struct Directional {\n                vec4 dlPosition;\n                vec4 dlColor;\n                float flIntensity;\n            };\n\n            uniform directional {\n                Directional directionalLights[MAX_DIRECTIONAL];\n            };\n\n            uniform float u_use_lights;"}};n.UBO=a},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});n.NOISE=function(){return"\n    vec3 mod289(vec3 x){return x-floor(x*(1./289.))*289.;}vec4 mod289(vec4 x){return x-floor(x*(1./289.))*289.;}vec4 permute(vec4 x){return mod289((x*34.+1.)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284-.853735*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.-15.)+10.);}float cnoise(vec3 P){vec3 Pi0=floor(P),Pi1=Pi0+vec3(1.);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P),Pf1=Pf0-vec3(1.);vec4 ix=vec4(Pi0.r,Pi1.r,Pi0.r,Pi1.r),iy=vec4(Pi0.gg,Pi1.gg),iz0=Pi0.bbbb,iz1=Pi1.bbbb,ixy=permute(permute(ix)+iy),ixy0=permute(ixy+iz0),ixy1=permute(ixy+iz1),gx0=ixy0*(1./7.),gy0=fract(floor(gx0)*(1./7.))-.5;gx0=fract(gx0);vec4 gz0=vec4(.5)-abs(gx0)-abs(gy0),sz0=step(gz0,vec4(0.));gx0-=sz0*(step(0.,gx0)-.5);gy0-=sz0*(step(0.,gy0)-.5);vec4 gx1=ixy1*(1./7.),gy1=fract(floor(gx1)*(1./7.))-.5;gx1=fract(gx1);vec4 gz1=vec4(.5)-abs(gx1)-abs(gy1),sz1=step(gz1,vec4(0.));gx1-=sz1*(step(0.,gx1)-.5);gy1-=sz1*(step(0.,gy1)-.5);vec3 g000=vec3(gx0.r,gy0.r,gz0.r),g100=vec3(gx0.g,gy0.g,gz0.g),g010=vec3(gx0.b,gy0.b,gz0.b),g110=vec3(gx0.a,gy0.a,gz0.a),g001=vec3(gx1.r,gy1.r,gz1.r),g101=vec3(gx1.g,gy1.g,gz1.g),g011=vec3(gx1.b,gy1.b,gz1.b),g111=vec3(gx1.a,gy1.a,gz1.a);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.r;g010*=norm0.g;g100*=norm0.b;g110*=norm0.a;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.r;g011*=norm1.g;g101*=norm1.b;g111*=norm1.a;float n000=dot(g000,Pf0),n100=dot(g100,vec3(Pf1.r,Pf0.gb)),n010=dot(g010,vec3(Pf0.r,Pf1.g,Pf0.b)),n110=dot(g110,vec3(Pf1.rg,Pf0.b)),n001=dot(g001,vec3(Pf0.rg,Pf1.b)),n101=dot(g101,vec3(Pf1.r,Pf0.g,Pf1.b)),n011=dot(g011,vec3(Pf0.r,Pf1.gb)),n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.b);vec2 n_yz=mix(n_z.rg,n_z.ba,fade_xyz.g);float n_xyz=mix(n_yz.r,n_yz.g,fade_xyz.r);return 2.2*n_xyz;}float pnoise(vec3 P,vec3 rep){vec3 Pi0=mod(floor(P),rep),Pi1=mod(Pi0+vec3(1.),rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P),Pf1=Pf0-vec3(1.);vec4 ix=vec4(Pi0.r,Pi1.r,Pi0.r,Pi1.r),iy=vec4(Pi0.gg,Pi1.gg),iz0=Pi0.bbbb,iz1=Pi1.bbbb,ixy=permute(permute(ix)+iy),ixy0=permute(ixy+iz0),ixy1=permute(ixy+iz1),gx0=ixy0*(1./7.),gy0=fract(floor(gx0)*(1./7.))-.5;gx0=fract(gx0);vec4 gz0=vec4(.5)-abs(gx0)-abs(gy0),sz0=step(gz0,vec4(0.));gx0-=sz0*(step(0.,gx0)-.5);gy0-=sz0*(step(0.,gy0)-.5);vec4 gx1=ixy1*(1./7.),gy1=fract(floor(gx1)*(1./7.))-.5;gx1=fract(gx1);vec4 gz1=vec4(.5)-abs(gx1)-abs(gy1),sz1=step(gz1,vec4(0.));gx1-=sz1*(step(0.,gx1)-.5);gy1-=sz1*(step(0.,gy1)-.5);vec3 g000=vec3(gx0.r,gy0.r,gz0.r),g100=vec3(gx0.g,gy0.g,gz0.g),g010=vec3(gx0.b,gy0.b,gz0.b),g110=vec3(gx0.a,gy0.a,gz0.a),g001=vec3(gx1.r,gy1.r,gz1.r),g101=vec3(gx1.g,gy1.g,gz1.g),g011=vec3(gx1.b,gy1.b,gz1.b),g111=vec3(gx1.a,gy1.a,gz1.a);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.r;g010*=norm0.g;g100*=norm0.b;g110*=norm0.a;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.r;g011*=norm1.g;g101*=norm1.b;g111*=norm1.a;float n000=dot(g000,Pf0),n100=dot(g100,vec3(Pf1.r,Pf0.gb)),n010=dot(g010,vec3(Pf0.r,Pf1.g,Pf0.b)),n110=dot(g110,vec3(Pf1.rg,Pf0.b)),n001=dot(g001,vec3(Pf0.rg,Pf1.b)),n101=dot(g101,vec3(Pf1.r,Pf0.g,Pf1.b)),n011=dot(g011,vec3(Pf0.r,Pf1.gb)),n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.b);vec2 n_yz=mix(n_z.rg,n_z.ba,fade_xyz.g);float n_xyz=mix(n_yz.r,n_yz.g,fade_xyz.r);return 2.2*n_xyz;}\n"}},function(t,n,e){function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}Object.defineProperty(n,"__esModule",{value:!0}),n.math=n.color=void 0;var a=r(e(21)),o=r(e(10));n.color=a,n.math=o},function(t,n,e){function r(t){var n=t>>16,e=t>>8&255,r=255&t;return i.vec3.fromValues(n,e,r)}function a(t){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?i.vec3.fromValues(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)):null}function o(t){var n=t.toString(16);return 1===n.length?"0"+n:n}Object.defineProperty(n,"__esModule",{value:!0}),n.hexIntToRgb=r,n.hexStringToRgb=a,n.componentToHex=o,n.rgbToHex=function(t,n,e){return"#"+o(t)+o(n)+o(e)},n.convert=function(t){var n=i.vec3.create(),e="number"==typeof t?r(t):a(t);return i.vec3.copy(n,function(t){return i.vec3.fromValues(t[0]/255,t[1]/255,t[2]/255)}(e)),n};var i=e(1)},function(t,n,e){function r(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=e[0],c=e[1],s=e[2],f=e[3];return t[0]=r*u+o*c,t[1]=a*u+i*c,t[2]=r*s+o*f,t[3]=a*s+i*f,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new o.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.clone=function(t){var n=new o.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.fromValues=function(t,n,e,r){var a=new o.ARRAY_TYPE(4);return a[0]=t,a[1]=n,a[2]=e,a[3]=r,a},n.set=function(t,n,e,r,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t},n.transpose=function(t,n){if(t===n){var e=n[1];t[1]=n[2],t[2]=e}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},n.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e*o-a*r;return i?(i=1/i,t[0]=o*i,t[1]=-r*i,t[2]=-a*i,t[3]=e*i,t):null},n.adjoint=function(t,n){var e=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=e,t},n.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},n.multiply=r,n.rotate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),c=Math.cos(e);return t[0]=r*c+o*u,t[1]=a*c+i*u,t[2]=r*-u+o*c,t[3]=a*-u+i*c,t},n.scale=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=e[0],c=e[1];return t[0]=r*u,t[1]=a*u,t[2]=o*c,t[3]=i*c,t},n.fromRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t},n.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},n.LDU=function(t,n,e,r){return t[2]=r[2]/r[0],e[0]=r[0],e[1]=r[1],e[3]=r[3]-t[2]*e[1],[t,n,e]},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},n.subtract=a,n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],i=t[3],u=n[0],c=n[1],s=n[2],f=n[3];return Math.abs(e-u)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(r-c)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-s)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-f)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))},n.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t},n.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t};var o=e(2),i=r;n.mul=i;var u=a;n.sub=u},function(t,n,e){function r(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=e[0],f=e[1],l=e[2],h=e[3],d=e[4],v=e[5];return t[0]=r*s+o*f,t[1]=a*s+i*f,t[2]=r*l+o*h,t[3]=a*l+i*h,t[4]=r*d+o*v+u,t[5]=a*d+i*v+c,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new o.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.clone=function(t){var n=new o.ARRAY_TYPE(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.fromValues=function(t,n,e,r,a,i){var u=new o.ARRAY_TYPE(6);return u[0]=t,u[1]=n,u[2]=e,u[3]=r,u[4]=a,u[5]=i,u},n.set=function(t,n,e,r,a,o,i){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t},n.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=e*o-r*a;return c?(c=1/c,t[0]=o*c,t[1]=-r*c,t[2]=-a*c,t[3]=e*c,t[4]=(a*u-o*i)*c,t[5]=(r*i-e*u)*c,t):null},n.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},n.multiply=r,n.rotate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=Math.sin(e),f=Math.cos(e);return t[0]=r*f+o*s,t[1]=a*f+i*s,t[2]=r*-s+o*f,t[3]=a*-s+i*f,t[4]=u,t[5]=c,t},n.scale=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=e[0],f=e[1];return t[0]=r*s,t[1]=a*s,t[2]=o*f,t[3]=i*f,t[4]=u,t[5]=c,t},n.translate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=e[0],f=e[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=r*s+o*f+u,t[5]=a*s+i*f+c,t},n.fromRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t[4]=0,t[5]=0,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t},n.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t},n.subtract=a,n.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t},n.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],i=t[3],u=t[4],c=t[5],s=n[0],f=n[1],l=n[2],h=n[3],d=n[4],v=n[5];return Math.abs(e-s)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(r-f)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(a-l)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-h)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-d)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(c-v)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))};var o=e(2),i=r;n.mul=i;var u=a;n.sub=u},function(t,n,e){function r(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],h=n[9],d=n[10],v=n[11],M=n[12],b=n[13],m=n[14],p=n[15],g=e[0],y=e[1],_=e[2],P=e[3];return t[0]=g*r+y*u+_*l+P*M,t[1]=g*a+y*c+_*h+P*b,t[2]=g*o+y*s+_*d+P*m,t[3]=g*i+y*f+_*v+P*p,g=e[4],y=e[5],_=e[6],P=e[7],t[4]=g*r+y*u+_*l+P*M,t[5]=g*a+y*c+_*h+P*b,t[6]=g*o+y*s+_*d+P*m,t[7]=g*i+y*f+_*v+P*p,g=e[8],y=e[9],_=e[10],P=e[11],t[8]=g*r+y*u+_*l+P*M,t[9]=g*a+y*c+_*h+P*b,t[10]=g*o+y*s+_*d+P*m,t[11]=g*i+y*f+_*v+P*p,g=e[12],y=e[13],_=e[14],P=e[15],t[12]=g*r+y*u+_*l+P*M,t[13]=g*a+y*c+_*h+P*b,t[14]=g*o+y*s+_*d+P*m,t[15]=g*i+y*f+_*v+P*p,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new o.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.clone=function(t){var n=new o.ARRAY_TYPE(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},n.fromValues=function(t,n,e,r,a,i,u,c,s,f,l,h,d,v,M,b){var m=new o.ARRAY_TYPE(16);return m[0]=t,m[1]=n,m[2]=e,m[3]=r,m[4]=a,m[5]=i,m[6]=u,m[7]=c,m[8]=s,m[9]=f,m[10]=l,m[11]=h,m[12]=d,m[13]=v,m[14]=M,m[15]=b,m},n.set=function(t,n,e,r,a,o,i,u,c,s,f,l,h,d,v,M,b){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=c,t[8]=s,t[9]=f,t[10]=l,t[11]=h,t[12]=d,t[13]=v,t[14]=M,t[15]=b,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],a=n[3],o=n[6],i=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=o,t[11]=n[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},n.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=n[9],h=n[10],d=n[11],v=n[12],M=n[13],b=n[14],m=n[15],p=e*u-r*i,g=e*c-a*i,y=e*s-o*i,_=r*c-a*u,P=r*s-o*u,x=a*s-o*c,E=f*M-l*v,O=f*b-h*v,w=f*m-d*v,A=l*b-h*M,R=l*m-d*M,S=h*m-d*b,T=p*S-g*R+y*A+_*w-P*O+x*E;return T?(T=1/T,t[0]=(u*S-c*R+s*A)*T,t[1]=(a*R-r*S-o*A)*T,t[2]=(M*x-b*P+m*_)*T,t[3]=(h*P-l*x-d*_)*T,t[4]=(c*w-i*S-s*O)*T,t[5]=(e*S-a*w+o*O)*T,t[6]=(b*y-v*x-m*g)*T,t[7]=(f*x-h*y+d*g)*T,t[8]=(i*R-u*w+s*E)*T,t[9]=(r*w-e*R-o*E)*T,t[10]=(v*P-M*y+m*p)*T,t[11]=(l*y-f*P-d*p)*T,t[12]=(u*O-i*A-c*E)*T,t[13]=(e*A-r*O+a*E)*T,t[14]=(M*g-v*_-b*p)*T,t[15]=(f*_-l*g+h*p)*T,t):null},n.adjoint=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=n[9],h=n[10],d=n[11],v=n[12],M=n[13],b=n[14],m=n[15];return t[0]=u*(h*m-d*b)-l*(c*m-s*b)+M*(c*d-s*h),t[1]=-(r*(h*m-d*b)-l*(a*m-o*b)+M*(a*d-o*h)),t[2]=r*(c*m-s*b)-u*(a*m-o*b)+M*(a*s-o*c),t[3]=-(r*(c*d-s*h)-u*(a*d-o*h)+l*(a*s-o*c)),t[4]=-(i*(h*m-d*b)-f*(c*m-s*b)+v*(c*d-s*h)),t[5]=e*(h*m-d*b)-f*(a*m-o*b)+v*(a*d-o*h),t[6]=-(e*(c*m-s*b)-i*(a*m-o*b)+v*(a*s-o*c)),t[7]=e*(c*d-s*h)-i*(a*d-o*h)+f*(a*s-o*c),t[8]=i*(l*m-d*M)-f*(u*m-s*M)+v*(u*d-s*l),t[9]=-(e*(l*m-d*M)-f*(r*m-o*M)+v*(r*d-o*l)),t[10]=e*(u*m-s*M)-i*(r*m-o*M)+v*(r*s-o*u),t[11]=-(e*(u*d-s*l)-i*(r*d-o*l)+f*(r*s-o*u)),t[12]=-(i*(l*b-h*M)-f*(u*b-c*M)+v*(u*h-c*l)),t[13]=e*(l*b-h*M)-f*(r*b-a*M)+v*(r*h-a*l),t[14]=-(e*(u*b-c*M)-i*(r*b-a*M)+v*(r*c-a*u)),t[15]=e*(u*h-c*l)-i*(r*h-a*l)+f*(r*c-a*u),t},n.determinant=function(t){var n=t[0],e=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],c=t[7],s=t[8],f=t[9],l=t[10],h=t[11],d=t[12],v=t[13],M=t[14],b=t[15];return(n*i-e*o)*(l*b-h*M)-(n*u-r*o)*(f*b-h*v)+(n*c-a*o)*(f*M-l*v)+(e*u-r*i)*(s*b-h*d)-(e*c-a*i)*(s*M-l*d)+(r*c-a*u)*(s*v-f*d)},n.multiply=r,n.translate=function(t,n,e){var r=e[0],a=e[1],o=e[2],i=void 0,u=void 0,c=void 0,s=void 0,f=void 0,l=void 0,h=void 0,d=void 0,v=void 0,M=void 0,b=void 0,m=void 0;return n===t?(t[12]=n[0]*r+n[4]*a+n[8]*o+n[12],t[13]=n[1]*r+n[5]*a+n[9]*o+n[13],t[14]=n[2]*r+n[6]*a+n[10]*o+n[14],t[15]=n[3]*r+n[7]*a+n[11]*o+n[15]):(i=n[0],u=n[1],c=n[2],s=n[3],f=n[4],l=n[5],h=n[6],d=n[7],v=n[8],M=n[9],b=n[10],m=n[11],t[0]=i,t[1]=u,t[2]=c,t[3]=s,t[4]=f,t[5]=l,t[6]=h,t[7]=d,t[8]=v,t[9]=M,t[10]=b,t[11]=m,t[12]=i*r+f*a+v*o+n[12],t[13]=u*r+l*a+M*o+n[13],t[14]=c*r+h*a+b*o+n[14],t[15]=s*r+d*a+m*o+n[15]),t},n.scale=function(t,n,e){var r=e[0],a=e[1],o=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},n.rotate=function(t,n,e,r){var a=r[0],i=r[1],u=r[2],c=Math.sqrt(a*a+i*i+u*u),s=void 0,f=void 0,l=void 0,h=void 0,d=void 0,v=void 0,M=void 0,b=void 0,m=void 0,p=void 0,g=void 0,y=void 0,_=void 0,P=void 0,x=void 0,E=void 0,O=void 0,w=void 0,A=void 0,R=void 0,S=void 0,T=void 0,I=void 0,L=void 0;return Math.abs(c)<o.EPSILON?null:(c=1/c,a*=c,i*=c,u*=c,s=Math.sin(e),f=Math.cos(e),l=1-f,h=n[0],d=n[1],v=n[2],M=n[3],b=n[4],m=n[5],p=n[6],g=n[7],y=n[8],_=n[9],P=n[10],x=n[11],E=a*a*l+f,O=i*a*l+u*s,w=u*a*l-i*s,A=a*i*l-u*s,R=i*i*l+f,S=u*i*l+a*s,T=a*u*l+i*s,I=i*u*l-a*s,L=u*u*l+f,t[0]=h*E+b*O+y*w,t[1]=d*E+m*O+_*w,t[2]=v*E+p*O+P*w,t[3]=M*E+g*O+x*w,t[4]=h*A+b*R+y*S,t[5]=d*A+m*R+_*S,t[6]=v*A+p*R+P*S,t[7]=M*A+g*R+x*S,t[8]=h*T+b*I+y*L,t[9]=d*T+m*I+_*L,t[10]=v*T+p*I+P*L,t[11]=M*T+g*I+x*L,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)},n.rotateX=function(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[4],i=n[5],u=n[6],c=n[7],s=n[8],f=n[9],l=n[10],h=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*a+s*r,t[5]=i*a+f*r,t[6]=u*a+l*r,t[7]=c*a+h*r,t[8]=s*a-o*r,t[9]=f*a-i*r,t[10]=l*a-u*r,t[11]=h*a-c*r,t},n.rotateY=function(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],i=n[1],u=n[2],c=n[3],s=n[8],f=n[9],l=n[10],h=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a-s*r,t[1]=i*a-f*r,t[2]=u*a-l*r,t[3]=c*a-h*r,t[8]=o*r+s*a,t[9]=i*r+f*a,t[10]=u*r+l*a,t[11]=c*r+h*a,t},n.rotateZ=function(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],i=n[1],u=n[2],c=n[3],s=n[4],f=n[5],l=n[6],h=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a+s*r,t[1]=i*a+f*r,t[2]=u*a+l*r,t[3]=c*a+h*r,t[4]=s*a-o*r,t[5]=f*a-i*r,t[6]=l*a-u*r,t[7]=h*a-c*r,t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotation=function(t,n,e){var r=e[0],a=e[1],i=e[2],u=Math.sqrt(r*r+a*a+i*i),c=void 0,s=void 0,f=void 0;return Math.abs(u)<o.EPSILON?null:(u=1/u,r*=u,a*=u,i*=u,c=Math.sin(n),s=Math.cos(n),f=1-s,t[0]=r*r*f+s,t[1]=a*r*f+i*c,t[2]=i*r*f-a*c,t[3]=0,t[4]=r*a*f-i*c,t[5]=a*a*f+s,t[6]=i*a*f+r*c,t[7]=0,t[8]=r*i*f+a*c,t[9]=a*i*f-r*c,t[10]=i*i*f+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},n.fromXRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromYRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromZRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotationTranslation=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=r+r,c=a+a,s=o+o,f=r*u,l=r*c,h=r*s,d=a*c,v=a*s,M=o*s,b=i*u,m=i*c,p=i*s;return t[0]=1-(d+M),t[1]=l+p,t[2]=h-m,t[3]=0,t[4]=l-p,t[5]=1-(f+M),t[6]=v+b,t[7]=0,t[8]=h+m,t[9]=v-b,t[10]=1-(f+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.getTranslation=function(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t},n.getScaling=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[4],i=n[5],u=n[6],c=n[8],s=n[9],f=n[10];return t[0]=Math.sqrt(e*e+r*r+a*a),t[1]=Math.sqrt(o*o+i*i+u*u),t[2]=Math.sqrt(c*c+s*s+f*f),t},n.getRotation=function(t,n){var e=n[0]+n[5]+n[10],r=0;return e>0?(r=2*Math.sqrt(e+1),t[3]=.25*r,t[0]=(n[6]-n[9])/r,t[1]=(n[8]-n[2])/r,t[2]=(n[1]-n[4])/r):n[0]>n[5]&n[0]>n[10]?(r=2*Math.sqrt(1+n[0]-n[5]-n[10]),t[3]=(n[6]-n[9])/r,t[0]=.25*r,t[1]=(n[1]+n[4])/r,t[2]=(n[8]+n[2])/r):n[5]>n[10]?(r=2*Math.sqrt(1+n[5]-n[0]-n[10]),t[3]=(n[8]-n[2])/r,t[0]=(n[1]+n[4])/r,t[1]=.25*r,t[2]=(n[6]+n[9])/r):(r=2*Math.sqrt(1+n[10]-n[0]-n[5]),t[3]=(n[1]-n[4])/r,t[0]=(n[8]+n[2])/r,t[1]=(n[6]+n[9])/r,t[2]=.25*r),t},n.fromRotationTranslationScale=function(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=n[3],c=a+a,s=o+o,f=i+i,l=a*c,h=a*s,d=a*f,v=o*s,M=o*f,b=i*f,m=u*c,p=u*s,g=u*f,y=r[0],_=r[1],P=r[2];return t[0]=(1-(v+b))*y,t[1]=(h+g)*y,t[2]=(d-p)*y,t[3]=0,t[4]=(h-g)*_,t[5]=(1-(l+b))*_,t[6]=(M+m)*_,t[7]=0,t[8]=(d+p)*P,t[9]=(M-m)*P,t[10]=(1-(l+v))*P,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.fromRotationTranslationScaleOrigin=function(t,n,e,r,a){var o=n[0],i=n[1],u=n[2],c=n[3],s=o+o,f=i+i,l=u+u,h=o*s,d=o*f,v=o*l,M=i*f,b=i*l,m=u*l,p=c*s,g=c*f,y=c*l,_=r[0],P=r[1],x=r[2],E=a[0],O=a[1],w=a[2];return t[0]=(1-(M+m))*_,t[1]=(d+y)*_,t[2]=(v-g)*_,t[3]=0,t[4]=(d-y)*P,t[5]=(1-(h+m))*P,t[6]=(b+p)*P,t[7]=0,t[8]=(v+g)*x,t[9]=(b-p)*x,t[10]=(1-(h+M))*x,t[11]=0,t[12]=e[0]+E-(t[0]*E+t[4]*O+t[8]*w),t[13]=e[1]+O-(t[1]*E+t[5]*O+t[9]*w),t[14]=e[2]+w-(t[2]*E+t[6]*O+t[10]*w),t[15]=1,t},n.fromQuat=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e+e,u=r+r,c=a+a,s=e*i,f=r*i,l=r*u,h=a*i,d=a*u,v=a*c,M=o*i,b=o*u,m=o*c;return t[0]=1-l-v,t[1]=f+m,t[2]=h-b,t[3]=0,t[4]=f-m,t[5]=1-s-v,t[6]=d+M,t[7]=0,t[8]=h+b,t[9]=d-M,t[10]=1-s-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.frustum=function(t,n,e,r,a,o,i){var u=1/(e-n),c=1/(a-r),s=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(e+n)*u,t[9]=(a+r)*c,t[10]=(i+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*s,t[15]=0,t},n.perspective=function(t,n,e,r,a){var o=1/Math.tan(n/2),i=1/(r-a);return t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*i,t[15]=0,t},n.perspectiveFromFieldOfView=function(t,n,e,r){var a=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),i=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),c=2/(i+u),s=2/(a+o);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(i-u)*c*.5,t[9]=(a-o)*s*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t},n.ortho=function(t,n,e,r,a,o,i){var u=1/(n-e),c=1/(r-a),s=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(n+e)*u,t[13]=(a+r)*c,t[14]=(i+o)*s,t[15]=1,t},n.lookAt=function(t,n,e,r){var a=void 0,i=void 0,u=void 0,c=void 0,s=void 0,f=void 0,l=void 0,h=void 0,d=void 0,v=void 0,M=n[0],b=n[1],m=n[2],p=r[0],g=r[1],y=r[2],_=e[0],P=e[1],x=e[2];return Math.abs(M-_)<o.EPSILON&&Math.abs(b-P)<o.EPSILON&&Math.abs(m-x)<o.EPSILON?mat4.identity(t):(l=M-_,h=b-P,d=m-x,v=1/Math.sqrt(l*l+h*h+d*d),l*=v,h*=v,d*=v,a=g*d-y*h,i=y*l-p*d,u=p*h-g*l,(v=Math.sqrt(a*a+i*i+u*u))?(a*=v=1/v,i*=v,u*=v):(a=0,i=0,u=0),c=h*u-d*i,s=d*a-l*u,f=l*i-h*a,(v=Math.sqrt(c*c+s*s+f*f))?(c*=v=1/v,s*=v,f*=v):(c=0,s=0,f=0),t[0]=a,t[1]=c,t[2]=l,t[3]=0,t[4]=i,t[5]=s,t[6]=h,t[7]=0,t[8]=u,t[9]=f,t[10]=d,t[11]=0,t[12]=-(a*M+i*b+u*m),t[13]=-(c*M+s*b+f*m),t[14]=-(l*M+h*b+d*m),t[15]=1,t)},n.targetTo=function(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=r[0],c=r[1],s=r[2],f=a-e[0],l=o-e[1],h=i-e[2],d=f*f+l*l+h*h;d>0&&(f*=d=1/Math.sqrt(d),l*=d,h*=d);var v=c*h-s*l,M=s*f-u*h,b=u*l-c*f;return t[0]=v,t[1]=M,t[2]=b,t[3]=0,t[4]=l*b-h*M,t[5]=h*v-f*b,t[6]=f*M-l*v,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t},n.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t},n.subtract=a,n.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t},n.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],i=t[3],u=t[4],c=t[5],s=t[6],f=t[7],l=t[8],h=t[9],d=t[10],v=t[11],M=t[12],b=t[13],m=t[14],p=t[15],g=n[0],y=n[1],_=n[2],P=n[3],x=n[4],E=n[5],O=n[6],w=n[7],A=n[8],R=n[9],S=n[10],T=n[11],I=n[12],L=n[13],N=n[14],q=n[15];return Math.abs(e-g)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(r-y)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(a-_)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(i-P)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(P))&&Math.abs(u-x)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(c-E)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(s-O)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(O))&&Math.abs(f-w)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(l-A)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(h-R)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(d-S)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(v-T)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(M-I)<=o.EPSILON*Math.max(1,Math.abs(M),Math.abs(I))&&Math.abs(b-L)<=o.EPSILON*Math.max(1,Math.abs(b),Math.abs(L))&&Math.abs(m-N)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(p-q)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(q))};var o=e(2),i=r;n.mul=i;var u=a;n.sub=u},function(t,n,e){function r(){var t=new c.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function a(t,n,e){e*=.5;var r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t}function o(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=e[0],c=e[1],s=e[2],f=e[3];return t[0]=r*f+i*u+a*s-o*c,t[1]=a*f+i*c+o*u-r*s,t[2]=o*f+i*s+r*c-a*u,t[3]=i*f-r*u-a*c-o*s,t}function i(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=n[3],c=e[0],s=e[1],f=e[2],l=e[3],h=void 0,d=void 0,v=void 0,M=void 0,b=void 0;return(d=a*c+o*s+i*f+u*l)<0&&(d=-d,c=-c,s=-s,f=-f,l=-l),1-d>1e-6?(h=Math.acos(d),v=Math.sin(h),M=Math.sin((1-r)*h)/v,b=Math.sin(r*h)/v):(M=1-r,b=r),t[0]=M*a+b*c,t[1]=M*o+b*s,t[2]=M*i+b*f,t[3]=M*u+b*l,t}function u(t,n){var e=n[0]+n[4]+n[8],r=void 0;if(e>0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{var a=0;n[4]>n[0]&&(a=1),n[8]>n[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;r=Math.sqrt(n[3*a+a]-n[3*o+o]-n[3*i+i]+1),t[a]=.5*r,r=.5/r,t[3]=(n[3*o+i]-n[3*i+o])*r,t[o]=(n[3*o+a]+n[3*a+o])*r,t[i]=(n[3*i+a]+n[3*a+i])*r}return t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},n.setAxisAngle=a,n.getAxisAngle=function(t,n){var e=2*Math.acos(n[3]),r=Math.sin(e/2);return 0!=r?(t[0]=n[0]/r,t[1]=n[1]/r,t[2]=n[2]/r):(t[0]=1,t[1]=0,t[2]=0),e},n.multiply=o,n.rotateX=function(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),c=Math.cos(e);return t[0]=r*c+i*u,t[1]=a*c+o*u,t[2]=o*c-a*u,t[3]=i*c-r*u,t},n.rotateY=function(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),c=Math.cos(e);return t[0]=r*c-o*u,t[1]=a*c+i*u,t[2]=o*c+r*u,t[3]=i*c-a*u,t},n.rotateZ=function(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),c=Math.cos(e);return t[0]=r*c+a*u,t[1]=a*c-r*u,t[2]=o*c+i*u,t[3]=i*c-o*u,t},n.calculateW=function(t,n){var e=n[0],r=n[1],a=n[2];return t[0]=e,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-r*r-a*a)),t},n.slerp=i,n.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e*e+r*r+a*a+o*o,u=i?1/i:0;return t[0]=-e*u,t[1]=-r*u,t[2]=-a*u,t[3]=o*u,t},n.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},n.fromMat3=u,n.fromEuler=function(t,n,e,r){var a=.5*Math.PI/180;n*=a,e*=a,r*=a;var o=Math.sin(n),i=Math.cos(n),u=Math.sin(e),c=Math.cos(e),s=Math.sin(r),f=Math.cos(r);return t[0]=o*c*f-i*u*s,t[1]=i*u*f+o*c*s,t[2]=i*c*s-o*u*f,t[3]=i*c*f+o*u*s,t},n.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var c=e(2),s=e(7),f=e(8),l=e(9),h=l.clone;n.clone=h;var d=l.fromValues;n.fromValues=d;var v=l.copy;n.copy=v;var M=l.set;n.set=M;var b=l.add;n.add=b;var m=o;n.mul=m;var p=l.scale;n.scale=p;var g=l.dot;n.dot=g;var y=l.lerp;n.lerp=y;var _=l.length;n.length=_;var P=_;n.len=P;var x=l.squaredLength;n.squaredLength=x;var E=x;n.sqrLen=E;var O=l.normalize;n.normalize=O;var w=l.exactEquals;n.exactEquals=w;var A=l.equals;n.equals=A;var R=function(){var t=f.create(),n=f.fromValues(1,0,0),e=f.fromValues(0,1,0);return function(r,o,i){var u=f.dot(o,i);return u<-.999999?(f.cross(t,n,o),f.len(t)<1e-6&&f.cross(t,e,o),f.normalize(t,t),a(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(f.cross(t,o,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,O(r,r))}}();n.rotationTo=R;var S=function(){var t=r(),n=r();return function(e,r,a,o,u,c){return i(t,r,u,c),i(n,a,o,c),i(e,t,n,2*c*(1-c)),e}}();n.sqlerp=S;var T=function(){var t=s.create();return function(n,e,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],O(n,u(n,t))}}();n.setAxes=T},function(t,n,e){function r(){var t=new l.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t}function o(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t}function i(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t}function u(t,n){var e=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(e*e+r*r)}function c(t,n){var e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r}function s(t){var n=t[0],e=t[1];return Math.sqrt(n*n+e*e)}function f(t){var n=t[0],e=t[1];return n*n+e*e}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(t){var n=new l.ARRAY_TYPE(2);return n[0]=t[0],n[1]=t[1],n},n.fromValues=function(t,n){var e=new l.ARRAY_TYPE(2);return e[0]=t,e[1]=n,e},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t},n.set=function(t,n,e){return t[0]=n,t[1]=e,t},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t},n.subtract=a,n.multiply=o,n.divide=i,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t},n.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t},n.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t},n.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t},n.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t},n.distance=u,n.squaredDistance=c,n.length=s,n.squaredLength=f,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t},n.normalize=function(t,n){var e=n[0],r=n[1],a=e*e+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=n[0]*a,t[1]=n[1]*a),t},n.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},n.cross=function(t,n,e){var r=n[0]*e[1]-n[1]*e[0];return t[0]=t[1]=0,t[2]=r,t},n.lerp=function(t,n,e,r){var a=n[0],o=n[1];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t},n.random=function(t,n){n=n||1;var e=2*l.RANDOM()*Math.PI;return t[0]=Math.cos(e)*n,t[1]=Math.sin(e)*n,t},n.transformMat2=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[2]*a,t[1]=e[1]*r+e[3]*a,t},n.transformMat2d=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[2]*a+e[4],t[1]=e[1]*r+e[3]*a+e[5],t},n.transformMat3=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[3]*a+e[6],t[1]=e[1]*r+e[4]*a+e[7],t},n.transformMat4=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[4]*a+e[12],t[1]=e[1]*r+e[5]*a+e[13],t},n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]},n.equals=function(t,n){var e=t[0],r=t[1],a=n[0],o=n[1];return Math.abs(e-a)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(r-o)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))};var l=e(2),h=s;n.len=h;var d=a;n.sub=d;var v=o;n.mul=v;var M=i;n.div=M;var b=u;n.dist=b;var m=c;n.sqrDist=m;var p=f;n.sqrLen=p;var g=function(){var t=r();return function(n,e,r,a,o,i){var u=void 0,c=void 0;for(e||(e=2),r||(r=0),c=a?Math.min(a*e+r,n.length):n.length,u=r;u<c;u+=e)t[0]=n[u],t[1]=n[u+1],o(t,t,i),n[u]=t[0],n[u+1]=t[1];return n}}();n.forEach=g},function(t,n,e){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.Perspective=n.Orthographic=void 0;var a=r(e(28)),o=r(e(30));n.Orthographic=a.default,n.Perspective=o.default},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=e(1),i=function(t){return t&&t.__esModule?t:{default:t}}(e(3)),u=function(t){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":o(n))&&"function"!=typeof n?t:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return Object.assign(e,{near:.1,far:100},t),e.matrices.projection=a.mat4.create(),e}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":o(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,i.default),r(n,[{key:"lookAt",value:function(t){a.vec3.copy(this.target,t)}},{key:"updateCameraMatrix",value:function(){a.mat4.ortho(this.matrices.projection,-1,1,-1,1,this.near,this.far)}}]),n}();n.default=u},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=e(1),o=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=a.vec3.fromValues(n,e,r)}return r(t,[{key:"set",value:function(t,n,e){this.x=t,this.y=n,this.z=e}},{key:"x",set:function(t){a.vec3.set(this.data,t,this.data[1],this.data[2])},get:function(){return this.data[0]}},{key:"y",set:function(t){a.vec3.set(this.data,this.data[0],t,this.data[2])},get:function(){return this.data[1]}},{key:"z",set:function(t){a.vec3.set(this.data,this.data[0],this.data[1],t)},get:function(){return this.data[2]}}]),t}();n.default=o},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=e(1),i=function(t){return t&&t.__esModule?t:{default:t}}(e(3)),u=function(t){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":o(n))&&"function"!=typeof n?t:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return Object.assign(e,{near:1,far:1e3,fov:35},t),e.matrices.projection=a.mat4.create(),e}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":o(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,i.default),r(n,[{key:"lookAt",value:function(t){a.vec3.copy(this.target,t)}},{key:"updateCameraMatrix",value:function(t,n){a.mat4.perspective(this.matrices.projection,this.fov*(Math.PI/180),t/n,this.near,this.far)}}]),n}();n.default=u},function(t,n,e){(function(t){function r(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),o=e(1),i=e(0),u=e(6),c=e(33),s=e(11),f=function(t){return t&&t.__esModule?t:{default:t}}(e(13)),l=void 0,h=void 0,d=!1,v=Date.now(),M={view:o.mat4.create(),normal:o.mat4.create(),modelView:o.mat4.create(),inversedModelView:o.mat4.create()},b=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.opaque=[],this.transparent=[],this.performance={opaque:0,transparent:0,vertices:0,instances:0},this.domElement=e.canvas||document.createElement("canvas"),delete e.canvas;var r=this.domElement.getContext("webgl2",Object.assign({},{antialias:!1},e));if(!r)throw new Error("webgl2 not supported");if(!1!==e.greeting){var a,o="color:#f33;font-size:x-small",u=["%c"+i.library+"\n%cversion: %c"+i.version+" %crunning: %c"+r.getParameter(r.VERSION),"color:#666;font-size:x-small;font-weight:bold;","color:#777;font-size:x-small",o,"color:#777;font-size:x-small",o];(a=console).log.apply(a,u)}(0,i.setContext)(r),this.init(),l=e.ratio||t.devicePixelRatio}return a(n,[{key:"init",value:function(){this.perScene=new s.Ubo([].concat(r(o.mat4.create()),r(o.mat4.create()),r(o.vec4.create()),r(o.vec4.create()),r(o.vec4.create())),0),this.perModel=new s.Ubo([].concat(r(o.mat4.create()),r(o.mat4.create())),1),this.directional=new s.Ubo(new Float32Array(12*u.MAX_DIRECTIONAL),2);var t=(0,i.getContext)();this.frameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,256,256,0,t.RGBA,t.UNSIGNED_BYTE,null),this.renderBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.renderBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,256,256),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.renderBuffer),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null)}},{key:"setSize",value:function(t,n){var e=t*l,r=n*l,a=(0,i.getContext)();(0,c.resize)(a.canvas,e,r,l)}},{key:"setRatio",value:function(t){l=t}},{key:"changeProgram",value:function(t){var n=(0,i.getContext)();n.useProgram(t);var e=n.getUniformBlockIndex(t,"perScene"),r=n.getUniformBlockIndex(t,"perModel"),a=n.getUniformBlockIndex(t,"directional");n.uniformBlockBinding(t,e,this.perScene.boundLocation),n.uniformBlockBinding(t,r,this.perModel.boundLocation),a===this.directional.boundLocation&&n.uniformBlockBinding(t,a,this.directional.boundLocation)}},{key:"render",value:function(t,n){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=(0,i.getContext)();a.viewport(0,0,a.canvas.width,a.canvas.height),e&&(a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)),a.enable(a.DEPTH_TEST),a.enable(a.CULL_FACE),a.disable(a.BLEND),n.updateCameraMatrix(a.canvas.width,a.canvas.height),o.mat4.identity(M.view),o.mat4.lookAt(M.view,n.position.data,n.target,n.up),(d=t.traverse())&&(this.opaque=[],this.transparent=[],this.performance.opaque=0,this.performance.transparent=0,this.performance.vertices=0,this.performance.instances=0,this.sort(t)),this.perScene.bind(),this.perModel.bind(),this.directional.bind(),this.perScene.update([].concat(r(n.matrices.projection),r(M.view),[t.fog.start,t.fog.end,t.fog.density,t.fog.enable],r(t.fog.color),[(Date.now()-v)/1e3,0,0,0]));for(var u=0;u<t.directional.length;u++)this.directional.update([].concat(r(t.directional[u].position.data),[0]).concat([].concat(r(t.directional[u].color),[0]),[t.directional[u].intensity,0,0,0]),12*u);for(var c=0;c<this.opaque.length;c++)this.renderObject(this.opaque[c]);this.transparent.sort(function(t,n){return t.position.z-n.position.z});for(var s=0;s<this.transparent.length;s++)this.renderObject(this.transparent[s])}},{key:"updateMatrices",value:function(t){o.mat4.identity(M.modelView),o.mat4.copy(M.modelView,t),o.mat4.invert(M.inversedModelView,M.modelView),o.mat4.transpose(M.inversedModelView,M.inversedModelView),o.mat4.identity(M.normal),o.mat4.copy(M.normal,M.inversedModelView)}},{key:"sort",value:function(t){for(var n=0;n<t.children.length;n++)this.sort(t.children[n]);!t.visible||t instanceof f.default||(t.transparent?(this.transparent.push(t),this.performance.transparent++):(this.opaque.push(t),this.performance.opaque++),t.attributes&&(this.performance.vertices+=t.attributes.a_position.value.length/3),t.isInstance&&(this.performance.instances+=t.instanceCount)),t.dirty.sorting=!1}},{key:"renderObject",value:function(t){null!==t.parent&&(t.program?(h!==t.program&&(h=t.program,this.changeProgram(h)),this.updateMatrices(t.matrices.model),t.bind(),this.perModel.update([].concat(r(t.matrices.model),r(M.normal))),t.update(),t.draw(),t.unbind()):t.init())}}]),n}();n.default=b}).call(n,e(32))},function(t,n){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":o(window))&&(e=window)}t.exports=e},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0}),n.resize=function(t,n,e,r){t.width=n,t.height=e,t.style.width=n/r+"px",t.style.height=e/r+"px"}},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=e(0),o=function(){function t(n,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);var r=(0,a.getContext)();this.boundLocation=e,this.data=new Float32Array(n),this.buffer=r.createBuffer(),r.bindBuffer(r.UNIFORM_BUFFER,this.buffer),r.bufferData(r.UNIFORM_BUFFER,this.data,r.STATIC_DRAW),r.bindBuffer(r.UNIFORM_BUFFER,null)}return r(t,[{key:"bind",value:function(){var t=(0,a.getContext)();t.bindBufferBase(t.UNIFORM_BUFFER,this.boundLocation,this.buffer)}},{key:"update",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(0,a.getContext)();this.data.set(t,n),e.bindBuffer(e.UNIFORM_BUFFER,this.buffer),e.bufferSubData(e.UNIFORM_BUFFER,0,this.data,0,null),e.bindBuffer(e.UNIFORM_BUFFER,null)}}]),t}();n.default=o},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=e(0),o=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);var n=(0,a.getContext)();this.vao=n.createVertexArray(),n.bindVertexArray(this.vao)}return r(t,[{key:"bind",value:function(){(0,a.getContext)().bindVertexArray(this.vao)}},{key:"unbind",value:function(){(0,a.getContext)().bindVertexArray(null)}},{key:"destroy",value:function(){(0,a.getContext)().deleteVertexArray(this.vao),this.vao=null}}]),t}();n.default=o},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});n.getTypeSize=function(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":case"mat2":return 4;case"mat3":return 9;case"mat4":return 16;default:throw new Error('"'+t+'" is an unknown type')}}},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0}),n.updateAttributes=n.bindAttributes=n.initAttributes=void 0;var r=e(0);n.initAttributes=function(t,n){var e=(0,r.getContext)();for(var a in t){var o=t[a],i=e.getAttribLocation(n,a),u=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,o.value,e.STATIC_DRAW),Object.assign(o,{location:i,buffer:u})}},n.bindAttributes=function(t){var n=(0,r.getContext)();Object.keys(t).forEach(function(e){var r=t[e],a=r.location,o=r.buffer,i=r.size,u=r.instanced;-1!==a&&(n.bindBuffer(n.ARRAY_BUFFER,o),n.enableVertexAttribArray(a),n.vertexAttribPointer(a,i,n.FLOAT,!1,0,0),u&&n.vertexAttribDivisor(a,1),n.bindBuffer(n.ARRAY_BUFFER,null))})},n.updateAttributes=function(t){var n=(0,r.getContext)();Object.keys(t).forEach(function(e){var r=t[e],a=r.location,o=r.buffer,i=r.value;-1!==a&&(n.enableVertexAttribArray(a),n.bindBuffer(n.ARRAY_BUFFER,o),n.bufferData(n.ARRAY_BUFFER,i,n.DYNAMIC_DRAW))})}},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0}),n.updateUniforms=n.initUniforms=void 0;var r=e(0);n.initUniforms=function(t,n){var e=(0,r.getContext)(),a=[e.TEXTURE0,e.TEXTURE1,e.TEXTURE2,e.TEXTURE3,e.TEXTURE4,e.TEXTURE5];Object.keys(t).forEach(function(r,o){var i=t[r],u=e.getUniformLocation(n,r);Object.assign(i,{location:u}),"sampler2D"===i.type&&(i.textureIndex=o,i.activeTexture=a[o])})},n.updateUniforms=function(t){var n=(0,r.getContext)();Object.keys(t).forEach(function(e){var r=t[e];switch(r.type){case"mat4":n.uniformMatrix4fv(r.location,!1,r.value);break;case"mat3":n.uniformMatrix3fv(r.location,!1,r.value);break;case"vec4":n.uniform4fv(r.location,r.value);break;case"vec3":n.uniform3fv(r.location,r.value);break;case"vec2":n.uniform2fv(r.location,r.value);break;case"float":n.uniform1f(r.location,r.value);break;case"sampler2D":n.uniform1i(r.location,r.textureIndex),n.activeTexture(r.activeTexture),n.bindTexture(n.TEXTURE_2D,r.value);break;default:throw new Error('"'+r.type+'" is an unknown uniform type')}})}},function(t,n,e){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(1),i=r(e(4)),u=r(e(14)),c=e(5),s=function(t){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":o(n))&&"function"!=typeof n?t:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),r="#version 300 es\n            in vec3 a_position;\n            in vec3 a_normal;\n            in vec2 a_uv;\n\n            "+c.UBO.scene()+"\n            "+c.UBO.model()+"\n\n            out vec3 fragVertexEc;\n            out vec2 v_uv;\n            out vec3 v_normal;\n\n            void main() {\n                vec4 position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n                gl_Position = position;\n\n                fragVertexEc = position.xyz;\n                v_uv = a_uv;\n                v_normal = normalize(mat3(normalMatrix) * a_normal);\n            }\n        ",i="#version 300 es\n            precision highp float;\n            precision highp int;\n\n            in vec3 fragVertexEc;\n            in vec2 v_uv;\n            in vec3 v_normal;\n\n            "+c.UBO.scene()+"\n            "+c.UBO.model()+"\n            "+c.UBO.lights()+"\n\n            uniform sampler2D u_map;\n            uniform vec3 u_color;\n\n            out vec4 outColor;\n\n            void main() {\n                vec3 v_normal = normalize(cross(dFdx(fragVertexEc), dFdy(fragVertexEc)));\n\n                vec4 base = vec4(0.0, 0.0, 0.0, 0.0);\n                base += vec4(u_color, 1.0);\n                base *= texture(u_map, v_uv);\n\n                "+c.LIGHT.factory()+"\n                "+c.FOG.linear()+"\n\n                outColor = base;\n            }\n        ";t.transparent&&(e.transparent=t.transparent);var s=t.geometry,f=t.color||a.vec3.fromValues(1,1,1),l=new u.default({transparent:!0});return t.map&&l.fromImage(t.map),e.setAttribute("a_position","vec3",new Float32Array(s.positions)),e.setIndex(new Uint16Array(s.indices)),e.setAttribute("a_normal","vec3",new Float32Array(s.normals)),s.uvs&&e.setAttribute("a_uv","vec2",new Float32Array(s.uvs)),e.setUniform("u_map","sampler2D",l.texture),e.setUniform("u_color","vec3",f),e.setUniform("u_use_lights","float",!1),e.setShader(r,i),e}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":o(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,i.default),n}();n.default=s},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=e(1),i=function(t){return t&&t.__esModule?t:{default:t}}(e(4)),u=e(0),c=e(10),s=function(t){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var e=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":o(n))&&"function"!=typeof n?t:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),r=t.total||2e3,i=t.size||1,u=t.bounds||20,s=t.color||a.vec3.fromValues(1,1,1),f=[],l=0;l<r;l+=1){var h=(0,c.randomRange)(-u,u),d=(0,c.randomRange)(-u,u),v=(0,c.randomRange)(-u,u);f.push(h,d,v)}return e.setAttribute("a_position","vec3",new Float32Array(f)),e.setUniform("u_pointSize","float",i),e.setUniform("u_color","vec3",s),e.setShader("#version 300 es\n            in vec3 a_position;\n\n            uniform perScene {\n                mat4 projectionMatrix;\n                mat4 viewMatrix;\n            };\n\n            uniform perModel {\n                mat4 modelMatrix;\n                mat4 normalMatrix;\n            };\n\n            uniform float u_bounds;\n            uniform float u_speed;\n            uniform float u_time;\n            uniform float u_pointSize;\n\n            void main() {\n                gl_PointSize = u_pointSize;\n                gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n            }\n        ","#version 300 es\n            precision highp float;\n            precision highp int;\n\n            uniform vec3 u_color;\n\n            out vec4 outColor;\n\n            void main() {\n                outColor = vec4(u_color, 1.0);\n            }\n        "),e}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":o(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,i.default),r(n,[{key:"draw",value:function(){var t=(0,u.getContext)();t.drawArrays(t.POINTS,0,this.attributes.a_position.value.length/3)}}]),n}();n.default=s},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.theme=n.theme||{font:"font-family:sans-serif;font-size:xx-small;font-weight:bold;line-height:15px;-moz-osx-font-smoothing: grayscale;-webkit-font-smoothing: antialiased;",color1:"#242424",color2:"#2a2a2a",color3:"#666",color4:"#999"};var e=document.createElement("div");e.style.cssText="position:fixed;bottom:0;left:0;min-width:80px;opacity:0.9;z-index:10000;",this.holder=document.createElement("div"),this.holder.style.cssText="padding:3px;background-color:"+this.theme.color1+";",e.appendChild(this.holder);var r=document.createElement("div");r.style.cssText=this.theme.font+";color:"+this.theme.color3+";",r.innerHTML="Performance",this.holder.appendChild(r),this.msTexts=[],this.domElement=e}return r(t,[{key:"rebuild",value:function(t){var n=this;this.msTexts=[],Object.keys(t).forEach(function(t){var e=document.createElement("div");e.style.cssText=n.theme.font+";color:"+n.theme.color4+";background-color:"+n.theme.color2+";",n.holder.appendChild(e),n.msTexts[t]=e})}},{key:"update",value:function(t){var n=this;Object.keys(this.msTexts).length!==Object.keys(t.performance).length&&this.rebuild(t.performance),Object.keys(t.performance).forEach(function(e){n.msTexts[e].textContent=e+": "+t.performance[e]})}}]),t}();n.default=a}])})}).call(n,e(1)(t))},function(t,n,e){"use strict";(function(t){var e,r,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(i,u){"object"===o(n)&&"object"===o(t)?t.exports=u():(r=[],void 0!==(a="function"==typeof(e=u)?e.apply(n,r):e)&&(t.exports=a))}(0,function(){return function(t){function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var e={};return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=7)}([function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0}),e.d(n,"ARRAY_TYPE",function(){return a}),n.setMatrixArrayType=function(t){a=t},n.toRadian=function(t){return t*i},n.equals=function(t,n){return Math.abs(t-n)<=r*Math.max(1,Math.abs(t),Math.abs(n))};var r=1e-6;n.EPSILON=r;var a="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;n.RANDOM=o;var i=Math.PI/180},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=e(2),o=function(){function t(n,e,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=[],u={faces:(0,a.unflatten)(e,3),positions:(0,a.unflatten)(n,3)},c=Math.min(o,3);c-- >0;)u=this.subdivide(u);for(var s=0;s<u.positions.length;s++){var f=this.normalize(u.positions[s]),l=.5*(-Math.atan2(f[2],-f[0])/Math.PI+1),h=.5+Math.asin(f[1])/Math.PI;i.push([1-l,1-h])}n=u.positions;for(var d=0;d<n.length;d++)this.scale(n[d],r);var v={positions:(0,a.flatten)(u.positions),indices:(0,a.flatten)(u.faces),normals:null,uvs:(0,a.flatten)(i,2)};this.geometry={positions:v.positions,indices:v.indices,normals:(0,a.generateVertexNormals)(v.positions,v.indices),uvs:(0,a.flatten)(i,2)}}return r(t,[{key:"fixPoleUVs",value:function(t,n,e){function r(n,r,a,o){var s=e[a],f=e[o];e[r][0]=(s[0]+f[0])/2,c++,i.push(t[r].slice()),u.push(e[r].slice()),n[0]=c}var a=this.firstYIndex(t,1),o=this.firstYIndex(t,-1);if(-1!==a&&-1!==o){for(var i=t.slice(),u=e.slice(),c=i.length-1,s=0;s<n.length;s++){var f=n[s],l=f[0],h=f[1],d=f[2];l===a?r(f,a,h,d):l===o&&r(f,o,h,d)}t=i,e=u}}},{key:"firstYIndex",value:function(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(Math.abs(r[1]-n)<=1e-4)return e}return-1}},{key:"normalize",value:function(t){for(var n=0,e=0;e<t.length;e++)n+=t[e]*t[e];if(0===(n=Math.sqrt(n)))return Array.apply(null,new Array(t.length)).map(Number.prototype.valueOf,0);for(var r=0;r<t.length;r++)t[r]/=n;return t}},{key:"scale",value:function(t,n){for(var e=0;e<t.length;e++)t[e]*=n;return t}},{key:"subdivide",value:function(t){function n(t,n){var e=function(t,n){return[(t[0]+n[0])/2,(t[1]+n[1])/2,(t[2]+n[2])/2]}(t,n),r=function(t){return t[0].toPrecision(6)+","+t[1].toPrecision(6)+","+t[2].toPrecision(6)}(e),a=i[r];return a||(i[r]=e,i[r])}for(var e=t.positions,r=t.faces,a=[],o=[],i={},u=0,c=0;c<r.length;c++){var s=r[c],f=s[0],l=s[1],h=s[2],d=e[f],v=e[l],M=e[h],b=n(d,v),m=n(v,M),p=n(M,d),g=o.indexOf(b);-1===g&&(g=u++,o.push(b));var y=o.indexOf(m);-1===y&&(y=u++,o.push(m));var _=o.indexOf(p);-1===_&&(_=u++,o.push(p));var P=o.indexOf(d);-1===P&&(P=u++,o.push(d));var x=o.indexOf(v);-1===x&&(x=u++,o.push(v));var E=o.indexOf(M);-1===E&&(E=u++,o.push(M)),a.push([P,g,_]),a.push([x,y,g]),a.push([E,_,y]),a.push([g,y,_])}return{faces:a,positions:o}}}]),t}();n.default=o},function(t,n,e){function r(t){for(var n=[],e=0;e<t.length;e++)Array.isArray(t[e])||t[e]instanceof Float32Array?n=n.concat(r(t[e])):n.push(t[e]);return n}function a(t,n){for(var e=[],r=0;r<t.length;r+=n){for(var a=[],o=0;o<n;o++)a.push(t[r+o]);e.push(a)}return e}function o(t,n){for(var e=a(n,3),o=a(t,3),u=[],c=i.vec3.create(),s=i.vec3.create(),f=i.vec3.create(),l=void 0,h=void 0,d=void 0,v=0;v<e.length;v++){var M=e[v],b=M[0],m=M[1],p=M[2];l=o[b],h=o[m],d=o[p],i.vec3.subtract(c,d,h),i.vec3.subtract(s,l,h),i.vec3.cross(f,c,s),void 0===u[b]&&(u[b]=i.vec3.create()),void 0===u[m]&&(u[m]=i.vec3.create()),void 0===u[p]&&(u[p]=i.vec3.create()),i.vec3.add(u[b],u[b],f),i.vec3.add(u[m],u[m],f),i.vec3.add(u[p],u[p],f)}for(var g=0;g<u.length;g++)i.vec3.normalize(u[g],u[g]);return r(u)}Object.defineProperty(n,"__esModule",{value:!0}),n.flatten=r,n.unflatten=a,n.generateVertexNormals=o,n.mergeVertices=function(t){for(var n=a(t.positions,3),e={},i=[],u=[],c=Math.pow(10,4),s=0;s<n.length;s++){var f=n[s],l="\n            "+Math.round(f[0]*c)+"_\n            "+Math.round(f[1]*c)+"_\n            "+Math.round(f[2]*c)+"\n        ";void 0===e[l]?(e[l]=s,i.push(n[s]),u[s]=i.length-1):u[s]=u[e[l]]}for(var h=[],d=a(t.indices,3),v=0;v<d.length;v++){var M=d[v];M[0]=u[M[0]],M[1]=u[M[1]],M[2]=u[M[2]];for(var b=[M[0],M[1],M[2]],m=0;m<3;m++)if(b[m]===b[(m+1)%3]){h.push(v);break}}for(var p=h.length-1;p>=0;p--){var g=h[p];d.splice(g,1);for(var y=0;y<this.faceVertexUvs.length;y++)this.faceVertexUvs[y].splice(g,1)}var _=r(i),P=r(d);return{positions:new Float32Array(_),indices:new Uint16Array(P),normals:new Float32Array(o(_,P))}};var i=e(3)},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});var r=e(0),a=e(8),o=e(9),i=e(4),u=e(10),c=e(11),s=e(12),f=e(5),l=e(6);e.d(n,"glMatrix",function(){return r}),e.d(n,"mat2",function(){return a}),e.d(n,"mat2d",function(){return o}),e.d(n,"mat3",function(){return i}),e.d(n,"mat4",function(){return u}),e.d(n,"quat",function(){return c}),e.d(n,"vec2",function(){return s}),e.d(n,"vec3",function(){return f}),e.d(n,"vec4",function(){return l})},function(t,n,e){function r(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],h=e[0],d=e[1],v=e[2],M=e[3],b=e[4],m=e[5],p=e[6],g=e[7],y=e[8];return t[0]=h*r+d*i+v*s,t[1]=h*a+d*u+v*f,t[2]=h*o+d*c+v*l,t[3]=M*r+b*i+m*s,t[4]=M*a+b*u+m*f,t[5]=M*o+b*c+m*l,t[6]=p*r+g*i+y*s,t[7]=p*a+g*u+y*f,t[8]=p*o+g*c+y*l,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new o.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat4=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},n.clone=function(t){var n=new o.ARRAY_TYPE(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},n.fromValues=function(t,n,e,r,a,i,u,c,s){var f=new o.ARRAY_TYPE(9);return f[0]=t,f[1]=n,f[2]=e,f[3]=r,f[4]=a,f[5]=i,f[6]=u,f[7]=c,f[8]=s,f},n.set=function(t,n,e,r,a,o,i,u,c,s){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=c,t[8]=s,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],a=n[5];t[1]=n[3],t[2]=n[6],t[3]=e,t[5]=n[7],t[6]=r,t[7]=a}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},n.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=f*i-u*s,h=-f*o+u*c,d=s*o-i*c,v=e*l+r*h+a*d;return v?(v=1/v,t[0]=l*v,t[1]=(-f*r+a*s)*v,t[2]=(u*r-a*i)*v,t[3]=h*v,t[4]=(f*e-a*c)*v,t[5]=(-u*e+a*o)*v,t[6]=d*v,t[7]=(-s*e+r*c)*v,t[8]=(i*e-r*o)*v,t):null},n.adjoint=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8];return t[0]=i*f-u*s,t[1]=a*s-r*f,t[2]=r*u-a*i,t[3]=u*c-o*f,t[4]=e*f-a*c,t[5]=a*o-e*u,t[6]=o*s-i*c,t[7]=r*c-e*s,t[8]=e*i-r*o,t},n.determinant=function(t){var n=t[0],e=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],c=t[7],s=t[8];return n*(s*o-i*c)+e*(-s*a+i*u)+r*(c*a-o*u)},n.multiply=r,n.translate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],h=e[0],d=e[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=c,t[6]=h*r+d*i+s,t[7]=h*a+d*u+f,t[8]=h*o+d*c+l,t},n.rotate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],h=Math.sin(e),d=Math.cos(e);return t[0]=d*r+h*i,t[1]=d*a+h*u,t[2]=d*o+h*c,t[3]=d*i-h*r,t[4]=d*u-h*a,t[5]=d*c-h*o,t[6]=s,t[7]=f,t[8]=l,t},n.scale=function(t,n,e){var r=e[0],a=e[1];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=a*n[3],t[4]=a*n[4],t[5]=a*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t},n.fromRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat2d=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},n.fromQuat=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e+e,u=r+r,c=a+a,s=e*i,f=r*i,l=r*u,h=a*i,d=a*u,v=a*c,M=o*i,b=o*u,m=o*c;return t[0]=1-l-v,t[3]=f-m,t[6]=h+b,t[1]=f+m,t[4]=1-s-v,t[7]=d-M,t[2]=h-b,t[5]=d+M,t[8]=1-s-l,t},n.normalFromMat4=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=n[9],h=n[10],d=n[11],v=n[12],M=n[13],b=n[14],m=n[15],p=e*u-r*i,g=e*c-a*i,y=e*s-o*i,_=r*c-a*u,P=r*s-o*u,x=a*s-o*c,E=f*M-l*v,O=f*b-h*v,w=f*m-d*v,A=l*b-h*M,R=l*m-d*M,S=h*m-d*b,T=p*S-g*R+y*A+_*w-P*O+x*E;return T?(T=1/T,t[0]=(u*S-c*R+s*A)*T,t[1]=(c*w-i*S-s*O)*T,t[2]=(i*R-u*w+s*E)*T,t[3]=(a*R-r*S-o*A)*T,t[4]=(e*S-a*w+o*O)*T,t[5]=(r*w-e*R-o*E)*T,t[6]=(M*x-b*P+m*_)*T,t[7]=(b*y-v*x-m*g)*T,t[8]=(v*P-M*y+m*p)*T,t):null},n.projection=function(t,n,e){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},n.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t},n.subtract=a,n.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t},n.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],i=t[3],u=t[4],c=t[5],s=t[6],f=t[7],l=t[8],h=n[0],d=n[1],v=n[2],M=n[3],b=n[4],m=n[5],p=n[6],g=n[7],y=n[8];return Math.abs(e-h)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(r-d)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-v)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-M)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(u-b)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-m)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(s-p)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(f-g)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(l-y)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))};var o=e(0),i=r;n.mul=i;var u=a;n.sub=u},function(t,n,e){function r(){var t=new v.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){var n=t[0],e=t[1],r=t[2];return Math.sqrt(n*n+e*e+r*r)}function o(t,n,e){var r=new v.ARRAY_TYPE(3);return r[0]=t,r[1]=n,r[2]=e,r}function i(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function u(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t}function c(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t}function s(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2];return Math.sqrt(e*e+r*r+a*a)}function f(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2];return e*e+r*r+a*a}function l(t){var n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r}function h(t,n){var e=n[0],r=n[1],a=n[2],o=e*e+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o),t}function d(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(t){var n=new v.ARRAY_TYPE(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},n.length=a,n.fromValues=o,n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},n.set=function(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t},n.subtract=i,n.multiply=u,n.divide=c,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t},n.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t},n.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t},n.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t},n.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t},n.distance=s,n.squaredDistance=f,n.squaredLength=l,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t},n.normalize=h,n.dot=d,n.cross=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[0],u=e[1],c=e[2];return t[0]=a*c-o*u,t[1]=o*i-r*c,t[2]=r*u-a*i,t},n.lerp=function(t,n,e,r){var a=n[0],o=n[1],i=n[2];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t[2]=i+r*(e[2]-i),t},n.hermite=function(t,n,e,r,a,o){var i=o*o,u=i*(2*o-3)+1,c=i*(o-2)+o,s=i*(o-1),f=i*(3-2*o);return t[0]=n[0]*u+e[0]*c+r[0]*s+a[0]*f,t[1]=n[1]*u+e[1]*c+r[1]*s+a[1]*f,t[2]=n[2]*u+e[2]*c+r[2]*s+a[2]*f,t},n.bezier=function(t,n,e,r,a,o){var i=1-o,u=i*i,c=o*o,s=u*i,f=3*o*u,l=3*c*i,h=c*o;return t[0]=n[0]*s+e[0]*f+r[0]*l+a[0]*h,t[1]=n[1]*s+e[1]*f+r[1]*l+a[1]*h,t[2]=n[2]*s+e[2]*f+r[2]*l+a[2]*h,t},n.random=function(t,n){n=n||1;var e=2*v.RANDOM()*Math.PI,r=2*v.RANDOM()-1,a=Math.sqrt(1-r*r)*n;return t[0]=Math.cos(e)*a,t[1]=Math.sin(e)*a,t[2]=r*n,t},n.transformMat4=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[3]*r+e[7]*a+e[11]*o+e[15];return i=i||1,t[0]=(e[0]*r+e[4]*a+e[8]*o+e[12])/i,t[1]=(e[1]*r+e[5]*a+e[9]*o+e[13])/i,t[2]=(e[2]*r+e[6]*a+e[10]*o+e[14])/i,t},n.transformMat3=function(t,n,e){var r=n[0],a=n[1],o=n[2];return t[0]=r*e[0]+a*e[3]+o*e[6],t[1]=r*e[1]+a*e[4]+o*e[7],t[2]=r*e[2]+a*e[5]+o*e[8],t},n.transformQuat=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[0],u=e[1],c=e[2],s=e[3],f=s*r+u*o-c*a,l=s*a+c*r-i*o,h=s*o+i*a-u*r,d=-i*r-u*a-c*o;return t[0]=f*s+d*-i+l*-c-h*-u,t[1]=l*s+d*-u+h*-i-f*-c,t[2]=h*s+d*-c+f*-u-l*-i,t},n.rotateX=function(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},n.rotateY=function(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},n.rotateZ=function(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},n.angle=function(t,n){var e=o(t[0],t[1],t[2]),r=o(n[0],n[1],n[2]);h(e,e),h(r,r);var a=d(e,r);return a>1?0:a<-1?Math.PI:Math.acos(a)},n.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],o=n[0],i=n[1],u=n[2];return Math.abs(e-o)<=v.EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(r-i)<=v.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=v.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var v=e(0),M=i;n.sub=M;var b=u;n.mul=b;var m=c;n.div=m;var p=s;n.dist=p;var g=f;n.sqrDist=g;var y=a;n.len=y;var _=l;n.sqrLen=_;var P=function(){var t=r();return function(n,e,r,a,o,i){var u=void 0,c=void 0;for(e||(e=3),r||(r=0),c=a?Math.min(a*e+r,n.length):n.length,u=r;u<c;u+=e)t[0]=n[u],t[1]=n[u+1],t[2]=n[u+2],o(t,t,i),n[u]=t[0],n[u+1]=t[1],n[u+2]=t[2];return n}}();n.forEach=P},function(t,n,e){function r(){var t=new d.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}function o(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t[3]=n[3]*e[3],t}function i(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t[3]=n[3]/e[3],t}function u(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t}function c(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2],o=n[3]-t[3];return Math.sqrt(e*e+r*r+a*a+o*o)}function s(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2],o=n[3]-t[3];return e*e+r*r+a*a+o*o}function f(t){var n=t[0],e=t[1],r=t[2],a=t[3];return Math.sqrt(n*n+e*e+r*r+a*a)}function l(t){var n=t[0],e=t[1],r=t[2],a=t[3];return n*n+e*e+r*r+a*a}function h(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e*e+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=e*i,t[1]=r*i,t[2]=a*i,t[3]=o*i),t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(t){var n=new d.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},n.fromValues=function(t,n,e,r){var a=new d.ARRAY_TYPE(4);return a[0]=t,a[1]=n,a[2]=e,a[3]=r,a},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},n.set=function(t,n,e,r,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},n.subtract=a,n.multiply=o,n.divide=i,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},n.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t[3]=Math.min(n[3],e[3]),t},n.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t[3]=Math.max(n[3],e[3]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},n.scale=u,n.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t},n.distance=c,n.squaredDistance=s,n.length=f,n.squaredLength=l,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},n.normalize=h,n.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},n.lerp=function(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=n[3];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t[2]=i+r*(e[2]-i),t[3]=u+r*(e[3]-u),t},n.random=function(t,n){return n=n||1,t[0]=d.RANDOM(),t[1]=d.RANDOM(),t[2]=d.RANDOM(),t[3]=d.RANDOM(),h(t,t),u(t,t,n),t},n.transformMat4=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3];return t[0]=e[0]*r+e[4]*a+e[8]*o+e[12]*i,t[1]=e[1]*r+e[5]*a+e[9]*o+e[13]*i,t[2]=e[2]*r+e[6]*a+e[10]*o+e[14]*i,t[3]=e[3]*r+e[7]*a+e[11]*o+e[15]*i,t},n.transformQuat=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[0],u=e[1],c=e[2],s=e[3],f=s*r+u*o-c*a,l=s*a+c*r-i*o,h=s*o+i*a-u*r,d=-i*r-u*a-c*o;return t[0]=f*s+d*-i+l*-c-h*-u,t[1]=l*s+d*-u+h*-i-f*-c,t[2]=h*s+d*-c+f*-u-l*-i,t[3]=n[3],t},n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],o=t[3],i=n[0],u=n[1],c=n[2],s=n[3];return Math.abs(e-i)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(r-u)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-c)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-s)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))};var d=e(0),v=a;n.sub=v;var M=o;n.mul=M;var b=i;n.div=b;var m=c;n.dist=m;var p=s;n.sqrDist=p;var g=f;n.len=g;var y=l;n.sqrLen=y;var _=function(){var t=r();return function(n,e,r,a,o,i){var u=void 0,c=void 0;for(e||(e=4),r||(r=0),c=a?Math.min(a*e+r,n.length):n.length,u=r;u<c;u+=e)t[0]=n[u],t[1]=n[u+1],t[2]=n[u+2],t[3]=n[u+3],o(t,t,i),n[u]=t[0],n[u+1]=t[1],n[u+2]=t[2],n[u+3]=t[3];return n}}();n.forEach=_},function(t,n,e){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.TorusKnot=n.Box=n.Plane=n.Line=n.Icosahedron=n.Dodecahedron=n.Octahedron=n.Hexahedron=n.Tetrahedron=n.utils=void 0;var a=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}(e(2)),o=r(e(13)),i=r(e(14)),u=r(e(15)),c=r(e(16)),s=r(e(17)),f=r(e(18)),l=r(e(19)),h=r(e(20)),d=r(e(21));n.utils=a,n.Tetrahedron=o.default,n.Hexahedron=i.default,n.Octahedron=u.default,n.Dodecahedron=c.default,n.Icosahedron=s.default,n.Line=f.default,n.Plane=l.default,n.Box=h.default,n.TorusKnot=d.default},function(t,n,e){function r(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=e[0],c=e[1],s=e[2],f=e[3];return t[0]=r*u+o*c,t[1]=a*u+i*c,t[2]=r*s+o*f,t[3]=a*s+i*f,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new o.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.clone=function(t){var n=new o.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.fromValues=function(t,n,e,r){var a=new o.ARRAY_TYPE(4);return a[0]=t,a[1]=n,a[2]=e,a[3]=r,a},n.set=function(t,n,e,r,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t},n.transpose=function(t,n){if(t===n){var e=n[1];t[1]=n[2],t[2]=e}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},n.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e*o-a*r;return i?(i=1/i,t[0]=o*i,t[1]=-r*i,t[2]=-a*i,t[3]=e*i,t):null},n.adjoint=function(t,n){var e=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=e,t},n.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},n.multiply=r,n.rotate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),c=Math.cos(e);return t[0]=r*c+o*u,t[1]=a*c+i*u,t[2]=r*-u+o*c,t[3]=a*-u+i*c,t},n.scale=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=e[0],c=e[1];return t[0]=r*u,t[1]=a*u,t[2]=o*c,t[3]=i*c,t},n.fromRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t},n.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},n.LDU=function(t,n,e,r){return t[2]=r[2]/r[0],e[0]=r[0],e[1]=r[1],e[3]=r[3]-t[2]*e[1],[t,n,e]},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},n.subtract=a,n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],i=t[3],u=n[0],c=n[1],s=n[2],f=n[3];return Math.abs(e-u)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(r-c)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-s)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-f)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))},n.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t},n.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t};var o=e(0),i=r;n.mul=i;var u=a;n.sub=u},function(t,n,e){function r(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=e[0],f=e[1],l=e[2],h=e[3],d=e[4],v=e[5];return t[0]=r*s+o*f,t[1]=a*s+i*f,t[2]=r*l+o*h,t[3]=a*l+i*h,t[4]=r*d+o*v+u,t[5]=a*d+i*v+c,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new o.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.clone=function(t){var n=new o.ARRAY_TYPE(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.fromValues=function(t,n,e,r,a,i){var u=new o.ARRAY_TYPE(6);return u[0]=t,u[1]=n,u[2]=e,u[3]=r,u[4]=a,u[5]=i,u},n.set=function(t,n,e,r,a,o,i){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t},n.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=e*o-r*a;return c?(c=1/c,t[0]=o*c,t[1]=-r*c,t[2]=-a*c,t[3]=e*c,t[4]=(a*u-o*i)*c,t[5]=(r*i-e*u)*c,t):null},n.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},n.multiply=r,n.rotate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=Math.sin(e),f=Math.cos(e);return t[0]=r*f+o*s,t[1]=a*f+i*s,t[2]=r*-s+o*f,t[3]=a*-s+i*f,t[4]=u,t[5]=c,t},n.scale=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=e[0],f=e[1];return t[0]=r*s,t[1]=a*s,t[2]=o*f,t[3]=i*f,t[4]=u,t[5]=c,t},n.translate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=e[0],f=e[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=r*s+o*f+u,t[5]=a*s+i*f+c,t},n.fromRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t[4]=0,t[5]=0,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t},n.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t},n.subtract=a,n.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t},n.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],i=t[3],u=t[4],c=t[5],s=n[0],f=n[1],l=n[2],h=n[3],d=n[4],v=n[5];return Math.abs(e-s)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(r-f)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(a-l)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-h)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-d)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(c-v)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))};var o=e(0),i=r;n.mul=i;var u=a;n.sub=u},function(t,n,e){function r(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],h=n[9],d=n[10],v=n[11],M=n[12],b=n[13],m=n[14],p=n[15],g=e[0],y=e[1],_=e[2],P=e[3];return t[0]=g*r+y*u+_*l+P*M,t[1]=g*a+y*c+_*h+P*b,t[2]=g*o+y*s+_*d+P*m,t[3]=g*i+y*f+_*v+P*p,g=e[4],y=e[5],_=e[6],P=e[7],t[4]=g*r+y*u+_*l+P*M,t[5]=g*a+y*c+_*h+P*b,t[6]=g*o+y*s+_*d+P*m,t[7]=g*i+y*f+_*v+P*p,g=e[8],y=e[9],_=e[10],P=e[11],t[8]=g*r+y*u+_*l+P*M,t[9]=g*a+y*c+_*h+P*b,t[10]=g*o+y*s+_*d+P*m,t[11]=g*i+y*f+_*v+P*p,g=e[12],y=e[13],_=e[14],P=e[15],t[12]=g*r+y*u+_*l+P*M,t[13]=g*a+y*c+_*h+P*b,t[14]=g*o+y*s+_*d+P*m,t[15]=g*i+y*f+_*v+P*p,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new o.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.clone=function(t){var n=new o.ARRAY_TYPE(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},n.fromValues=function(t,n,e,r,a,i,u,c,s,f,l,h,d,v,M,b){var m=new o.ARRAY_TYPE(16);return m[0]=t,m[1]=n,m[2]=e,m[3]=r,m[4]=a,m[5]=i,m[6]=u,m[7]=c,m[8]=s,m[9]=f,m[10]=l,m[11]=h,m[12]=d,m[13]=v,m[14]=M,m[15]=b,m},n.set=function(t,n,e,r,a,o,i,u,c,s,f,l,h,d,v,M,b){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=c,t[8]=s,t[9]=f,t[10]=l,t[11]=h,t[12]=d,t[13]=v,t[14]=M,t[15]=b,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],a=n[3],o=n[6],i=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=o,t[11]=n[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},n.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=n[9],h=n[10],d=n[11],v=n[12],M=n[13],b=n[14],m=n[15],p=e*u-r*i,g=e*c-a*i,y=e*s-o*i,_=r*c-a*u,P=r*s-o*u,x=a*s-o*c,E=f*M-l*v,O=f*b-h*v,w=f*m-d*v,A=l*b-h*M,R=l*m-d*M,S=h*m-d*b,T=p*S-g*R+y*A+_*w-P*O+x*E;return T?(T=1/T,t[0]=(u*S-c*R+s*A)*T,t[1]=(a*R-r*S-o*A)*T,t[2]=(M*x-b*P+m*_)*T,t[3]=(h*P-l*x-d*_)*T,t[4]=(c*w-i*S-s*O)*T,t[5]=(e*S-a*w+o*O)*T,t[6]=(b*y-v*x-m*g)*T,t[7]=(f*x-h*y+d*g)*T,t[8]=(i*R-u*w+s*E)*T,t[9]=(r*w-e*R-o*E)*T,t[10]=(v*P-M*y+m*p)*T,t[11]=(l*y-f*P-d*p)*T,t[12]=(u*O-i*A-c*E)*T,t[13]=(e*A-r*O+a*E)*T,t[14]=(M*g-v*_-b*p)*T,t[15]=(f*_-l*g+h*p)*T,t):null},n.adjoint=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=n[9],h=n[10],d=n[11],v=n[12],M=n[13],b=n[14],m=n[15];return t[0]=u*(h*m-d*b)-l*(c*m-s*b)+M*(c*d-s*h),t[1]=-(r*(h*m-d*b)-l*(a*m-o*b)+M*(a*d-o*h)),t[2]=r*(c*m-s*b)-u*(a*m-o*b)+M*(a*s-o*c),t[3]=-(r*(c*d-s*h)-u*(a*d-o*h)+l*(a*s-o*c)),t[4]=-(i*(h*m-d*b)-f*(c*m-s*b)+v*(c*d-s*h)),t[5]=e*(h*m-d*b)-f*(a*m-o*b)+v*(a*d-o*h),t[6]=-(e*(c*m-s*b)-i*(a*m-o*b)+v*(a*s-o*c)),t[7]=e*(c*d-s*h)-i*(a*d-o*h)+f*(a*s-o*c),t[8]=i*(l*m-d*M)-f*(u*m-s*M)+v*(u*d-s*l),t[9]=-(e*(l*m-d*M)-f*(r*m-o*M)+v*(r*d-o*l)),t[10]=e*(u*m-s*M)-i*(r*m-o*M)+v*(r*s-o*u),t[11]=-(e*(u*d-s*l)-i*(r*d-o*l)+f*(r*s-o*u)),t[12]=-(i*(l*b-h*M)-f*(u*b-c*M)+v*(u*h-c*l)),t[13]=e*(l*b-h*M)-f*(r*b-a*M)+v*(r*h-a*l),t[14]=-(e*(u*b-c*M)-i*(r*b-a*M)+v*(r*c-a*u)),t[15]=e*(u*h-c*l)-i*(r*h-a*l)+f*(r*c-a*u),t},n.determinant=function(t){var n=t[0],e=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],c=t[7],s=t[8],f=t[9],l=t[10],h=t[11],d=t[12],v=t[13],M=t[14],b=t[15];return(n*i-e*o)*(l*b-h*M)-(n*u-r*o)*(f*b-h*v)+(n*c-a*o)*(f*M-l*v)+(e*u-r*i)*(s*b-h*d)-(e*c-a*i)*(s*M-l*d)+(r*c-a*u)*(s*v-f*d)},n.multiply=r,n.translate=function(t,n,e){var r=e[0],a=e[1],o=e[2],i=void 0,u=void 0,c=void 0,s=void 0,f=void 0,l=void 0,h=void 0,d=void 0,v=void 0,M=void 0,b=void 0,m=void 0;return n===t?(t[12]=n[0]*r+n[4]*a+n[8]*o+n[12],t[13]=n[1]*r+n[5]*a+n[9]*o+n[13],t[14]=n[2]*r+n[6]*a+n[10]*o+n[14],t[15]=n[3]*r+n[7]*a+n[11]*o+n[15]):(i=n[0],u=n[1],c=n[2],s=n[3],f=n[4],l=n[5],h=n[6],d=n[7],v=n[8],M=n[9],b=n[10],m=n[11],t[0]=i,t[1]=u,t[2]=c,t[3]=s,t[4]=f,t[5]=l,t[6]=h,t[7]=d,t[8]=v,t[9]=M,t[10]=b,t[11]=m,t[12]=i*r+f*a+v*o+n[12],t[13]=u*r+l*a+M*o+n[13],t[14]=c*r+h*a+b*o+n[14],t[15]=s*r+d*a+m*o+n[15]),t},n.scale=function(t,n,e){var r=e[0],a=e[1],o=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},n.rotate=function(t,n,e,r){var a=r[0],i=r[1],u=r[2],c=Math.sqrt(a*a+i*i+u*u),s=void 0,f=void 0,l=void 0,h=void 0,d=void 0,v=void 0,M=void 0,b=void 0,m=void 0,p=void 0,g=void 0,y=void 0,_=void 0,P=void 0,x=void 0,E=void 0,O=void 0,w=void 0,A=void 0,R=void 0,S=void 0,T=void 0,I=void 0,L=void 0;return Math.abs(c)<o.EPSILON?null:(c=1/c,a*=c,i*=c,u*=c,s=Math.sin(e),f=Math.cos(e),l=1-f,h=n[0],d=n[1],v=n[2],M=n[3],b=n[4],m=n[5],p=n[6],g=n[7],y=n[8],_=n[9],P=n[10],x=n[11],E=a*a*l+f,O=i*a*l+u*s,w=u*a*l-i*s,A=a*i*l-u*s,R=i*i*l+f,S=u*i*l+a*s,T=a*u*l+i*s,I=i*u*l-a*s,L=u*u*l+f,t[0]=h*E+b*O+y*w,t[1]=d*E+m*O+_*w,t[2]=v*E+p*O+P*w,t[3]=M*E+g*O+x*w,t[4]=h*A+b*R+y*S,t[5]=d*A+m*R+_*S,t[6]=v*A+p*R+P*S,t[7]=M*A+g*R+x*S,t[8]=h*T+b*I+y*L,t[9]=d*T+m*I+_*L,t[10]=v*T+p*I+P*L,t[11]=M*T+g*I+x*L,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)},n.rotateX=function(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[4],i=n[5],u=n[6],c=n[7],s=n[8],f=n[9],l=n[10],h=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*a+s*r,t[5]=i*a+f*r,t[6]=u*a+l*r,t[7]=c*a+h*r,t[8]=s*a-o*r,t[9]=f*a-i*r,t[10]=l*a-u*r,t[11]=h*a-c*r,t},n.rotateY=function(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],i=n[1],u=n[2],c=n[3],s=n[8],f=n[9],l=n[10],h=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a-s*r,t[1]=i*a-f*r,t[2]=u*a-l*r,t[3]=c*a-h*r,t[8]=o*r+s*a,t[9]=i*r+f*a,t[10]=u*r+l*a,t[11]=c*r+h*a,t},n.rotateZ=function(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],i=n[1],u=n[2],c=n[3],s=n[4],f=n[5],l=n[6],h=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a+s*r,t[1]=i*a+f*r,t[2]=u*a+l*r,t[3]=c*a+h*r,t[4]=s*a-o*r,t[5]=f*a-i*r,t[6]=l*a-u*r,t[7]=h*a-c*r,t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotation=function(t,n,e){var r=e[0],a=e[1],i=e[2],u=Math.sqrt(r*r+a*a+i*i),c=void 0,s=void 0,f=void 0;return Math.abs(u)<o.EPSILON?null:(u=1/u,r*=u,a*=u,i*=u,c=Math.sin(n),s=Math.cos(n),f=1-s,t[0]=r*r*f+s,t[1]=a*r*f+i*c,t[2]=i*r*f-a*c,t[3]=0,t[4]=r*a*f-i*c,t[5]=a*a*f+s,t[6]=i*a*f+r*c,t[7]=0,t[8]=r*i*f+a*c,t[9]=a*i*f-r*c,t[10]=i*i*f+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},n.fromXRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromYRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromZRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotationTranslation=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=r+r,c=a+a,s=o+o,f=r*u,l=r*c,h=r*s,d=a*c,v=a*s,M=o*s,b=i*u,m=i*c,p=i*s;return t[0]=1-(d+M),t[1]=l+p,t[2]=h-m,t[3]=0,t[4]=l-p,t[5]=1-(f+M),t[6]=v+b,t[7]=0,t[8]=h+m,t[9]=v-b,t[10]=1-(f+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.getTranslation=function(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t},n.getScaling=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[4],i=n[5],u=n[6],c=n[8],s=n[9],f=n[10];return t[0]=Math.sqrt(e*e+r*r+a*a),t[1]=Math.sqrt(o*o+i*i+u*u),t[2]=Math.sqrt(c*c+s*s+f*f),t},n.getRotation=function(t,n){var e=n[0]+n[5]+n[10],r=0;return e>0?(r=2*Math.sqrt(e+1),t[3]=.25*r,t[0]=(n[6]-n[9])/r,t[1]=(n[8]-n[2])/r,t[2]=(n[1]-n[4])/r):n[0]>n[5]&n[0]>n[10]?(r=2*Math.sqrt(1+n[0]-n[5]-n[10]),t[3]=(n[6]-n[9])/r,t[0]=.25*r,t[1]=(n[1]+n[4])/r,t[2]=(n[8]+n[2])/r):n[5]>n[10]?(r=2*Math.sqrt(1+n[5]-n[0]-n[10]),t[3]=(n[8]-n[2])/r,t[0]=(n[1]+n[4])/r,t[1]=.25*r,t[2]=(n[6]+n[9])/r):(r=2*Math.sqrt(1+n[10]-n[0]-n[5]),t[3]=(n[1]-n[4])/r,t[0]=(n[8]+n[2])/r,t[1]=(n[6]+n[9])/r,t[2]=.25*r),t},n.fromRotationTranslationScale=function(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=n[3],c=a+a,s=o+o,f=i+i,l=a*c,h=a*s,d=a*f,v=o*s,M=o*f,b=i*f,m=u*c,p=u*s,g=u*f,y=r[0],_=r[1],P=r[2];return t[0]=(1-(v+b))*y,t[1]=(h+g)*y,t[2]=(d-p)*y,t[3]=0,t[4]=(h-g)*_,t[5]=(1-(l+b))*_,t[6]=(M+m)*_,t[7]=0,t[8]=(d+p)*P,t[9]=(M-m)*P,t[10]=(1-(l+v))*P,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.fromRotationTranslationScaleOrigin=function(t,n,e,r,a){var o=n[0],i=n[1],u=n[2],c=n[3],s=o+o,f=i+i,l=u+u,h=o*s,d=o*f,v=o*l,M=i*f,b=i*l,m=u*l,p=c*s,g=c*f,y=c*l,_=r[0],P=r[1],x=r[2],E=a[0],O=a[1],w=a[2];return t[0]=(1-(M+m))*_,t[1]=(d+y)*_,t[2]=(v-g)*_,t[3]=0,t[4]=(d-y)*P,t[5]=(1-(h+m))*P,t[6]=(b+p)*P,t[7]=0,t[8]=(v+g)*x,t[9]=(b-p)*x,t[10]=(1-(h+M))*x,t[11]=0,t[12]=e[0]+E-(t[0]*E+t[4]*O+t[8]*w),t[13]=e[1]+O-(t[1]*E+t[5]*O+t[9]*w),t[14]=e[2]+w-(t[2]*E+t[6]*O+t[10]*w),t[15]=1,t},n.fromQuat=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e+e,u=r+r,c=a+a,s=e*i,f=r*i,l=r*u,h=a*i,d=a*u,v=a*c,M=o*i,b=o*u,m=o*c;return t[0]=1-l-v,t[1]=f+m,t[2]=h-b,t[3]=0,t[4]=f-m,t[5]=1-s-v,t[6]=d+M,t[7]=0,t[8]=h+b,t[9]=d-M,t[10]=1-s-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.frustum=function(t,n,e,r,a,o,i){var u=1/(e-n),c=1/(a-r),s=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(e+n)*u,t[9]=(a+r)*c,t[10]=(i+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*s,t[15]=0,t},n.perspective=function(t,n,e,r,a){var o=1/Math.tan(n/2),i=1/(r-a);return t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*i,t[15]=0,t},n.perspectiveFromFieldOfView=function(t,n,e,r){var a=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),i=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),c=2/(i+u),s=2/(a+o);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(i-u)*c*.5,t[9]=(a-o)*s*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t},n.ortho=function(t,n,e,r,a,o,i){var u=1/(n-e),c=1/(r-a),s=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(n+e)*u,t[13]=(a+r)*c,t[14]=(i+o)*s,t[15]=1,t},n.lookAt=function(t,n,e,r){var a=void 0,i=void 0,u=void 0,c=void 0,s=void 0,f=void 0,l=void 0,h=void 0,d=void 0,v=void 0,M=n[0],b=n[1],m=n[2],p=r[0],g=r[1],y=r[2],_=e[0],P=e[1],x=e[2];return Math.abs(M-_)<o.EPSILON&&Math.abs(b-P)<o.EPSILON&&Math.abs(m-x)<o.EPSILON?mat4.identity(t):(l=M-_,h=b-P,d=m-x,v=1/Math.sqrt(l*l+h*h+d*d),l*=v,h*=v,d*=v,a=g*d-y*h,i=y*l-p*d,u=p*h-g*l,(v=Math.sqrt(a*a+i*i+u*u))?(a*=v=1/v,i*=v,u*=v):(a=0,i=0,u=0),c=h*u-d*i,s=d*a-l*u,f=l*i-h*a,(v=Math.sqrt(c*c+s*s+f*f))?(c*=v=1/v,s*=v,f*=v):(c=0,s=0,f=0),t[0]=a,t[1]=c,t[2]=l,t[3]=0,t[4]=i,t[5]=s,t[6]=h,t[7]=0,t[8]=u,t[9]=f,t[10]=d,t[11]=0,t[12]=-(a*M+i*b+u*m),t[13]=-(c*M+s*b+f*m),t[14]=-(l*M+h*b+d*m),t[15]=1,t)},n.targetTo=function(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=r[0],c=r[1],s=r[2],f=a-e[0],l=o-e[1],h=i-e[2],d=f*f+l*l+h*h;d>0&&(f*=d=1/Math.sqrt(d),l*=d,h*=d);var v=c*h-s*l,M=s*f-u*h,b=u*l-c*f;return t[0]=v,t[1]=M,t[2]=b,t[3]=0,t[4]=l*b-h*M,t[5]=h*v-f*b,t[6]=f*M-l*v,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t},n.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t},n.subtract=a,n.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t},n.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],i=t[3],u=t[4],c=t[5],s=t[6],f=t[7],l=t[8],h=t[9],d=t[10],v=t[11],M=t[12],b=t[13],m=t[14],p=t[15],g=n[0],y=n[1],_=n[2],P=n[3],x=n[4],E=n[5],O=n[6],w=n[7],A=n[8],R=n[9],S=n[10],T=n[11],I=n[12],L=n[13],N=n[14],q=n[15];return Math.abs(e-g)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(r-y)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(a-_)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(i-P)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(P))&&Math.abs(u-x)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(c-E)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(s-O)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(O))&&Math.abs(f-w)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(l-A)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(h-R)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(d-S)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(v-T)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(M-I)<=o.EPSILON*Math.max(1,Math.abs(M),Math.abs(I))&&Math.abs(b-L)<=o.EPSILON*Math.max(1,Math.abs(b),Math.abs(L))&&Math.abs(m-N)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(p-q)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(q))};var o=e(0),i=r;n.mul=i;var u=a;n.sub=u},function(t,n,e){function r(){var t=new c.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function a(t,n,e){e*=.5;var r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t}function o(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=e[0],c=e[1],s=e[2],f=e[3];return t[0]=r*f+i*u+a*s-o*c,t[1]=a*f+i*c+o*u-r*s,t[2]=o*f+i*s+r*c-a*u,t[3]=i*f-r*u-a*c-o*s,t}function i(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=n[3],c=e[0],s=e[1],f=e[2],l=e[3],h=void 0,d=void 0,v=void 0,M=void 0,b=void 0;return(d=a*c+o*s+i*f+u*l)<0&&(d=-d,c=-c,s=-s,f=-f,l=-l),1-d>1e-6?(h=Math.acos(d),v=Math.sin(h),M=Math.sin((1-r)*h)/v,b=Math.sin(r*h)/v):(M=1-r,b=r),t[0]=M*a+b*c,t[1]=M*o+b*s,t[2]=M*i+b*f,t[3]=M*u+b*l,t}function u(t,n){var e=n[0]+n[4]+n[8],r=void 0;if(e>0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{var a=0;n[4]>n[0]&&(a=1),n[8]>n[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;r=Math.sqrt(n[3*a+a]-n[3*o+o]-n[3*i+i]+1),t[a]=.5*r,r=.5/r,t[3]=(n[3*o+i]-n[3*i+o])*r,t[o]=(n[3*o+a]+n[3*a+o])*r,t[i]=(n[3*i+a]+n[3*a+i])*r}return t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},n.setAxisAngle=a,n.getAxisAngle=function(t,n){var e=2*Math.acos(n[3]),r=Math.sin(e/2);return 0!=r?(t[0]=n[0]/r,t[1]=n[1]/r,t[2]=n[2]/r):(t[0]=1,t[1]=0,t[2]=0),e},n.multiply=o,n.rotateX=function(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),c=Math.cos(e);return t[0]=r*c+i*u,t[1]=a*c+o*u,t[2]=o*c-a*u,t[3]=i*c-r*u,t},n.rotateY=function(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),c=Math.cos(e);return t[0]=r*c-o*u,t[1]=a*c+i*u,t[2]=o*c+r*u,t[3]=i*c-a*u,t},n.rotateZ=function(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),c=Math.cos(e);return t[0]=r*c+a*u,t[1]=a*c-r*u,t[2]=o*c+i*u,t[3]=i*c-o*u,t},n.calculateW=function(t,n){var e=n[0],r=n[1],a=n[2];return t[0]=e,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-r*r-a*a)),t},n.slerp=i,n.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e*e+r*r+a*a+o*o,u=i?1/i:0;return t[0]=-e*u,t[1]=-r*u,t[2]=-a*u,t[3]=o*u,t},n.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},n.fromMat3=u,n.fromEuler=function(t,n,e,r){var a=.5*Math.PI/180;n*=a,e*=a,r*=a;var o=Math.sin(n),i=Math.cos(n),u=Math.sin(e),c=Math.cos(e),s=Math.sin(r),f=Math.cos(r);return t[0]=o*c*f-i*u*s,t[1]=i*u*f+o*c*s,t[2]=i*c*s-o*u*f,t[3]=i*c*f+o*u*s,t},n.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var c=e(0),s=e(4),f=e(5),l=e(6),h=l.clone;n.clone=h;var d=l.fromValues;n.fromValues=d;var v=l.copy;n.copy=v;var M=l.set;n.set=M;var b=l.add;n.add=b;var m=o;n.mul=m;var p=l.scale;n.scale=p;var g=l.dot;n.dot=g;var y=l.lerp;n.lerp=y;var _=l.length;n.length=_;var P=_;n.len=P;var x=l.squaredLength;n.squaredLength=x;var E=x;n.sqrLen=E;var O=l.normalize;n.normalize=O;var w=l.exactEquals;n.exactEquals=w;var A=l.equals;n.equals=A;var R=function(){var t=f.create(),n=f.fromValues(1,0,0),e=f.fromValues(0,1,0);return function(r,o,i){var u=f.dot(o,i);return u<-.999999?(f.cross(t,n,o),f.len(t)<1e-6&&f.cross(t,e,o),f.normalize(t,t),a(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(f.cross(t,o,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,O(r,r))}}();n.rotationTo=R;var S=function(){var t=r(),n=r();return function(e,r,a,o,u,c){return i(t,r,u,c),i(n,a,o,c),i(e,t,n,2*c*(1-c)),e}}();n.sqlerp=S;var T=function(){var t=s.create();return function(n,e,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],O(n,u(n,t))}}();n.setAxes=T},function(t,n,e){function r(){var t=new l.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t}function o(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t}function i(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t}function u(t,n){var e=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(e*e+r*r)}function c(t,n){var e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r}function s(t){var n=t[0],e=t[1];return Math.sqrt(n*n+e*e)}function f(t){var n=t[0],e=t[1];return n*n+e*e}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(t){var n=new l.ARRAY_TYPE(2);return n[0]=t[0],n[1]=t[1],n},n.fromValues=function(t,n){var e=new l.ARRAY_TYPE(2);return e[0]=t,e[1]=n,e},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t},n.set=function(t,n,e){return t[0]=n,t[1]=e,t},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t},n.subtract=a,n.multiply=o,n.divide=i,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t},n.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t},n.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t},n.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t},n.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t},n.distance=u,n.squaredDistance=c,n.length=s,n.squaredLength=f,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t},n.normalize=function(t,n){var e=n[0],r=n[1],a=e*e+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=n[0]*a,t[1]=n[1]*a),t},n.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},n.cross=function(t,n,e){var r=n[0]*e[1]-n[1]*e[0];return t[0]=t[1]=0,t[2]=r,t},n.lerp=function(t,n,e,r){var a=n[0],o=n[1];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t},n.random=function(t,n){n=n||1;var e=2*l.RANDOM()*Math.PI;return t[0]=Math.cos(e)*n,t[1]=Math.sin(e)*n,t},n.transformMat2=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[2]*a,t[1]=e[1]*r+e[3]*a,t},n.transformMat2d=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[2]*a+e[4],t[1]=e[1]*r+e[3]*a+e[5],t},n.transformMat3=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[3]*a+e[6],t[1]=e[1]*r+e[4]*a+e[7],t},n.transformMat4=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[4]*a+e[12],t[1]=e[1]*r+e[5]*a+e[13],t},n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]},n.equals=function(t,n){var e=t[0],r=t[1],a=n[0],o=n[1];return Math.abs(e-a)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(r-o)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))};var l=e(0),h=s;n.len=h;var d=a;n.sub=d;var v=o;n.mul=v;var M=i;n.div=M;var b=u;n.dist=b;var m=c;n.sqrDist=m;var p=f;n.sqrLen=p;var g=function(){var t=r();return function(n,e,r,a,o,i){var u=void 0,c=void 0;for(e||(e=2),r||(r=0),c=a?Math.min(a*e+r,n.length):n.length,u=r;u<c;u+=e)t[0]=n[u],t[1]=n[u+1],o(t,t,i),n[u]=t[0],n[u+1]=t[1];return n}}();n.forEach=g},function(t,n,e){function r(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":o(n))&&"function"!=typeof n?t:n}Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(e(1)),i=function(t){function n(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var o=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,a));return e=o.geometry,r(o,e)}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":o(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,a.default),n}();n.default=i},function(t,n,e){function r(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":o(n))&&"function"!=typeof n?t:n}Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(e(1)),i=function(t){function n(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],i=0;i<o.length;i+=3)o[i+0]*=t,o[i+1]*=t,o[i+2]*=t;var u=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,o,[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],t,a));return e=u.geometry,r(u,e)}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":o(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,a.default),n}();n.default=i},function(t,n,e){function r(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":o(n))&&"function"!=typeof n?t:n}Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(e(1)),i=function(t){function n(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var o=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,a));return e=o.geometry,r(o,e)}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":o(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,a.default),n}();n.default=i},function(t,n,e){function r(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":o(n))&&"function"!=typeof n?t:n}Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(e(1)),i=function(t){function n(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var o=(1+Math.sqrt(5))/2,i=1/o,u=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-o,0,-i,o,0,i,-o,0,i,o,-i,-o,0,-i,o,0,i,-o,0,i,o,0,-o,0,-i,o,0,-i,-o,0,i,o,0,i],c=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,u,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,a));return e=c.geometry,r(c,e)}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":o(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,a.default),n}();n.default=i},function(t,n,e){function r(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":o(n))&&"function"!=typeof n?t:n}Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(e(1)),i=function(t){function n(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var o=.5+Math.sqrt(5)/2,i=[-1,+o,0,1,+o,0,-1,-o,0,1,-o,0,0,-1,+o,0,1,+o,0,-1,-o,0,1,-o,+o,0,-1,+o,0,1,-o,0,-1,-o,0,1],u=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,a));return e=u.geometry,r(u,e)}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":o(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,a.default),n}();n.default=i},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});n.default=function t(n,e){!function(n,e){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var r=[];return r.push(n[0]||0,n[1]||0,n[2]||0),r.push(e[0]||0,e[1]||0,e[2]||0),{positions:r,indices:[]}}},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});n.default=function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"XY";!function(n,e){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var i=[],u=[],c=[],s=[],f=0,l=2*n,h=2*e,d=l/r,v=h/a,M=.5*-l,b=.5*-h,m=1/r,p=1/a,g=0;g<a;g++)for(var y=0;y<r;y++){var _=d*y+M,P=v*g+b,x=y/r,E=g/a;switch(o){case"XZ":i=(i=(i=(i=i.concat([_,0,P])).concat([_+d,0,P])).concat([_+d,0,P+v])).concat([_,0,P+v]),c=(c=(c=(c=c.concat([0,1,0])).concat([0,1,0])).concat([0,1,0])).concat([0,1,0]),s=(s=(s=(s=s.concat([x,1-E])).concat([x+m,1-E])).concat([x+m,1-(E+p)])).concat([x,1-(E+p)]);break;case"YZ":i=(i=(i=(i=i.concat([0,P,_])).concat([0,P,_+d])).concat([0,P+v,_+d])).concat([0,P+v,_]),c=(c=(c=(c=c.concat([1,0,0])).concat([1,0,0])).concat([1,0,0])).concat([1,0,0]),s=(s=(s=(s=s.concat([1-x,E])).concat([1-(x+m),E])).concat([1-(x+m),E+p])).concat([1-x,E+p]);break;default:i=(i=(i=(i=i.concat([_,P,0])).concat([_+d,P,0])).concat([_+d,P+v,0])).concat([_,P+v,0]),c=(c=(c=(c=c.concat([0,0,1])).concat([0,0,1])).concat([0,0,1])).concat([0,0,1]),s=(s=(s=(s=s.concat([x,E])).concat([x+m,E])).concat([x+m,E+p])).concat([x,E+p])}u.push(4*f+0),u.push(4*f+1),u.push(4*f+2),u.push(4*f+0),u.push(4*f+2),u.push(4*f+3),f++}return{positions:i,indices:u,normals:c,uvs:s}}},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0});n.default=function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;!function(n,e){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var a=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],o=0;o<a.length;o+=3)a[o+0]*=n,a[o+1]*=e,a[o+2]*=r;return{positions:a,indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],normals:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],uvs:[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]}}},function(t,n,e){function r(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),o=e(3),i=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=[],f=[],l=[],h=[],d=o.vec3.create(),v=o.vec3.create(),M=o.vec3.create(),b=o.vec3.create(),m=o.vec3.create(),p=o.vec3.create(),g=o.vec3.create(),y=0;y<=a;y++){var _=y/a*u*Math.PI*2;this.calculatePositionOnCurve(_,u,c,n,M),this.calculatePositionOnCurve(_+.01,u,c,n,b),o.vec3.subtract(p,b,M),o.vec3.add(g,b,M),o.vec3.cross(m,p,g),o.vec3.cross(g,m,p),o.vec3.normalize(m,m),o.vec3.normalize(g,g);for(var P=0;P<=i;P++){var x=P/i*Math.PI*2,E=-e*Math.cos(x),O=e*Math.sin(x);d[0]=M[0]+(E*g[0]+O*m[0]),d[1]=M[1]+(E*g[1]+O*m[1]),d[2]=M[2]+(E*g[2]+O*m[2]),s.push.apply(s,r(d)),o.vec3.subtract(v,d,M),o.vec3.normalize(v,v),l.push.apply(l,r(v)),h.push(y/a,P/i)}}for(var w=1;w<=a;w++)for(var A=1;A<=i;A++){var R=(i+1)*(w-1)+(A-1),S=(i+1)*w+(A-1),T=(i+1)*w+A,I=(i+1)*(w-1)+A;f.push(R,S,I),f.push(S,T,I)}return{positions:s,indices:f,normals:l,uvs:h}}return a(t,[{key:"calculatePositionOnCurve",value:function(t,n,e,r,a){var o=Math.cos(t),i=Math.sin(t),u=e/n*t,c=Math.cos(u);a[0]=r*(2+c)*.5*o,a[1]=r*(2+c)*i*.5,a[2]=r*Math.sin(u)*.5}}]),t}();n.default=i}])})}).call(n,e(1)(t))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(0),a=e(9),o=e(10),i=e(3),u=e(11),c=e(12),s=e(13),f=e(4),l=e(5);e.d(n,"glMatrix",function(){return r}),e.d(n,"mat2",function(){return a}),e.d(n,"mat2d",function(){return o}),e.d(n,"mat3",function(){return i}),e.d(n,"mat4",function(){return u}),e.d(n,"quat",function(){return c}),e.d(n,"vec2",function(){return s}),e.d(n,"vec3",function(){return f}),e.d(n,"vec4",function(){return l})},function(t,n,e){"use strict";function r(t,n,e){let r=n[0],a=n[1],o=n[2],i=n[3],u=e[0],c=e[1],s=e[2],f=e[3];return t[0]=r*u+o*c,t[1]=a*u+i*c,t[2]=r*s+o*f,t[3]=a*s+i*f,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){let t=new o.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.clone=function(t){let n=new o.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.fromValues=function(t,n,e,r){let a=new o.ARRAY_TYPE(4);return a[0]=t,a[1]=n,a[2]=e,a[3]=r,a},n.set=function(t,n,e,r,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t},n.transpose=function(t,n){if(t===n){let e=n[1];t[1]=n[2],t[2]=e}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},n.invert=function(t,n){let e=n[0],r=n[1],a=n[2],o=n[3],i=e*o-a*r;return i?(i=1/i,t[0]=o*i,t[1]=-r*i,t[2]=-a*i,t[3]=e*i,t):null},n.adjoint=function(t,n){let e=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=e,t},n.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},n.multiply=r,n.rotate=function(t,n,e){let r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),c=Math.cos(e);return t[0]=r*c+o*u,t[1]=a*c+i*u,t[2]=r*-u+o*c,t[3]=a*-u+i*c,t},n.scale=function(t,n,e){let r=n[0],a=n[1],o=n[2],i=n[3],u=e[0],c=e[1];return t[0]=r*u,t[1]=a*u,t[2]=o*c,t[3]=i*c,t},n.fromRotation=function(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t},n.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},n.LDU=function(t,n,e,r){return t[2]=r[2]/r[0],e[0]=r[0],e[1]=r[1],e[3]=r[3]-t[2]*e[1],[t,n,e]},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},n.subtract=a,n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},n.equals=function(t,n){let e=t[0],r=t[1],a=t[2],i=t[3],u=n[0],c=n[1],s=n[2],f=n[3];return Math.abs(e-u)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(r-c)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-s)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-f)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))},n.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t},n.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t};var o=e(0);const i=r;n.mul=i;const u=a;n.sub=u},function(t,n,e){"use strict";function r(t,n,e){let r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=e[0],f=e[1],l=e[2],h=e[3],d=e[4],v=e[5];return t[0]=r*s+o*f,t[1]=a*s+i*f,t[2]=r*l+o*h,t[3]=a*l+i*h,t[4]=r*d+o*v+u,t[5]=a*d+i*v+c,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){let t=new o.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.clone=function(t){let n=new o.ARRAY_TYPE(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.fromValues=function(t,n,e,r,a,i){let u=new o.ARRAY_TYPE(6);return u[0]=t,u[1]=n,u[2]=e,u[3]=r,u[4]=a,u[5]=i,u},n.set=function(t,n,e,r,a,o,i){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t},n.invert=function(t,n){let e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=e*o-r*a;return c?(c=1/c,t[0]=o*c,t[1]=-r*c,t[2]=-a*c,t[3]=e*c,t[4]=(a*u-o*i)*c,t[5]=(r*i-e*u)*c,t):null},n.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},n.multiply=r,n.rotate=function(t,n,e){let r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=Math.sin(e),f=Math.cos(e);return t[0]=r*f+o*s,t[1]=a*f+i*s,t[2]=r*-s+o*f,t[3]=a*-s+i*f,t[4]=u,t[5]=c,t},n.scale=function(t,n,e){let r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=e[0],f=e[1];return t[0]=r*s,t[1]=a*s,t[2]=o*f,t[3]=i*f,t[4]=u,t[5]=c,t},n.translate=function(t,n,e){let r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=e[0],f=e[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=r*s+o*f+u,t[5]=a*s+i*f+c,t},n.fromRotation=function(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t[4]=0,t[5]=0,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t},n.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t},n.subtract=a,n.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t},n.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]},n.equals=function(t,n){let e=t[0],r=t[1],a=t[2],i=t[3],u=t[4],c=t[5],s=n[0],f=n[1],l=n[2],h=n[3],d=n[4],v=n[5];return Math.abs(e-s)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(r-f)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(a-l)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-h)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-d)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(c-v)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))};var o=e(0);const i=r;n.mul=i;const u=a;n.sub=u},function(t,n,e){"use strict";function r(t,n,e){let r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],h=n[9],d=n[10],v=n[11],M=n[12],b=n[13],m=n[14],p=n[15],g=e[0],y=e[1],_=e[2],P=e[3];return t[0]=g*r+y*u+_*l+P*M,t[1]=g*a+y*c+_*h+P*b,t[2]=g*o+y*s+_*d+P*m,t[3]=g*i+y*f+_*v+P*p,g=e[4],y=e[5],_=e[6],P=e[7],t[4]=g*r+y*u+_*l+P*M,t[5]=g*a+y*c+_*h+P*b,t[6]=g*o+y*s+_*d+P*m,t[7]=g*i+y*f+_*v+P*p,g=e[8],y=e[9],_=e[10],P=e[11],t[8]=g*r+y*u+_*l+P*M,t[9]=g*a+y*c+_*h+P*b,t[10]=g*o+y*s+_*d+P*m,t[11]=g*i+y*f+_*v+P*p,g=e[12],y=e[13],_=e[14],P=e[15],t[12]=g*r+y*u+_*l+P*M,t[13]=g*a+y*c+_*h+P*b,t[14]=g*o+y*s+_*d+P*m,t[15]=g*i+y*f+_*v+P*p,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){let t=new o.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.clone=function(t){let n=new o.ARRAY_TYPE(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},n.fromValues=function(t,n,e,r,a,i,u,c,s,f,l,h,d,v,M,b){let m=new o.ARRAY_TYPE(16);return m[0]=t,m[1]=n,m[2]=e,m[3]=r,m[4]=a,m[5]=i,m[6]=u,m[7]=c,m[8]=s,m[9]=f,m[10]=l,m[11]=h,m[12]=d,m[13]=v,m[14]=M,m[15]=b,m},n.set=function(t,n,e,r,a,o,i,u,c,s,f,l,h,d,v,M,b){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=c,t[8]=s,t[9]=f,t[10]=l,t[11]=h,t[12]=d,t[13]=v,t[14]=M,t[15]=b,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.transpose=function(t,n){if(t===n){let e=n[1],r=n[2],a=n[3],o=n[6],i=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=o,t[11]=n[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},n.invert=function(t,n){let e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=n[9],h=n[10],d=n[11],v=n[12],M=n[13],b=n[14],m=n[15],p=e*u-r*i,g=e*c-a*i,y=e*s-o*i,_=r*c-a*u,P=r*s-o*u,x=a*s-o*c,E=f*M-l*v,O=f*b-h*v,w=f*m-d*v,A=l*b-h*M,R=l*m-d*M,S=h*m-d*b,T=p*S-g*R+y*A+_*w-P*O+x*E;return T?(T=1/T,t[0]=(u*S-c*R+s*A)*T,t[1]=(a*R-r*S-o*A)*T,t[2]=(M*x-b*P+m*_)*T,t[3]=(h*P-l*x-d*_)*T,t[4]=(c*w-i*S-s*O)*T,t[5]=(e*S-a*w+o*O)*T,t[6]=(b*y-v*x-m*g)*T,t[7]=(f*x-h*y+d*g)*T,t[8]=(i*R-u*w+s*E)*T,t[9]=(r*w-e*R-o*E)*T,t[10]=(v*P-M*y+m*p)*T,t[11]=(l*y-f*P-d*p)*T,t[12]=(u*O-i*A-c*E)*T,t[13]=(e*A-r*O+a*E)*T,t[14]=(M*g-v*_-b*p)*T,t[15]=(f*_-l*g+h*p)*T,t):null},n.adjoint=function(t,n){let e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=n[9],h=n[10],d=n[11],v=n[12],M=n[13],b=n[14],m=n[15];return t[0]=u*(h*m-d*b)-l*(c*m-s*b)+M*(c*d-s*h),t[1]=-(r*(h*m-d*b)-l*(a*m-o*b)+M*(a*d-o*h)),t[2]=r*(c*m-s*b)-u*(a*m-o*b)+M*(a*s-o*c),t[3]=-(r*(c*d-s*h)-u*(a*d-o*h)+l*(a*s-o*c)),t[4]=-(i*(h*m-d*b)-f*(c*m-s*b)+v*(c*d-s*h)),t[5]=e*(h*m-d*b)-f*(a*m-o*b)+v*(a*d-o*h),t[6]=-(e*(c*m-s*b)-i*(a*m-o*b)+v*(a*s-o*c)),t[7]=e*(c*d-s*h)-i*(a*d-o*h)+f*(a*s-o*c),t[8]=i*(l*m-d*M)-f*(u*m-s*M)+v*(u*d-s*l),t[9]=-(e*(l*m-d*M)-f*(r*m-o*M)+v*(r*d-o*l)),t[10]=e*(u*m-s*M)-i*(r*m-o*M)+v*(r*s-o*u),t[11]=-(e*(u*d-s*l)-i*(r*d-o*l)+f*(r*s-o*u)),t[12]=-(i*(l*b-h*M)-f*(u*b-c*M)+v*(u*h-c*l)),t[13]=e*(l*b-h*M)-f*(r*b-a*M)+v*(r*h-a*l),t[14]=-(e*(u*b-c*M)-i*(r*b-a*M)+v*(r*c-a*u)),t[15]=e*(u*h-c*l)-i*(r*h-a*l)+f*(r*c-a*u),t},n.determinant=function(t){let n=t[0],e=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],c=t[7],s=t[8],f=t[9],l=t[10],h=t[11],d=t[12],v=t[13],M=t[14],b=t[15];return(n*i-e*o)*(l*b-h*M)-(n*u-r*o)*(f*b-h*v)+(n*c-a*o)*(f*M-l*v)+(e*u-r*i)*(s*b-h*d)-(e*c-a*i)*(s*M-l*d)+(r*c-a*u)*(s*v-f*d)},n.multiply=r,n.translate=function(t,n,e){let r,a,o,i,u,c,s,f,l,h,d,v,M=e[0],b=e[1],m=e[2];return n===t?(t[12]=n[0]*M+n[4]*b+n[8]*m+n[12],t[13]=n[1]*M+n[5]*b+n[9]*m+n[13],t[14]=n[2]*M+n[6]*b+n[10]*m+n[14],t[15]=n[3]*M+n[7]*b+n[11]*m+n[15]):(r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],h=n[9],d=n[10],v=n[11],t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=c,t[6]=s,t[7]=f,t[8]=l,t[9]=h,t[10]=d,t[11]=v,t[12]=r*M+u*b+l*m+n[12],t[13]=a*M+c*b+h*m+n[13],t[14]=o*M+s*b+d*m+n[14],t[15]=i*M+f*b+v*m+n[15]),t},n.scale=function(t,n,e){let r=e[0],a=e[1],o=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},n.rotate=function(t,n,e,r){let a,i,u,c,s,f,l,h,d,v,M,b,m,p,g,y,_,P,x,E,O,w,A,R,S=r[0],T=r[1],I=r[2],L=Math.sqrt(S*S+T*T+I*I);return Math.abs(L)<o.EPSILON?null:(L=1/L,S*=L,T*=L,I*=L,a=Math.sin(e),i=Math.cos(e),u=1-i,c=n[0],s=n[1],f=n[2],l=n[3],h=n[4],d=n[5],v=n[6],M=n[7],b=n[8],m=n[9],p=n[10],g=n[11],y=S*S*u+i,_=T*S*u+I*a,P=I*S*u-T*a,x=S*T*u-I*a,E=T*T*u+i,O=I*T*u+S*a,w=S*I*u+T*a,A=T*I*u-S*a,R=I*I*u+i,t[0]=c*y+h*_+b*P,t[1]=s*y+d*_+m*P,t[2]=f*y+v*_+p*P,t[3]=l*y+M*_+g*P,t[4]=c*x+h*E+b*O,t[5]=s*x+d*E+m*O,t[6]=f*x+v*E+p*O,t[7]=l*x+M*E+g*O,t[8]=c*w+h*A+b*R,t[9]=s*w+d*A+m*R,t[10]=f*w+v*A+p*R,t[11]=l*w+M*A+g*R,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)},n.rotateX=function(t,n,e){let r=Math.sin(e),a=Math.cos(e),o=n[4],i=n[5],u=n[6],c=n[7],s=n[8],f=n[9],l=n[10],h=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*a+s*r,t[5]=i*a+f*r,t[6]=u*a+l*r,t[7]=c*a+h*r,t[8]=s*a-o*r,t[9]=f*a-i*r,t[10]=l*a-u*r,t[11]=h*a-c*r,t},n.rotateY=function(t,n,e){let r=Math.sin(e),a=Math.cos(e),o=n[0],i=n[1],u=n[2],c=n[3],s=n[8],f=n[9],l=n[10],h=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a-s*r,t[1]=i*a-f*r,t[2]=u*a-l*r,t[3]=c*a-h*r,t[8]=o*r+s*a,t[9]=i*r+f*a,t[10]=u*r+l*a,t[11]=c*r+h*a,t},n.rotateZ=function(t,n,e){let r=Math.sin(e),a=Math.cos(e),o=n[0],i=n[1],u=n[2],c=n[3],s=n[4],f=n[5],l=n[6],h=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a+s*r,t[1]=i*a+f*r,t[2]=u*a+l*r,t[3]=c*a+h*r,t[4]=s*a-o*r,t[5]=f*a-i*r,t[6]=l*a-u*r,t[7]=h*a-c*r,t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotation=function(t,n,e){let r,a,i,u=e[0],c=e[1],s=e[2],f=Math.sqrt(u*u+c*c+s*s);return Math.abs(f)<o.EPSILON?null:(f=1/f,u*=f,c*=f,s*=f,r=Math.sin(n),a=Math.cos(n),i=1-a,t[0]=u*u*i+a,t[1]=c*u*i+s*r,t[2]=s*u*i-c*r,t[3]=0,t[4]=u*c*i-s*r,t[5]=c*c*i+a,t[6]=s*c*i+u*r,t[7]=0,t[8]=u*s*i+c*r,t[9]=c*s*i-u*r,t[10]=s*s*i+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},n.fromXRotation=function(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromYRotation=function(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromZRotation=function(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotationTranslation=function(t,n,e){let r=n[0],a=n[1],o=n[2],i=n[3],u=r+r,c=a+a,s=o+o,f=r*u,l=r*c,h=r*s,d=a*c,v=a*s,M=o*s,b=i*u,m=i*c,p=i*s;return t[0]=1-(d+M),t[1]=l+p,t[2]=h-m,t[3]=0,t[4]=l-p,t[5]=1-(f+M),t[6]=v+b,t[7]=0,t[8]=h+m,t[9]=v-b,t[10]=1-(f+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.getTranslation=function(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t},n.getScaling=function(t,n){let e=n[0],r=n[1],a=n[2],o=n[4],i=n[5],u=n[6],c=n[8],s=n[9],f=n[10];return t[0]=Math.sqrt(e*e+r*r+a*a),t[1]=Math.sqrt(o*o+i*i+u*u),t[2]=Math.sqrt(c*c+s*s+f*f),t},n.getRotation=function(t,n){let e=n[0]+n[5]+n[10],r=0;return e>0?(r=2*Math.sqrt(e+1),t[3]=.25*r,t[0]=(n[6]-n[9])/r,t[1]=(n[8]-n[2])/r,t[2]=(n[1]-n[4])/r):n[0]>n[5]&n[0]>n[10]?(r=2*Math.sqrt(1+n[0]-n[5]-n[10]),t[3]=(n[6]-n[9])/r,t[0]=.25*r,t[1]=(n[1]+n[4])/r,t[2]=(n[8]+n[2])/r):n[5]>n[10]?(r=2*Math.sqrt(1+n[5]-n[0]-n[10]),t[3]=(n[8]-n[2])/r,t[0]=(n[1]+n[4])/r,t[1]=.25*r,t[2]=(n[6]+n[9])/r):(r=2*Math.sqrt(1+n[10]-n[0]-n[5]),t[3]=(n[1]-n[4])/r,t[0]=(n[8]+n[2])/r,t[1]=(n[6]+n[9])/r,t[2]=.25*r),t},n.fromRotationTranslationScale=function(t,n,e,r){let a=n[0],o=n[1],i=n[2],u=n[3],c=a+a,s=o+o,f=i+i,l=a*c,h=a*s,d=a*f,v=o*s,M=o*f,b=i*f,m=u*c,p=u*s,g=u*f,y=r[0],_=r[1],P=r[2];return t[0]=(1-(v+b))*y,t[1]=(h+g)*y,t[2]=(d-p)*y,t[3]=0,t[4]=(h-g)*_,t[5]=(1-(l+b))*_,t[6]=(M+m)*_,t[7]=0,t[8]=(d+p)*P,t[9]=(M-m)*P,t[10]=(1-(l+v))*P,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.fromRotationTranslationScaleOrigin=function(t,n,e,r,a){let o=n[0],i=n[1],u=n[2],c=n[3],s=o+o,f=i+i,l=u+u,h=o*s,d=o*f,v=o*l,M=i*f,b=i*l,m=u*l,p=c*s,g=c*f,y=c*l,_=r[0],P=r[1],x=r[2],E=a[0],O=a[1],w=a[2];return t[0]=(1-(M+m))*_,t[1]=(d+y)*_,t[2]=(v-g)*_,t[3]=0,t[4]=(d-y)*P,t[5]=(1-(h+m))*P,t[6]=(b+p)*P,t[7]=0,t[8]=(v+g)*x,t[9]=(b-p)*x,t[10]=(1-(h+M))*x,t[11]=0,t[12]=e[0]+E-(t[0]*E+t[4]*O+t[8]*w),t[13]=e[1]+O-(t[1]*E+t[5]*O+t[9]*w),t[14]=e[2]+w-(t[2]*E+t[6]*O+t[10]*w),t[15]=1,t},n.fromQuat=function(t,n){let e=n[0],r=n[1],a=n[2],o=n[3],i=e+e,u=r+r,c=a+a,s=e*i,f=r*i,l=r*u,h=a*i,d=a*u,v=a*c,M=o*i,b=o*u,m=o*c;return t[0]=1-l-v,t[1]=f+m,t[2]=h-b,t[3]=0,t[4]=f-m,t[5]=1-s-v,t[6]=d+M,t[7]=0,t[8]=h+b,t[9]=d-M,t[10]=1-s-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.frustum=function(t,n,e,r,a,o,i){let u=1/(e-n),c=1/(a-r),s=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(e+n)*u,t[9]=(a+r)*c,t[10]=(i+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*s,t[15]=0,t},n.perspective=function(t,n,e,r,a){let o=1/Math.tan(n/2),i=1/(r-a);return t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*i,t[15]=0,t},n.perspectiveFromFieldOfView=function(t,n,e,r){let a=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),i=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),c=2/(i+u),s=2/(a+o);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(i-u)*c*.5,t[9]=(a-o)*s*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t},n.ortho=function(t,n,e,r,a,o,i){let u=1/(n-e),c=1/(r-a),s=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(n+e)*u,t[13]=(a+r)*c,t[14]=(i+o)*s,t[15]=1,t},n.lookAt=function(t,n,e,r){let a,i,u,c,s,f,l,h,d,v,M=n[0],b=n[1],m=n[2],p=r[0],g=r[1],y=r[2],_=e[0],P=e[1],x=e[2];return Math.abs(M-_)<o.EPSILON&&Math.abs(b-P)<o.EPSILON&&Math.abs(m-x)<o.EPSILON?mat4.identity(t):(l=M-_,h=b-P,d=m-x,v=1/Math.sqrt(l*l+h*h+d*d),l*=v,h*=v,d*=v,a=g*d-y*h,i=y*l-p*d,u=p*h-g*l,(v=Math.sqrt(a*a+i*i+u*u))?(a*=v=1/v,i*=v,u*=v):(a=0,i=0,u=0),c=h*u-d*i,s=d*a-l*u,f=l*i-h*a,(v=Math.sqrt(c*c+s*s+f*f))?(c*=v=1/v,s*=v,f*=v):(c=0,s=0,f=0),t[0]=a,t[1]=c,t[2]=l,t[3]=0,t[4]=i,t[5]=s,t[6]=h,t[7]=0,t[8]=u,t[9]=f,t[10]=d,t[11]=0,t[12]=-(a*M+i*b+u*m),t[13]=-(c*M+s*b+f*m),t[14]=-(l*M+h*b+d*m),t[15]=1,t)},n.targetTo=function(t,n,e,r){let a=n[0],o=n[1],i=n[2],u=r[0],c=r[1],s=r[2],f=a-e[0],l=o-e[1],h=i-e[2],d=f*f+l*l+h*h;d>0&&(f*=d=1/Math.sqrt(d),l*=d,h*=d);let v=c*h-s*l,M=s*f-u*h,b=u*l-c*f;return t[0]=v,t[1]=M,t[2]=b,t[3]=0,t[4]=l*b-h*M,t[5]=h*v-f*b,t[6]=f*M-l*v,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t},n.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t},n.subtract=a,n.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t},n.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]},n.equals=function(t,n){let e=t[0],r=t[1],a=t[2],i=t[3],u=t[4],c=t[5],s=t[6],f=t[7],l=t[8],h=t[9],d=t[10],v=t[11],M=t[12],b=t[13],m=t[14],p=t[15],g=n[0],y=n[1],_=n[2],P=n[3],x=n[4],E=n[5],O=n[6],w=n[7],A=n[8],R=n[9],S=n[10],T=n[11],I=n[12],L=n[13],N=n[14],q=n[15];return Math.abs(e-g)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(r-y)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(a-_)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(i-P)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(P))&&Math.abs(u-x)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(c-E)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(s-O)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(O))&&Math.abs(f-w)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(l-A)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(h-R)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(d-S)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(v-T)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(M-I)<=o.EPSILON*Math.max(1,Math.abs(M),Math.abs(I))&&Math.abs(b-L)<=o.EPSILON*Math.max(1,Math.abs(b),Math.abs(L))&&Math.abs(m-N)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(p-q)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(q))};var o=e(0);const i=r;n.mul=i;const u=a;n.sub=u},function(t,n,e){"use strict";function r(){let t=new c.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function a(t,n,e){e*=.5;let r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t}function o(t,n,e){let r=n[0],a=n[1],o=n[2],i=n[3],u=e[0],c=e[1],s=e[2],f=e[3];return t[0]=r*f+i*u+a*s-o*c,t[1]=a*f+i*c+o*u-r*s,t[2]=o*f+i*s+r*c-a*u,t[3]=i*f-r*u-a*c-o*s,t}function i(t,n,e,r){let a,o,i,u,c,s=n[0],f=n[1],l=n[2],h=n[3],d=e[0],v=e[1],M=e[2],b=e[3];return(o=s*d+f*v+l*M+h*b)<0&&(o=-o,d=-d,v=-v,M=-M,b=-b),1-o>1e-6?(a=Math.acos(o),i=Math.sin(a),u=Math.sin((1-r)*a)/i,c=Math.sin(r*a)/i):(u=1-r,c=r),t[0]=u*s+c*d,t[1]=u*f+c*v,t[2]=u*l+c*M,t[3]=u*h+c*b,t}function u(t,n){let e,r=n[0]+n[4]+n[8];if(r>0)e=Math.sqrt(r+1),t[3]=.5*e,e=.5/e,t[0]=(n[5]-n[7])*e,t[1]=(n[6]-n[2])*e,t[2]=(n[1]-n[3])*e;else{let r=0;n[4]>n[0]&&(r=1),n[8]>n[3*r+r]&&(r=2);let a=(r+1)%3,o=(r+2)%3;e=Math.sqrt(n[3*r+r]-n[3*a+a]-n[3*o+o]+1),t[r]=.5*e,e=.5/e,t[3]=(n[3*a+o]-n[3*o+a])*e,t[a]=(n[3*a+r]+n[3*r+a])*e,t[o]=(n[3*o+r]+n[3*r+o])*e}return t}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},n.setAxisAngle=a,n.getAxisAngle=function(t,n){let e=2*Math.acos(n[3]),r=Math.sin(e/2);return 0!=r?(t[0]=n[0]/r,t[1]=n[1]/r,t[2]=n[2]/r):(t[0]=1,t[1]=0,t[2]=0),e},n.multiply=o,n.rotateX=function(t,n,e){e*=.5;let r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),c=Math.cos(e);return t[0]=r*c+i*u,t[1]=a*c+o*u,t[2]=o*c-a*u,t[3]=i*c-r*u,t},n.rotateY=function(t,n,e){e*=.5;let r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),c=Math.cos(e);return t[0]=r*c-o*u,t[1]=a*c+i*u,t[2]=o*c+r*u,t[3]=i*c-a*u,t},n.rotateZ=function(t,n,e){e*=.5;let r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),c=Math.cos(e);return t[0]=r*c+a*u,t[1]=a*c-r*u,t[2]=o*c+i*u,t[3]=i*c-o*u,t},n.calculateW=function(t,n){let e=n[0],r=n[1],a=n[2];return t[0]=e,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-r*r-a*a)),t},n.slerp=i,n.invert=function(t,n){let e=n[0],r=n[1],a=n[2],o=n[3],i=e*e+r*r+a*a+o*o,u=i?1/i:0;return t[0]=-e*u,t[1]=-r*u,t[2]=-a*u,t[3]=o*u,t},n.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},n.fromMat3=u,n.fromEuler=function(t,n,e,r){let a=.5*Math.PI/180;n*=a,e*=a,r*=a;let o=Math.sin(n),i=Math.cos(n),u=Math.sin(e),c=Math.cos(e),s=Math.sin(r),f=Math.cos(r);return t[0]=o*c*f-i*u*s,t[1]=i*u*f+o*c*s,t[2]=i*c*s-o*u*f,t[3]=i*c*f+o*u*s,t},n.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var c=e(0),s=e(3),f=e(4),l=e(5);const h=l.clone;n.clone=h;const d=l.fromValues;n.fromValues=d;const v=l.copy;n.copy=v;const M=l.set;n.set=M;const b=l.add;n.add=b;const m=o;n.mul=m;const p=l.scale;n.scale=p;const g=l.dot;n.dot=g;const y=l.lerp;n.lerp=y;const _=l.length;n.length=_;const P=_;n.len=P;const x=l.squaredLength;n.squaredLength=x;const E=x;n.sqrLen=E;const O=l.normalize;n.normalize=O;const w=l.exactEquals;n.exactEquals=w;const A=l.equals;n.equals=A;const R=function(){let t=f.create(),n=f.fromValues(1,0,0),e=f.fromValues(0,1,0);return function(r,o,i){let u=f.dot(o,i);return u<-.999999?(f.cross(t,n,o),f.len(t)<1e-6&&f.cross(t,e,o),f.normalize(t,t),a(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(f.cross(t,o,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,O(r,r))}}();n.rotationTo=R;const S=function(){let t=r(),n=r();return function(e,r,a,o,u,c){return i(t,r,u,c),i(n,a,o,c),i(e,t,n,2*c*(1-c)),e}}();n.sqlerp=S;const T=function(){let t=s.create();return function(n,e,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],O(n,u(n,t))}}();n.setAxes=T},function(t,n,e){"use strict";function r(){let t=new l.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t}function o(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t}function i(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t}function u(t,n){var e=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(e*e+r*r)}function c(t,n){var e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r}function s(t){var n=t[0],e=t[1];return Math.sqrt(n*n+e*e)}function f(t){var n=t[0],e=t[1];return n*n+e*e}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(t){let n=new l.ARRAY_TYPE(2);return n[0]=t[0],n[1]=t[1],n},n.fromValues=function(t,n){let e=new l.ARRAY_TYPE(2);return e[0]=t,e[1]=n,e},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t},n.set=function(t,n,e){return t[0]=n,t[1]=e,t},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t},n.subtract=a,n.multiply=o,n.divide=i,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t},n.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t},n.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t},n.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t},n.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t},n.distance=u,n.squaredDistance=c,n.length=s,n.squaredLength=f,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t},n.normalize=function(t,n){var e=n[0],r=n[1],a=e*e+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=n[0]*a,t[1]=n[1]*a),t},n.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},n.cross=function(t,n,e){var r=n[0]*e[1]-n[1]*e[0];return t[0]=t[1]=0,t[2]=r,t},n.lerp=function(t,n,e,r){var a=n[0],o=n[1];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t},n.random=function(t,n){n=n||1;var e=2*l.RANDOM()*Math.PI;return t[0]=Math.cos(e)*n,t[1]=Math.sin(e)*n,t},n.transformMat2=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[2]*a,t[1]=e[1]*r+e[3]*a,t},n.transformMat2d=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[2]*a+e[4],t[1]=e[1]*r+e[3]*a+e[5],t},n.transformMat3=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[3]*a+e[6],t[1]=e[1]*r+e[4]*a+e[7],t},n.transformMat4=function(t,n,e){let r=n[0],a=n[1];return t[0]=e[0]*r+e[4]*a+e[12],t[1]=e[1]*r+e[5]*a+e[13],t},n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]},n.equals=function(t,n){let e=t[0],r=t[1],a=n[0],o=n[1];return Math.abs(e-a)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(r-o)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))};var l=e(0);const h=s;n.len=h;const d=a;n.sub=d;const v=o;n.mul=v;const M=i;n.div=M;const b=u;n.dist=b;const m=c;n.sqrDist=m;const p=f;n.sqrLen=p;const g=function(){let t=r();return function(n,e,r,a,o,i){let u,c;for(e||(e=2),r||(r=0),c=a?Math.min(a*e+r,n.length):n.length,u=r;u<c;u+=e)t[0]=n[u],t[1]=n[u+1],o(t,t,i),n[u]=t[0],n[u+1]=t[1];return n}}();n.forEach=g},,,,function(t,n,e){"use strict";(function(t){var n=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),r=e(8),a=e(6),o=e(7),i=a.chunks.UBO,u=a.chunks.NOISE,c=a.chunks.FOG,s=function(t,n){return(t%n+n)%n};new(function(){function e(){var n=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.resize=function(){n.renderer.setSize(t.innerWidth,t.innerHeight),n.renderer.setRatio(t.devicePixelRatio),n.initialX=n.settings.row*n.settings.width/-2,n.initialX+=n.settings.width/2,n.initialZ=n.settings.col*n.settings.depth/-2,n.initialZ+=n.settings.depth/2,n.maxWidth=n.settings.row*n.settings.width,n.maxDepth=n.settings.col*n.settings.depth},this.move=function(e){n.mouse[0]=e.clientX/t.innerWidth*2-1,n.mouse[1]=-e.clientY/t.innerHeight*2+1},this.updateOffsets=function(){n.offset[0]-=10*n.mouse[0],n.offset[1]+=10*n.mouse[1],n.model.dirty.attributes=!0,n.offset[1]+=n.settings.speed;for(var t=0,e=void 0,r=void 0,a=n.model.attributes.a_offset.value,o=0;o<a.length;o+=3)e=Math.floor(t/n.settings.col)*n.settings.width,r=t%n.settings.col*n.settings.depth,a[o+0]=n.initialX+s(e+n.offset[0],n.maxWidth),a[o+1]=0,a[o+2]=n.initialZ+s(r+n.offset[1],n.maxDepth),t++},this.update=function(){n.updateOffsets(),n.renderer.render(n.scene,n.camera),requestAnimationFrame(n.update)},t.addEventListener("resize",this.resize,!1),this.setup(),this.debug(),this.init(),this.resize(),this.update()}return n(e,[{key:"setup",value:function(){this.renderer=new a.Renderer,document.body.appendChild(this.renderer.domElement),this.scene=new a.Scene,this.scene.fog.start=1e3,this.scene.fog.end=1800,this.scene.fog.enable=!0,this.camera=new a.cameras.Perspective({near:.01,far:1e4}),this.camera.position.set(0,400,1200)}},{key:"debug",value:function(){this.settings={width:80,height:150,depth:80,row:24,col:20,speed:5,seed:700,scale:110},this.mouse=r.vec2.create(),this.offset=r.vec2.create()}},{key:"init",value:function(){for(var t="#version 300 es\n            in vec3 a_position;\n            in vec3 a_offset;\n            in vec3 a_normal;\n\n            "+i.scene()+"\n            "+i.model()+"\n            "+u()+"\n\n            uniform float u_seed;\n            uniform float u_scale;\n            uniform float u_speed;\n\n            out vec3 v_color;\n\n            float noise(vec3 p) {\n                float n = 0.0;\n                n += 1.00 * (cnoise(p * 1.0));\n                return n;\n            }\n\n            float map(float value, float inMin, float inMax, float outMin, float outMax) {\n                if (inMin == inMax) return 0.5;\n                return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n            }\n\n            void main() {\n                float n =noise(vec3(a_offset / u_seed) + vec3(u_speed / 100. * iGlobalTime));\n                vec3 position = a_position + a_offset + vec3(0.0, n * u_scale, 0.0);\n                gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\n\n                float v = 200.0;\n                v_color = vec3( map(position.y, -v, v, 0., 1.) );\n            }\n        ",n="#version 300 es\n            precision highp float;\n            precision highp int;\n\n            in vec3 v_color;\n\n            "+i.scene()+"\n\n            out vec4 outColor;\n\n            void main() {\n                vec4 base = vec4(v_color, 1.0);\n                "+c.linear()+"\n                outColor = base;\n            }\n        ",e=this.settings.row*this.settings.col,r=[],s=this.settings,f=s.width,l=s.height,h=s.depth,d=0;d<e;d++)r.push(0,0,0);var v=new o.Box(f/2,l/2,h/2);this.model=new a.Model,this.model.setAttribute("a_position","vec3",new Float32Array(v.positions)),this.model.setIndex(new Uint16Array(v.indices)),this.model.setAttribute("a_normal","vec3",new Float32Array(v.normals)),this.model.setInstanceAttribute("a_offset","vec3",new Float32Array(r),!0),this.model.setInstanceCount(e),this.model.setUniform("u_seed","float",this.settings.seed),this.model.setUniform("u_scale","float",this.settings.scale),this.model.setUniform("u_speed","float",this.settings.speed),this.model.setShader(t,n),this.scene.add(this.model),this.renderer.domElement.addEventListener("mousemove",this.move,!1)}}]),e}())}).call(n,e(2))}]);