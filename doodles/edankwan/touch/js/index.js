!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";e.exports.Composer=t(2),e.exports.CopyPass=t(10),e.exports.BlendMode={Normal:1,Dissolve:2,Darken:3,Multiply:4,ColorBurn:5,LinearBurn:6,DarkerColor:7,Lighten:8,Screen:9,ColorDodge:10,LinearDodge:11,LighterColor:12,Overlay:13,SoftLight:14,HardLight:15,VividLight:16,LinearLight:17,PinLight:18,HardMix:19,Difference:20,Exclusion:21,Substract:22,Divide:23}},{10:10,2:2}],2:[function(t,e,n){"use strict";function r(t,e){var n=t.getPixelRatio();this.width=Math.floor(t.context.canvas.width/n)||1,this.height=Math.floor(t.context.canvas.height/n)||1,this.output=null,this.input=null,this.read=null,this.write=null,this.settings=e||{},this.useRGBA=this.settings.useRGBA||!1,this.renderer=t,this.copyPass=new o(this.settings),this.defaultMaterial=new i.MeshBasicMaterial({color:65280,wireframe:!1}),this.scene=new i.Scene,this.quad=new i.Mesh(new i.PlaneBufferGeometry(1,1),this.defaultMaterial),this.scene.add(this.quad),this.camera=new i.OrthographicCamera(1,1,1,1,-1e4,1e4),this.front=new i.WebGLRenderTarget(1,1,{minFilter:void 0!==this.settings.minFilter?this.settings.minFilter:i.LinearFilter,magFilter:void 0!==this.settings.magFilter?this.settings.magFilter:i.LinearFilter,wrapS:void 0!==this.settings.wrapS?this.settings.wrapS:i.ClampToEdgeWrapping,wrapT:void 0!==this.settings.wrapT?this.settings.wrapT:i.ClampToEdgeWrapping,format:this.useRGBA?i.RGBAFormat:i.RGBFormat,type:void 0!==this.settings.type?this.settings.type:i.UnsignedByteType,stencilBuffer:void 0!==this.settings.stencilBuffer?this.settings.stencilBuffer:!0}),this.back=this.front.clone(),this.startTime=Date.now(),this.passes={},this.setSize(this.width,this.height)}var i=t(45),o=t(10),a=t(4),s=t(3);e.exports=r,r.prototype.swapBuffers=function(){this.output=this.write,this.input=this.read;var t=this.write;this.write=this.read,this.read=t},r.prototype.render=function(t,e,n,r){n&&this.swapBuffers(),this.renderer.render(t,e,r?r:this.write,!0),r||this.swapBuffers()},r.prototype.toScreen=function(){this.quad.material=this.copyPass.shader,this.quad.material.uniforms.tInput.value=this.read,this.quad.material.uniforms.resolution.value.set(this.width,this.height),this.renderer.render(this.scene,this.camera)},r.prototype.toTexture=function(t){this.quad.material=this.copyPass.shader,this.quad.material.uniforms.tInput.value=this.read,this.renderer.render(this.scene,this.camera,t,!1)},r.prototype.pass=function(t){if(t instanceof a)this.passStack(t);else{if(t instanceof i.ShaderMaterial&&(this.quad.material=t),t instanceof s)return void t.run(this);t.isSim||(this.quad.material.uniforms.tInput.value=this.read),this.quad.material.uniforms.resolution.value.set(this.width,this.height),this.quad.material.uniforms.time.value=.001*(Date.now()-this.startTime),this.renderer.render(this.scene,this.camera,this.write,!1),this.swapBuffers()}},r.prototype.passStack=function(t){t.getPasses().forEach(function(t){this.pass(t)}.bind(this))},r.prototype.reset=function(){this.read=this.front,this.write=this.back,this.output=this.write,this.input=this.read},r.prototype.setSource=function(t){this.quad.material=this.copyPass.shader,this.quad.material.uniforms.tInput.value=t,this.renderer.render(this.scene,this.camera,this.write,!0),this.swapBuffers()},r.prototype.setSize=function(t,e){this.width=t,this.height=e,this.camera.projectionMatrix.makeOrthographic(t/-2,t/2,e/2,e/-2,this.camera.near,this.camera.far),this.quad.scale.set(t,e,1);var n=this.front.clone();n.width=t,n.height=e,this.quad.material instanceof s&&(this.quad.material.uniforms.tInput.value=n),this.front=n,n=this.back.clone(),n.width=t,n.height=e,this.back=n}},{10:10,3:3,4:4,45:45}],3:[function(t,e,n){"use strict";function r(){this.shader=null,this.loaded=null,this.params={},this.isSim=!1}var i=t(45),o=t(13);e.exports=r,r.prototype.setShader=function(t,e){this.shader=o(t,e)},r.prototype.run=function(t){t.pass(this.shader)},r.prototype.getOfflineTexture=function(t,e,n){return new i.WebGLRenderTarget(t,e,{minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:n?i.RGBAFormat:i.RGBFormat})}},{13:13,45:45}],4:[function(t,e,n){"use strict";function r(t){this.passItems=[],this.shadersPool=t,this.passes=[]}e.exports=r,r.prototype.addPass=function(t,e,n,r){var i=0,o={shaderName:t,enabled:e||!1};return this.passItems.push(o),i=this.passItems.length,this.updatePasses(),r?this.movePassToIndex(this.passItems[i],r):i-1},r.prototype.removePass=function(t){this.passItems.splice(t,1),this.updatePasses()},r.prototype.enablePass=function(t){this.passItems[t].enabled=!0,this.updatePasses()},r.prototype.disablePass=function(t){this.passItems[t].enabled=!1,this.updatePasses()},r.prototype.isPassEnabled=function(t){return this.passItems[t].enabled},r.prototype.movePassToIndex=function(t,e){return this.passItems.splice(e,0,this.passItems.splice(t,1)[0]),this.updatePasses(),e},r.prototype.reverse=function(){this.passItems.reverse(),this.updatePasses()},r.prototype.updatePasses=function(){this.passes=this.shadersPool.getPasses(this.passItems),this.passItems.forEach(function(t,e){void 0===t.params&&(t.params=JSON.parse(JSON.stringify(this.passes[e].params)))}.bind(this))},r.prototype.getPasses=function(){return this.passes}},{}],5:[function(t,e,n){"use strict";function r(t){o.call(this),t=t||{},this.setShader(a,s),this.params.mode=t.mode||1,this.params.opacity=t.opacity||1,this.params.tInput2=t.tInput2||null,this.params.resolution2=t.resolution2||new i.Vector2,this.params.sizeMode=t.sizeMode||1,this.params.aspectRatio=t.aspectRatio||1,this.params.aspectRatio2=t.aspectRatio2||1}var i=t(45),o=t(3),a="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",s="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tInput;\nuniform sampler2D tInput2;\nuniform vec2 resolution;\nuniform vec2 resolution2;\nuniform float aspectRatio;\nuniform float aspectRatio2;\nuniform int mode;\nuniform int sizeMode;\nuniform float opacity;\n\nvec2 vUv2;\n\nfloat applyOverlayToChannel( float base, float blend ) {\n\n  return (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)));\n\n}\n\nfloat applySoftLightToChannel( float base, float blend ) {\n\n  return ((blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend)));\n\n}\n\nfloat applyColorBurnToChannel( float base, float blend ) {\n\n  return ((blend == 0.0) ? blend : max((1.0 - ((1.0 - base) / blend)), 0.0));\n\n}\n\nfloat applyColorDodgeToChannel( float base, float blend ) {\n\n  return ((blend == 1.0) ? blend : min(base / (1.0 - blend), 1.0));\n\n}\n\nfloat applyLinearBurnToChannel( float base, float blend ) {\n\n  return max(base + blend - 1., 0.0 );\n\n}\n\nfloat applyLinearDodgeToChannel( float base, float blend ) {\n\n  return min( base + blend, 1. );\n\n}\n\nfloat applyLinearLightToChannel( float base, float blend ) {\n\n  return ( blend < .5 ) ? applyLinearBurnToChannel( base, 2. * blend ) : applyLinearDodgeToChannel( base, 2. * ( blend - .5 ) );\n\n}\n\nvoid main() {\n\n  vUv2 = vUv;\n  \n  if( sizeMode == 1 ) {\n    \n    if( aspectRatio2 > aspectRatio ) {\n      vUv2.x = vUv.x * aspectRatio / aspectRatio2;\n      vUv2.x += .5 * ( 1. - aspectRatio / aspectRatio2 ); \n      vUv2.y = vUv.y;\n    }\n\n    if( aspectRatio2 < aspectRatio ) {\n      vUv2.x = vUv.x;\n      vUv2.y = vUv.y * aspectRatio2 / aspectRatio;\n      vUv2.y += .5 * ( 1. - aspectRatio2 / aspectRatio );\n    }\n\n  }\n\n  vec4 base = texture2D( tInput, vUv );\n  vec4 blend = texture2D( tInput2, vUv2 );\n\n  if( mode == 1 ) { // normal\n\n    gl_FragColor = base;\n    gl_FragColor.a *= opacity;\n    return;\n\n  }\n\n  if( mode == 2 ) { // dissolve\n\n  }\n\n  if( mode == 3 ) { // darken\n\n    gl_FragColor = min( base, blend );\n    return;\n\n  }\n\n  if( mode == 4 ) { // multiply\n\n    gl_FragColor = base * blend;\n    return;\n\n  }\n\n  if( mode == 5 ) { // color burn\n\n    gl_FragColor = vec4(\n      applyColorBurnToChannel( base.r, blend.r ),\n      applyColorBurnToChannel( base.g, blend.g ),\n      applyColorBurnToChannel( base.b, blend.b ),\n      applyColorBurnToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 6 ) { // linear burn\n\n    gl_FragColor = max(base + blend - 1.0, 0.0);\n    return;\n\n  }\n\n  if( mode == 7 ) { // darker color\n\n  }\n\n  if( mode == 8 ) { // lighten\n\n    gl_FragColor = max( base, blend );\n    return;\n\n  }\n\n  if( mode == 9 ) { // screen\n\n    gl_FragColor = (1.0 - ((1.0 - base) * (1.0 - blend)));\n    gl_FragColor = gl_FragColor * opacity + base * ( 1. - opacity );\n    return;\n\n  }\n\n  if( mode == 10 ) { // color dodge\n\n    gl_FragColor = vec4(\n      applyColorDodgeToChannel( base.r, blend.r ),\n      applyColorDodgeToChannel( base.g, blend.g ),\n      applyColorDodgeToChannel( base.b, blend.b ),\n      applyColorDodgeToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 11 ) { // linear dodge\n\n    gl_FragColor = min(base + blend, 1.0);\n    return;\n\n  }\n\n  if( mode == 12 ) { // lighter color\n\n  }\n\n  if( mode == 13 ) { // overlay\n\n    gl_FragColor = gl_FragColor = vec4( \n      applyOverlayToChannel( base.r, blend.r ),\n      applyOverlayToChannel( base.g, blend.g ),\n      applyOverlayToChannel( base.b, blend.b ),\n      applyOverlayToChannel( base.a, blend.a )\n    );\n    gl_FragColor = gl_FragColor * opacity + base * ( 1. - opacity );\n  \n    return;\n\n  }\n\n  if( mode == 14 ) { // soft light\n\n    gl_FragColor = vec4( \n      applySoftLightToChannel( base.r, blend.r ),\n      applySoftLightToChannel( base.g, blend.g ),\n      applySoftLightToChannel( base.b, blend.b ),\n      applySoftLightToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 15 ) { // hard light\n\n    gl_FragColor = vec4( \n      applyOverlayToChannel( base.r, blend.r ),\n      applyOverlayToChannel( base.g, blend.g ),\n      applyOverlayToChannel( base.b, blend.b ),\n      applyOverlayToChannel( base.a, blend.a )\n    );\n    gl_FragColor = gl_FragColor * opacity + base * ( 1. - opacity );\n    return;\n\n  }\n\n  if( mode == 16 ) { // vivid light\n\n  }\n\n  if( mode == 17 ) { // linear light\n\n    gl_FragColor = vec4( \n      applyLinearLightToChannel( base.r, blend.r ),\n      applyLinearLightToChannel( base.g, blend.g ),\n      applyLinearLightToChannel( base.b, blend.b ),\n      applyLinearLightToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 18 ) { // pin light\n\n  }\n\n  if( mode == 19 ) { // hard mix\n\n  }\n\n  if( mode == 20 ) { // difference\n\n    gl_FragColor = abs( base - blend );\n    gl_FragColor.a = base.a + blend.b;\n    return;\n\n  }\n\n  if( mode == 21 ) { // exclusion\n\n    gl_FragColor = base + blend - 2. * base * blend;\n    \n  }\n\n  if( mode == 22 ) { // substract\n\n  }\n\n  if( mode == 23 ) { // divide\n\n  }\n\n  gl_FragColor = vec4( 1., 0., 1., 1. );\n\n}";e.exports=r,r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.run=function(t){this.shader.uniforms.mode.value=this.params.mode,this.shader.uniforms.opacity.value=this.params.opacity,this.shader.uniforms.tInput2.value=this.params.tInput2,this.shader.uniforms.sizeMode.value=this.params.sizeMode,this.shader.uniforms.aspectRatio.value=this.params.aspectRatio,this.shader.uniforms.aspectRatio2.value=this.params.aspectRatio2,t.pass(this.shader)}},{3:3,45:45}],6:[function(t,e,n){"use strict";function r(t){o.call(this),t=t||{},this.composer=null,this.tmpTexture=this.getOfflineTexture(t.width,t.height,!0),this.blurPass=new u(2),this.blendPass=new c,this.zoomBlur=new l,this.brightnessContrastPass=new h,this.width=t.width||512,this.height=t.height||512,this.params.blurAmount=t.blurAmount||2,this.params.applyZoomBlur=t.applyZoomBlur||!1,this.params.zoomBlurStrength=t.zoomBlurStrength||.2,this.params.useTexture=t.useTexture||!1,this.params.zoomBlurCenter=t.zoomBlurCenter||new i.Vector2(.5,.5),this.params.blendMode=t.blendMode||s.Screen,this.params.glowTexture=null}var i=t(45),o=t(3),a=t(2),s=t(1).BlendMode,u=t(8),c=t(5),l=t(12),h=t(9);e.exports=r,r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.run=function(t){this.composer||(this.composer=new a(t.renderer,{useRGBA:!0}),this.composer.setSize(this.width,this.height)),this.composer.reset(),this.params.useTexture===!0?this.composer.setSource(this.params.glowTexture):this.composer.setSource(t.output),this.blurPass.params.amount=this.params.blurAmount,this.composer.pass(this.blurPass),this.params.applyZoomBlur&&(this.zoomBlur.params.center.set(.5,.5),this.zoomBlur.params.strength=this.params.zoomBlurStrength,this.composer.pass(this.zoomBlur)),this.params.useTexture===!0&&(this.blendPass.params.mode=s.Screen,this.blendPass.params.tInput=this.params.glowTexture,t.pass(this.blendPass)),this.blendPass.params.mode=this.params.blendMode,this.blendPass.params.tInput2=this.composer.output,t.pass(this.blendPass)}},{1:1,12:12,2:2,3:3,45:45,5:5,8:8,9:9}],7:[function(t,e,n){"use strict";function r(t,e){o.call(this),this.setShader(a,s),this.params.delta=new i.Vector2(t||0,e||0)}var i=t(45),o=t(3),a="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",s="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tInput;\nuniform vec2 delta;\nuniform vec2 resolution;\n\nvoid main() {\n\n  vec4 sum = vec4( 0. );\n  vec2 inc = delta / resolution;\n\n  sum += texture2D( tInput, ( vUv - inc * 4. ) ) * 0.051;\n  sum += texture2D( tInput, ( vUv - inc * 3. ) ) * 0.0918;\n  sum += texture2D( tInput, ( vUv - inc * 2. ) ) * 0.12245;\n  sum += texture2D( tInput, ( vUv - inc * 1. ) ) * 0.1531;\n  sum += texture2D( tInput, ( vUv + inc * 0. ) ) * 0.1633;\n  sum += texture2D( tInput, ( vUv + inc * 1. ) ) * 0.1531;\n  sum += texture2D( tInput, ( vUv + inc * 2. ) ) * 0.12245;\n  sum += texture2D( tInput, ( vUv + inc * 3. ) ) * 0.0918;\n  sum += texture2D( tInput, ( vUv + inc * 4. ) ) * 0.051;\n\n  gl_FragColor = sum;\n\n}";e.exports=r,r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.run=function(t){this.shader.uniforms.delta.value.copy(this.params.delta),t.pass(this.shader)}},{3:3,45:45}],8:[function(t,e,n){"use strict";function r(t){i.call(this),t=t||2,this.boxPass=new o(t,t),this.params.amount=t}var i=t(3),o=t(7);e.exports=r,r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.run=function(t){var e=this.params.amount;this.boxPass.params.delta.set(e,0),t.pass(this.boxPass),this.boxPass.params.delta.set(0,e),t.pass(this.boxPass)}},{3:3,7:7}],9:[function(t,e,n){"use strict";function r(t,e){i.call(this),this.setShader(o,a),this.params.brightness=t||1,this.params.contrast=e||1}var i=t(3),o="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",a="#define GLSLIFY 1\nuniform float brightness;\nuniform float contrast;\nuniform sampler2D tInput;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n  vec3 color = texture2D(tInput, vUv).rgb;\n  vec3 colorContrasted = (color) * contrast;\n  vec3 bright = colorContrasted + vec3(brightness,brightness,brightness);\n  gl_FragColor.rgb = bright;\n  gl_FragColor.a = 1.;\n\n}";e.exports=r,r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.run=function(t){this.shader.uniforms.brightness.value=this.params.brightness,this.shader.uniforms.contrast.value=this.params.contrast,t.pass(this.shader)}},{3:3}],10:[function(t,e,n){"use strict";function r(){i.call(this),this.setShader(o,a)}var i=t(3),o="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",a="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tInput;\n\nvoid main() {\n  gl_FragColor = texture2D( tInput, vUv );\n\n}";e.exports=r,r.prototype=Object.create(i.prototype),r.prototype.constructor=r},{3:3}],11:[function(t,e,n){"use strict";function r(t,e){i.call(this),this.setShader(o,a),this.params.boost=t||2,this.params.reduction=e||2}var i=t(3),o="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",a="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tInput;\nuniform vec2 resolution;\n\nuniform float reduction;\nuniform float boost;\n\nvoid main() {\n\n  vec4 color = texture2D( tInput, vUv );\n\n  vec2 center = resolution * 0.5;\n  float vignette = distance( center, gl_FragCoord.xy ) / resolution.x;\n  vignette = boost - vignette * reduction;\n\n  color.rgb *= vignette;\n  gl_FragColor = color;\n\n}";e.exports=r,r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.run=function(t){this.shader.uniforms.boost.value=this.params.boost,this.shader.uniforms.reduction.value=this.params.reduction,t.pass(this.shader)}},{3:3}],12:[function(t,e,n){"use strict";function r(t){o.call(this),t=t||{},this.setShader(a,s),this.params.center=new i.Vector2(t.centerX||.5,t.centerY||.5),this.params.strength=t.strength||.1}var i=t(45),o=t(3),a="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",s="#define GLSLIFY 1\nuniform sampler2D tInput;\nuniform vec2 center;\nuniform float strength;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nfloat random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}\n\nvoid main(){\n  vec4 color=vec4(0.0);\n  float total=0.0;\n  vec2 toCenter=center-vUv*resolution;\n  float offset=random(vec3(12.9898,78.233,151.7182),0.0);\n  for(float t=0.0;t<=40.0;t++){\n    float percent=(t+offset)/40.0;\n    float weight=4.0*(percent-percent*percent);\n    vec4 sample=texture2D(tInput,vUv+toCenter*percent*strength/resolution);\n    sample.rgb*=sample.a;\n    color+=sample*weight;\n    total+=weight;\n  }\n  gl_FragColor=color/total;\n  gl_FragColor.rgb/=gl_FragColor.a+0.00001;\n}";e.exports=r,r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.run=function(t){this.shader.uniforms.center.value.set(t.width*this.params.center.x,t.height*this.params.center.y),this.shader.uniforms.strength.value=this.params.strength,t.pass(this.shader)}},{3:3,45:45}],13:[function(t,e,n){"use strict";var r=t(45);e.exports=function(t,e){for(var n,i,o,a,s=/uniform\s+([^\s]+)\s+([^\s]+)\s*;/gi,u=/uniform\s+([^\s]+)\s+([^\s]+)\s*\[\s*(\w+)\s*\]*\s*;/gi,c={sampler2D:{type:"t",value:function(){return new r.Texture}},samplerCube:{type:"t",value:function(){}},bool:{type:"b",value:function(){return 0}},"int":{type:"i",value:function(){return 0}},"float":{type:"f",value:function(){return 0}},vec2:{type:"v2",value:function(){return new r.Vector2}},vec3:{type:"v3",value:function(){return new r.Vector3}},vec4:{type:"v4",value:function(){return new r.Vector4}},bvec2:{type:"v2",value:function(){return new r.Vector2}},bvec3:{type:"v3",value:function(){return new r.Vector3}},bvec4:{type:"v4",value:function(){return new r.Vector4}},ivec2:{type:"v2",value:function(){return new r.Vector2}},ivec3:{type:"v3",value:function(){return new r.Vector3}},ivec4:{type:"v4",value:function(){return new r.Vector4}},mat2:{type:"v2",value:function(){return new r.Matrix2}},mat3:{type:"v3",value:function(){return new r.Matrix3}},mat4:{type:"v4",value:function(){return new r.Matrix4}}},l={"float":{type:"fv",value:function(){return[]}},vec3:{type:"v3v",value:function(){return[]}}},h={resolution:{type:"v2",value:new r.Vector2(1,1),"default":!0},time:{type:"f",value:Date.now(),"default":!0},tInput:{type:"t",value:new r.Texture,"default":!0}};null!==(n=s.exec(e));)n.index===s.lastIndex&&s.lastIndex++,i=n[1],o=n[2],h[o]={type:c[i].type,value:c[i].value()};for(;null!==(n=u.exec(e));)n.index===s.lastIndex&&s.lastIndex++,i=n[1],o=n[2],a=n[3],h[o]={type:l[i].type,value:l[i].value()};var p=new r.ShaderMaterial({uniforms:h,vertexShader:t,fragmentShader:e,shading:r.FlatShading,depthWrite:!1,depthTest:!1,transparent:!0});return p}},{45:45}],14:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(a(n))for(o=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,u=0;r>u;u++)c[u].apply(this,o);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(n)){for(s=o;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],15:[function(t,e,n){function r(){l=!1,s.length?c=s.concat(c):h=-1,c.length&&i()}function i(){if(!l){var t=setTimeout(r);l=!0;for(var e=c.length;e;){for(s=c,c=[];++h<e;)s&&s[h].run();h=-1,e=c.length}s=null,l=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function a(){}var s,u=e.exports={},c=[],l=!1,h=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new o(t,e)),1!==c.length||l||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],16:[function(t,e,n){function r(t,e,n,r){return n=window.getComputedStyle,r=n?n(t):t.currentStyle,r?r[e.replace(/-(\w)/gi,function(t,e){return e.toUpperCase()})]:void 0}e.exports=r},{}],17:[function(t,e,n){function r(t,e,n){var r=c[e];if("undefined"==typeof r&&(r=o(e)),r){if(void 0===n)return t.style[r];"number"==typeof n&&(n+=l[r]||""),t.style[r]=n}}function i(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,e[n])}function o(t){var e=u(t),n=s(e);return c[e]=c[t]=c[n]=n,n}function a(){2===arguments.length?i(arguments[0],arguments[1]):r(arguments[0],arguments[1],arguments[2])}var s=t(18),u=t(19),c={"float":"cssFloat"},l={};["top","right","bottom","left","width","height","fontSize","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","padding","margin","perspective"].forEach(function(t){l[t]="px"}),e.exports=a,e.exports.set=a,e.exports.get=function(t,e){return Array.isArray(e)?e.reduce(function(e,n){return e[n]=r(t,n||""),e},{}):r(t,e||"")}},{18:18,19:19}],18:[function(t,e,n){var r=null;e.exports=function(t){var e=["Moz","Khtml","Webkit","O","ms"],n=t.charAt(0).toUpperCase()+t.slice(1);if(r||(r=document.createElement("div")),t in r.style)return t;for(var i=e.length;i--;)if(e[i]+n in r.style)return e[i]+n;return!1}},{}],19:[function(t,e,n){function r(t){return i(t).replace(/\s(\w)/g,function(t,e){return e.toUpperCase()})}var i=t(20);e.exports=r},{20:20}],20:[function(t,e,n){function r(t){return i(t).replace(/[\W_]+(.|$)/g,function(t,e){return e?" "+e:""})}var i=t(21);e.exports=r},{21:21}],21:[function(t,e,n){function r(t){return a.test(t)?t.toLowerCase():(u.test(t)&&(t=i(t)),s.test(t)&&(t=o(t)),t.toLowerCase())}function i(t){return t.replace(c,function(t,e){return e?" "+e:""})}function o(t){return t.replace(l,function(t,e,n){return e+" "+n.toLowerCase().split("").join(" ")})}e.exports=r;var a=/\s/,s=/[a-z][A-Z]/,u=/[\W_]/,c=/[\W_]+(.|$)/g,l=/(.)([A-Z]+)/g},{}],22:[function(t,e,n){n.glMatrix=t(23),n.mat2=t(24),n.mat2d=t(25),n.mat3=t(26),n.mat4=t(27),n.quat=t(28),n.vec2=t(29),n.vec3=t(30),n.vec4=t(31)},{23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31}],23:[function(t,e,n){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.setMatrixArrayType=function(t){GLMAT_ARRAY_TYPE=t};var i=Math.PI/180;r.toRadian=function(t){return t*i},e.exports=r},{}],24:[function(t,e,n){var r=t(23),i={};i.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},i.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},i.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},i.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null},i.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},i.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},i.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*c+o*l,t[3]=i*c+a*l,t},i.mul=i.multiply,i.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},i.scale=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t},i.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},i.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},i.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},e.exports=i},{23:23}],25:[function(t,e,n){var r=t(23),i={};i.create=function(){var t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},i.clone=function(t){var e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},i.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=n*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*s-o*a)*u,t[5]=(r*a-n*s)*u,t):null},i.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},i.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1],h=n[2],p=n[3],d=n[4],f=n[5];return t[0]=r*c+o*l,t[1]=i*c+a*l,t[2]=r*h+o*p,t[3]=i*h+a*p,t[4]=r*d+o*f+s,t[5]=i*d+a*f+u,t},i.mul=i.multiply,i.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*c,t[1]=i*l+a*c,t[2]=r*-c+o*l,t[3]=i*-c+a*l,t[4]=s,t[5]=u,t},i.scale=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=i*c,t[2]=o*l,t[3]=a*l,t[4]=s,t[5]=u,t},i.translate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*c+o*l+s,t[5]=i*c+a*l+u,t},i.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},i.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.exports=i},{23:23}],26:[function(t,e,n){var r=t(23),i={};i.create=function(){var t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},i.clone=function(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},i.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=l*a-s*c,p=-l*o+s*u,d=c*o-a*u,f=n*h+r*p+i*d;
return f?(f=1/f,t[0]=h*f,t[1]=(-l*r+i*c)*f,t[2]=(s*r-i*a)*f,t[3]=p*f,t[4]=(l*n-i*u)*f,t[5]=(-s*n+i*o)*f,t[6]=d*f,t[7]=(-c*n+r*u)*f,t[8]=(a*n-r*o)*f,t):null},i.adjoint=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=a*l-s*c,t[1]=i*c-r*l,t[2]=r*s-i*a,t[3]=s*u-o*l,t[4]=n*l-i*u,t[5]=i*o-n*s,t[6]=o*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*o,t},i.determinant=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+n*(-c*i+a*s)+r*(u*i-o*s)},i.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],p=n[0],d=n[1],f=n[2],m=n[3],v=n[4],g=n[5],y=n[6],b=n[7],w=n[8];return t[0]=p*r+d*a+f*c,t[1]=p*i+d*s+f*l,t[2]=p*o+d*u+f*h,t[3]=m*r+v*a+g*c,t[4]=m*i+v*s+g*l,t[5]=m*o+v*u+g*h,t[6]=y*r+b*a+w*c,t[7]=y*i+b*s+w*l,t[8]=y*o+b*u+w*h,t},i.mul=i.multiply,i.translate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],p=n[0],d=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=p*r+d*a+c,t[7]=p*i+d*s+l,t[8]=p*o+d*u+h,t},i.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],p=Math.sin(n),d=Math.cos(n);return t[0]=d*r+p*a,t[1]=d*i+p*s,t[2]=d*o+p*u,t[3]=d*a-p*r,t[4]=d*s-p*i,t[5]=d*u-p*o,t[6]=c,t[7]=l,t[8]=h,t},i.scale=function(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},i.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},i.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,h=r*s,p=i*a,d=i*s,f=i*u,m=o*a,v=o*s,g=o*u;return t[0]=1-h-f,t[3]=l-g,t[6]=p+v,t[1]=l+g,t[4]=1-c-f,t[7]=d-m,t[2]=p-v,t[5]=d+m,t[8]=1-c-h,t},i.normalFromMat4=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],p=e[10],d=e[11],f=e[12],m=e[13],v=e[14],g=e[15],y=n*s-r*a,b=n*u-i*a,w=n*c-o*a,x=r*u-i*s,_=r*c-o*s,M=i*c-o*u,L=l*m-h*f,S=l*v-p*f,P=l*g-d*f,E=h*v-p*m,I=h*g-d*m,A=p*g-d*v,R=y*A-b*I+w*E+x*P-_*S+M*L;return R?(R=1/R,t[0]=(s*A-u*I+c*E)*R,t[1]=(u*P-a*A-c*S)*R,t[2]=(a*I-s*P+c*L)*R,t[3]=(i*I-r*A-o*E)*R,t[4]=(n*A-i*P+o*S)*R,t[5]=(r*P-n*I-o*L)*R,t[6]=(m*M-v*_+g*x)*R,t[7]=(v*w-f*M-g*b)*R,t[8]=(f*_-m*w+g*y)*R,t):null},i.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.exports=i},{23:23}],27:[function(t,e,n){var r=t(23),i={};i.create=function(){var t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.clone=function(t){var e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},i.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],p=e[10],d=e[11],f=e[12],m=e[13],v=e[14],g=e[15],y=n*s-r*a,b=n*u-i*a,w=n*c-o*a,x=r*u-i*s,_=r*c-o*s,M=i*c-o*u,L=l*m-h*f,S=l*v-p*f,P=l*g-d*f,E=h*v-p*m,I=h*g-d*m,A=p*g-d*v,R=y*A-b*I+w*E+x*P-_*S+M*L;return R?(R=1/R,t[0]=(s*A-u*I+c*E)*R,t[1]=(i*I-r*A-o*E)*R,t[2]=(m*M-v*_+g*x)*R,t[3]=(p*_-h*M-d*x)*R,t[4]=(u*P-a*A-c*S)*R,t[5]=(n*A-i*P+o*S)*R,t[6]=(v*w-f*M-g*b)*R,t[7]=(l*M-p*w+d*b)*R,t[8]=(a*I-s*P+c*L)*R,t[9]=(r*P-n*I-o*L)*R,t[10]=(f*_-m*w+g*y)*R,t[11]=(h*w-l*_-d*y)*R,t[12]=(s*S-a*E-u*L)*R,t[13]=(n*E-r*S+i*L)*R,t[14]=(m*b-f*x-v*y)*R,t[15]=(l*x-h*b+p*y)*R,t):null},i.adjoint=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],p=e[10],d=e[11],f=e[12],m=e[13],v=e[14],g=e[15];return t[0]=s*(p*g-d*v)-h*(u*g-c*v)+m*(u*d-c*p),t[1]=-(r*(p*g-d*v)-h*(i*g-o*v)+m*(i*d-o*p)),t[2]=r*(u*g-c*v)-s*(i*g-o*v)+m*(i*c-o*u),t[3]=-(r*(u*d-c*p)-s*(i*d-o*p)+h*(i*c-o*u)),t[4]=-(a*(p*g-d*v)-l*(u*g-c*v)+f*(u*d-c*p)),t[5]=n*(p*g-d*v)-l*(i*g-o*v)+f*(i*d-o*p),t[6]=-(n*(u*g-c*v)-a*(i*g-o*v)+f*(i*c-o*u)),t[7]=n*(u*d-c*p)-a*(i*d-o*p)+l*(i*c-o*u),t[8]=a*(h*g-d*m)-l*(s*g-c*m)+f*(s*d-c*h),t[9]=-(n*(h*g-d*m)-l*(r*g-o*m)+f*(r*d-o*h)),t[10]=n*(s*g-c*m)-a*(r*g-o*m)+f*(r*c-o*s),t[11]=-(n*(s*d-c*h)-a*(r*d-o*h)+l*(r*c-o*s)),t[12]=-(a*(h*v-p*m)-l*(s*v-u*m)+f*(s*p-u*h)),t[13]=n*(h*v-p*m)-l*(r*v-i*m)+f*(r*p-i*h),t[14]=-(n*(s*v-u*m)-a*(r*v-i*m)+f*(r*u-i*s)),t[15]=n*(s*p-u*h)-a*(r*p-i*h)+l*(r*u-i*s),t},i.determinant=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],h=t[10],p=t[11],d=t[12],f=t[13],m=t[14],v=t[15],g=e*a-n*o,y=e*s-r*o,b=e*u-i*o,w=n*s-r*a,x=n*u-i*a,_=r*u-i*s,M=c*f-l*d,L=c*m-h*d,S=c*v-p*d,P=l*m-h*f,E=l*v-p*f,I=h*v-p*m;return g*I-y*E+b*P+w*S-x*L+_*M},i.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],p=e[9],d=e[10],f=e[11],m=e[12],v=e[13],g=e[14],y=e[15],b=n[0],w=n[1],x=n[2],_=n[3];return t[0]=b*r+w*s+x*h+_*m,t[1]=b*i+w*u+x*p+_*v,t[2]=b*o+w*c+x*d+_*g,t[3]=b*a+w*l+x*f+_*y,b=n[4],w=n[5],x=n[6],_=n[7],t[4]=b*r+w*s+x*h+_*m,t[5]=b*i+w*u+x*p+_*v,t[6]=b*o+w*c+x*d+_*g,t[7]=b*a+w*l+x*f+_*y,b=n[8],w=n[9],x=n[10],_=n[11],t[8]=b*r+w*s+x*h+_*m,t[9]=b*i+w*u+x*p+_*v,t[10]=b*o+w*c+x*d+_*g,t[11]=b*a+w*l+x*f+_*y,b=n[12],w=n[13],x=n[14],_=n[15],t[12]=b*r+w*s+x*h+_*m,t[13]=b*i+w*u+x*p+_*v,t[14]=b*o+w*c+x*d+_*g,t[15]=b*a+w*l+x*f+_*y,t},i.mul=i.multiply,i.translate=function(t,e,n){var r,i,o,a,s,u,c,l,h,p,d,f,m=n[0],v=n[1],g=n[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*g+e[12],t[13]=e[1]*m+e[5]*v+e[9]*g+e[13],t[14]=e[2]*m+e[6]*v+e[10]*g+e[14],t[15]=e[3]*m+e[7]*v+e[11]*g+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],p=e[9],d=e[10],f=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=h,t[9]=p,t[10]=d,t[11]=f,t[12]=r*m+s*v+h*g+e[12],t[13]=i*m+u*v+p*g+e[13],t[14]=o*m+c*v+d*g+e[14],t[15]=a*m+l*v+f*g+e[15]),t},i.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.rotate=function(t,e,n,i){var o,a,s,u,c,l,h,p,d,f,m,v,g,y,b,w,x,_,M,L,S,P,E,I,A=i[0],R=i[1],F=i[2],T=Math.sqrt(A*A+R*R+F*F);return Math.abs(T)<r.EPSILON?null:(T=1/T,A*=T,R*=T,F*=T,o=Math.sin(n),a=Math.cos(n),s=1-a,u=e[0],c=e[1],l=e[2],h=e[3],p=e[4],d=e[5],f=e[6],m=e[7],v=e[8],g=e[9],y=e[10],b=e[11],w=A*A*s+a,x=R*A*s+F*o,_=F*A*s-R*o,M=A*R*s-F*o,L=R*R*s+a,S=F*R*s+A*o,P=A*F*s+R*o,E=R*F*s-A*o,I=F*F*s+a,t[0]=u*w+p*x+v*_,t[1]=c*w+d*x+g*_,t[2]=l*w+f*x+y*_,t[3]=h*w+m*x+b*_,t[4]=u*M+p*L+v*S,t[5]=c*M+d*L+g*S,t[6]=l*M+f*L+y*S,t[7]=h*M+m*L+b*S,t[8]=u*P+p*E+v*I,t[9]=c*P+d*E+g*I,t[10]=l*P+f*E+y*I,t[11]=h*P+m*E+b*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},i.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+h*r,t[7]=u*i+p*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=h*i-s*r,t[11]=p*i-u*r,t},i.rotateY=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],h=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-l*r,t[2]=s*i-h*r,t[3]=u*i-p*r,t[8]=o*r+c*i,t[9]=a*r+l*i,t[10]=s*r+h*i,t[11]=u*r+p*i,t},i.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+h*r,t[3]=u*i+p*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=h*i-s*r,t[7]=p*i-u*r,t},i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromRotation=function(t,e,n){var i,o,a,s=n[0],u=n[1],c=n[2],l=Math.sqrt(s*s+u*u+c*c);return Math.abs(l)<r.EPSILON?null:(l=1/l,s*=l,u*=l,c*=l,i=Math.sin(e),o=Math.cos(e),a=1-o,t[0]=s*s*a+o,t[1]=u*s*a+c*i,t[2]=c*s*a-u*i,t[3]=0,t[4]=s*u*a-c*i,t[5]=u*u*a+o,t[6]=c*u*a+s*i,t[7]=0,t[8]=s*c*a+u*i,t[9]=u*c*a-s*i,t[10]=c*c*a+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},i.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromRotationTranslation=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,l=r*s,h=r*u,p=r*c,d=i*u,f=i*c,m=o*c,v=a*s,g=a*u,y=a*c;return t[0]=1-(d+m),t[1]=h+y,t[2]=p-g,t[3]=0,t[4]=h-y,t[5]=1-(l+m),t[6]=f+v,t[7]=0,t[8]=p+g,t[9]=f-v,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},i.fromRotationTranslationScale=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,l=a+a,h=i*u,p=i*c,d=i*l,f=o*c,m=o*l,v=a*l,g=s*u,y=s*c,b=s*l,w=r[0],x=r[1],_=r[2];return t[0]=(1-(f+v))*w,t[1]=(p+b)*w,t[2]=(d-y)*w,t[3]=0,t[4]=(p-b)*x,t[5]=(1-(h+v))*x,t[6]=(m+g)*x,t[7]=0,t[8]=(d+y)*_,t[9]=(m-g)*_,t[10]=(1-(h+f))*_,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},i.fromRotationTranslationScaleOrigin=function(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,l=a+a,h=s+s,p=o*c,d=o*l,f=o*h,m=a*l,v=a*h,g=s*h,y=u*c,b=u*l,w=u*h,x=r[0],_=r[1],M=r[2],L=i[0],S=i[1],P=i[2];return t[0]=(1-(m+g))*x,t[1]=(d+w)*x,t[2]=(f-b)*x,t[3]=0,t[4]=(d-w)*_,t[5]=(1-(p+g))*_,t[6]=(v+y)*_,t[7]=0,t[8]=(f+b)*M,t[9]=(v-y)*M,t[10]=(1-(p+m))*M,t[11]=0,t[12]=n[0]+L-(t[0]*L+t[4]*S+t[8]*P),t[13]=n[1]+S-(t[1]*L+t[5]*S+t[9]*P),t[14]=n[2]+P-(t[2]*L+t[6]*S+t[10]*P),t[15]=1,t},i.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,h=r*s,p=i*a,d=i*s,f=i*u,m=o*a,v=o*s,g=o*u;return t[0]=1-h-f,t[1]=l+g,t[2]=p-v,t[3]=0,t[4]=l-g,t[5]=1-c-f,t[6]=d+m,t[7]=0,t[8]=p+v,t[9]=d-m,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.frustum=function(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t},i.perspective=function(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},i.perspectiveFromFieldOfView=function(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((a-s)*u*.5),t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},i.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t},i.lookAt=function(t,e,n,o){var a,s,u,c,l,h,p,d,f,m,v=e[0],g=e[1],y=e[2],b=o[0],w=o[1],x=o[2],_=n[0],M=n[1],L=n[2];return Math.abs(v-_)<r.EPSILON&&Math.abs(g-M)<r.EPSILON&&Math.abs(y-L)<r.EPSILON?i.identity(t):(p=v-_,d=g-M,f=y-L,m=1/Math.sqrt(p*p+d*d+f*f),p*=m,d*=m,f*=m,a=w*f-x*d,s=x*p-b*f,u=b*d-w*p,m=Math.sqrt(a*a+s*s+u*u),m?(m=1/m,a*=m,s*=m,u*=m):(a=0,s=0,u=0),c=d*u-f*s,l=f*a-p*u,h=p*s-d*a,m=Math.sqrt(c*c+l*l+h*h),m?(m=1/m,c*=m,l*=m,h*=m):(c=0,l=0,h=0),t[0]=a,t[1]=c,t[2]=p,t[3]=0,t[4]=s,t[5]=l,t[6]=d,t[7]=0,t[8]=u,t[9]=h,t[10]=f,t[11]=0,t[12]=-(a*v+s*g+u*y),t[13]=-(c*v+l*g+h*y),t[14]=-(p*v+d*g+f*y),t[15]=1,t)},i.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.exports=i},{23:23}],28:[function(t,e,n){var r=t(23),i=t(26),o=t(30),a=t(31),s={};s.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),n=o.fromValues(0,1,0);return function(r,i,a){var u=o.dot(i,a);return-.999999>u?(o.cross(t,e,i),o.length(t)<1e-6&&o.cross(t,n,i),o.normalize(t,t),s.setAxisAngle(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(o.cross(t,i,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,s.normalize(r,r))}}(),s.setAxes=function(){var t=i.create();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],s.normalize(e,s.fromMat3(e,t))}}(),s.clone=a.clone,s.fromValues=a.fromValues,s.copy=a.copy,s.set=a.set,s.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.setAxisAngle=function(t,e,n){n=.5*n;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t},s.add=a.add,s.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+a*s+i*c-o*u,t[1]=i*l+a*u+o*s-r*c,t[2]=o*l+a*c+r*u-i*s,t[3]=a*l-r*s-i*u-o*c,t},s.mul=s.multiply,s.scale=a.scale,s.rotateX=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t},s.rotateY=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t},s.rotateZ=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},s.calculateW=function(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t},s.dot=a.dot,s.lerp=a.lerp,s.slerp=function(t,e,n,r){var i,o,a,s,u,c=e[0],l=e[1],h=e[2],p=e[3],d=n[0],f=n[1],m=n[2],v=n[3];return o=c*d+l*f+h*m+p*v,0>o&&(o=-o,d=-d,f=-f,m=-m,v=-v),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*c+u*d,t[1]=s*l+u*f,t[2]=s*h+u*m,t[3]=s*p+u*v,t},s.sqlerp=function(){var t=s.create(),e=s.create();return function(n,r,i,o,a,u){return s.slerp(t,r,a,u),s.slerp(e,i,o,u),s.slerp(n,t,e,2*u*(1-u)),n}}(),s.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t},s.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},s.length=a.length,s.len=s.length,s.squaredLength=a.squaredLength,s.sqrLen=s.squaredLength,s.normalize=a.normalize,s.fromMat3=function(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t},s.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exports=s},{23:23,26:26,30:30,31:31}],29:[function(t,e,n){var r=t(23),i={};i.create=function(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},i.clone=function(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},i.fromValues=function(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},i.set=function(t,e,n){return t[0]=e,t[1]=n,t},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},i.sub=i.subtract,i.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},i.mul=i.multiply,i.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},i.div=i.divide,i.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},i.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},i.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},i.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},i.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)},i.dist=i.distance,i.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},i.len=i.length,i.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},i.normalize=function(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},i.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},i.lerp=function(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t},i.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},i.transformMat2=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t},i.transformMat2d=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t},i.transformMat3=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t},i.transformMat4=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t},i.forEach=function(){var t=i.create();return function(e,n,r,i,o,a){var s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;u>s;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}(),i.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exports=i},{23:23}],30:[function(t,e,n){var r=t(23),i={};i.create=function(){var t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},i.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},i.fromValues=function(t,e,n){var i=new r.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=n,i},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},i.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},i.sub=i.subtract,i.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},i.mul=i.multiply,i.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},i.div=i.divide,i.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},i.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},i.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},i.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},i.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)},i.dist=i.distance,i.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)},i.len=i.length,i.squaredLength=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},i.normalize=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},i.cross=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},i.lerp=function(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t},i.hermite=function(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),l=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*l,t},i.bezier=function(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,l=3*o*s,h=3*u*a,p=u*o;return t[0]=e[0]*c+n[0]*l+r[0]*h+i[0]*p,t[1]=e[1]*c+n[1]*l+r[1]*h+i[1]*p,t[2]=e[2]*c+n[2]*l+r[2]*h+i[2]*p,t},i.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI,i=2*r.RANDOM()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=i*e,t},i.transformMat4=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t},i.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},i.transformQuat=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,h=c*i+u*r-a*o,p=c*o+a*i-s*r,d=-a*r-s*i-u*o;return t[0]=l*c+d*-a+h*-u-p*-s,t[1]=h*c+d*-s+p*-a-l*-u,t[2]=p*c+d*-u+l*-s-h*-a,t},i.rotateX=function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},i.rotateY=function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},i.rotateZ=function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},i.forEach=function(){var t=i.create();return function(e,n,r,i,o,a){var s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;u>s;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),i.angle=function(t,e){var n=i.fromValues(t[0],t[1],t[2]),r=i.fromValues(e[0],e[1],e[2]);i.normalize(n,n),i.normalize(r,r);var o=i.dot(n,r);return o>1?0:Math.acos(o)},i.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exports=i},{23:23}],31:[function(t,e,n){var r=t(23),i={};i.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},i.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.fromValues=function(t,e,n,i){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},i.sub=i.subtract,i.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},i.mul=i.multiply,i.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},i.div=i.divide,i.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},i.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},i.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},i.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},i.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+o*o)},i.dist=i.distance,i.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)},i.len=i.length,i.squaredLength=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},i.normalize=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},i.lerp=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t},i.random=function(t,e){return e=e||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),i.normalize(t,t),i.scale(t,t,e),t},i.transformMat4=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t},i.transformQuat=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,h=c*i+u*r-a*o,p=c*o+a*i-s*r,d=-a*r-s*i-u*o;return t[0]=l*c+d*-a+h*-u-p*-s,t[1]=h*c+d*-s+p*-a-l*-u,t[2]=p*c+d*-u+l*-s-h*-a,t[3]=e[3],t},i.forEach=function(){var t=i.create();return function(e,n,r,i,o,a){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;u>s;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),i.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exports=i},{23:23}],32:[function(t,e,n){(function(t){function n(){this._listeners=[]}function r(t){t.sort(function(t,e){return t=t.p,e=e.p,t>e?1:t>e?-1:0})}function i(t,e,n,i){if(!t)throw c;n=n||0;for(var o,a,s,u=this._listeners,h=u.length;h--;)if(o=u[h],o.f===t&&o.c===e)return!1;"function"==typeof n&&(a=n,n=i,s=4),u.unshift({f:t,c:e,p:n,r:a||t,a:l.call(arguments,s||3),j:0}),r(u)}function o(e,n,r,o){if(!e)throw c;var a=this,s=function(){return a.remove.call(a,e,n),e.apply(n,l.call(arguments,0))};o=l.call(arguments,0),1===o.length&&o.push(t),o.splice(2,0,s),i.apply(a,o)}function a(t,e){if(!t)return this._listeners.length=0,!0;for(var n,r=this._listeners,i=r.length;i--;)if(n=r[i],n.f===t&&(!e||n.c===e))return n.j=1,r.splice(i,1),!0;return!1}function s(t){t=l.call(arguments,0);for(var e,n,r=this._listeners,i=r.length;i--;)if(e=r[i],e&&!e.j&&(e.j=1,e.r.apply(e.c,e.a.concat(t))===!1)){n=e;break}for(r=this._listeners,i=r.length;i--;)r[i].j=0;return n}var u=n.prototype;u.add=i,u.addOnce=o,u.remove=a,u.dispatch=s;var c="Callback function is missing!",l=Array.prototype.slice;"undefined"!=typeof e&&(e.exports=n)})()},{}],33:[function(t,e,n){e.exports=t(34),t(40),t(39),t(41),t(37),t(42),t(36),t(38)},{34:34,36:36,37:37,38:38,39:39,40:40,41:41,42:42}],34:[function(t,e,n){function r(){this.isLoading=!1,this.totalWeight=0,this.loadedWeight=0,this.itemUrls={},this.itemList=[],this.loadingSignal=new w}function i(t,e){var n,r,i,o,a,s=d(t,e);for(n=0,i=s.length;i>n;n++)for(a=s[n],r=0,o=a.items.length;o>r;r++)this.add(a.items[r],{type:a.type});return s}function o(t,e){var n=M[t];return n||(n=h(t,e&&e.type?e.type:f(t).type,e)),e&&e.onLoad&&n.onLoaded.addOnce(e.onLoad),this.itemUrls[t]||(this.itemUrls[t]=n,this.itemList.push(n),this.totalWeight+=n.weight),n}function a(t,e){var n=M[t];return n||(n=h(t,e&&e.type?e.type:f(t).type,e)),e&&e.onLoad&&n.onLoaded.addOnce(e.onLoad),L[t]?n.dispatch():n.isStartLoaded||n.load(),n}function s(t){t&&this.loadingSignal.add(t),this.isLoading=!0;var e=this.itemList.length;if(e)for(var n,r=this.itemList.splice(0,this.itemList.length),i=0;e>i;i++)n=r[i],n.onLoaded.addOnce(l,this,-1024,n,r),n.hasLoading&&n.loadingSignal.add(u,this,-1024,n,r,b),L[n.url]?n.dispatch(l):n.isStartLoaded||n.load();else l.call(this,b,this.itemList)}function u(t,e,n,r,i){(!t||t.isLoaded||1!==r)&&(i===b&&(this.loadedWeight=c(e),i=this.loadedWeight/this.totalWeight),n=n||this.loadingSignal,n.dispatch(i,t))}function c(t){for(var e=0,n=0,r=t.length;r>n;n++)e+=t[n].loadedWeight;return e}function l(t,e){this.loadedWeight=c(e);var n=this.loadingSignal;this.loadedWeight===this.totalWeight?(this.isLoading=!1,this.loadedWeight=0,this.totalWeight=0,this.loadingSignal=new w,this._onLoading(t,e,n,1,1)):this._onLoading(t,e,n,1,this.loadedWeight/this.totalWeight)}function h(t,e,n){return new P[e](t,n)}function p(t){P[t.type]||(S.push(t),P[t.type]=t)}function d(t,e){var n,r,i=t.length,o=[];if(i&&"string"!=typeof t)for(n=0;i>n;n++)r=f(t[n],e),r&&(o=o.concat(r));else r=f(t,e),r&&(o=o.concat(r));return o}function f(t,e){var n,r,i,o,a;if(e)o=P[e],i=o.retrieve(t);else for(n=0,r=S.length;r>n;n++){if(o=S[n],a=o.type,"string"==typeof t){if(m(t,o)){i=[t];break}}else if(i=o.retrieve(t),i&&i.length&&"string"==typeof i[0]&&m(i[0],o))break;i=b,a=b}return i?{type:e||a,items:i}:void 0}function m(t,e){if(t){for(var n=v(t),r=e.extensions,i=r.length;i--;)if(n===r[i])return!0;return!1}}function v(t){return t.split(".").pop().split(/\#|\?/)[0]}function g(){return new r}function y(){var t=[],e=[];for(var n in M)t.push(n),L[n]||e.push(M[n]);console.log({added:t,notLoaded:e})}var b,w=t(32),x=r.prototype;x.addChunk=i,x.add=o,x.load=a,x.start=s,x._onLoading=u;var _=e.exports=g();_.version="0.1.14",_.register=p,_.retrieveAll=d,_.retrieve=f,_.testExtensions=m,_.create=g,_.load=a,_.check=y;var M=_.addedItems={},L=_.loadedItems={},S=_.ITEM_CLASS_LIST=[],P=_.ITEM_CLASSES={}},{32:32}],35:[function(t,e,n){function r(t,e){if(t){this.url=t,this.loadedWeight=0,this.weight=1;for(var n in e)this[n]=e[n];this.type||(this.type=this.constructor.type),this.hasLoading&&(this.loadingSignal=new u,this.loadingSignal.add(a,this),this.onLoading&&this.loadingSignal.add(this.onLoading));var r=this;this.boundOnLoad=function(){r._onLoad()},this.onLoaded=new u,c.addedItems[t]=this}}function i(){this.isStartLoaded=!0}function o(){this.isLoaded=!0,this.loadedWeight=this.weight,c.loadedItems[this.url]=this,this.onLoaded.dispatch(this.content)}function a(t){this.loadedWeight=this.weight*t}function s(){this.hasLoading&&this.loadingSignal.remove(),this.onLoaded.dispatch(this.content)}var u=t(32),c=t(34);e.exports=r;var l=r.prototype;l.load=i,l._onLoad=o,l._onLoading=a,l.dispatch=s,r.extensions=[],r.retrieve=function(){return!1}},{32:32,34:34}],36:[function(t,e,n){
function r(t,e){t&&(s.constructor.call(this,t,e),!this.loadFunc&&console&&console[console.error||console.log]("require loadFunc in the config object."))}function i(){var t=this;this.loadFunc(this.url,function(e){t.content=e,s._onLoad.call(t)},this.loadingSignal)}var o=t(35),a=t(34);e.exports=r,r.type="any",r.extensions=[],a.register(r),r.retrieve=function(){return!1};var s=o.prototype,u=r.prototype=new o;u.constructor=r,u.load=i},{34:34,35:35}],37:[function(t,e,n){function r(t,e){if(t){this.loadThrough=e&&e.loadThrough!==a?e.loadThrough:!0,c.constructor.apply(this,arguments);try{this.content=new Audio}catch(n){this.content=document.createElement("audio")}}}function i(){c.load.apply(this,arguments);var t=this,e=t.content;e.src=this.url,this.loadThrough?e.addEventListener("canplaythrough",this.boundOnLoad,!1):e.addEventListener("canplay",this.boundOnLoad,!1),e.load()}function o(){this.content.removeEventListener("canplaythrough",this.boundOnLoad,!1),this.content.removeEventListener("canplay",this.boundOnLoad,!1),this.isLoaded||c._onLoad.call(this)}var a,s=t(35),u=t(34);e.exports=r,r.type="audio",r.extensions=["mp3","ogg"],u.register(r),r.retrieve=function(t){return!1};var c=s.prototype,l=r.prototype=new s;l.constructor=r,l.load=i,l._onLoad=o},{34:34,35:35}],38:[function(t,e,n){function r(t,e){t&&(l.constructor.apply(this,arguments),this.content=new Image)}function i(){l.load.apply(this,arguments);var t=this.content;t.src=this.url,t.width?this._onLoad():t.onload=this.boundOnLoad}function o(){delete this.content.onload,this.width=this.content.width,this.height=this.content.height,l._onLoad.call(this)}function a(t){return 0!==t.indexOf("data:")}var s=t(35),u=t(16),c=t(34);e.exports=r;var l=s.prototype,h=r.prototype=new s;h.constructor=r,h.load=i,h._onLoad=o,r.retrieve=function(t){if(t.nodeType&&t.style){var e=[];"img"==t.nodeName.toLowerCase()&&t.src.indexOf(";")<0&&e.push(t.src),u(t,"background-image").replace(/s?url\(\s*?[\'\"]?([^;]*?)[\'\"]?\s*?\)/g,function(t,n){e.push(n)});for(var n=e.length;n--;)a(e[n])||e.splice(n,1);return e.length?e:!1}return"string"==typeof t?[t]:!1},r.type="image",r.extensions=["jpg","gif","png"],c.register(r)},{16:16,34:34,35:35}],39:[function(require,module,exports){function JSONItem(t){t&&_super.constructor.apply(this,arguments)}function _onLoad(){this.content&&(this.content=window.JSON&&window.JSON.parse?JSON.parse(this.content.toString()):eval(this.content.toString())),_super._onLoad.call(this)}var TextItem=require(41),quickLoader=require(34);module.exports=JSONItem,JSONItem.type="json",JSONItem.extensions=["json"],quickLoader.register(JSONItem),JSONItem.retrieve=function(){return!1};var _super=TextItem.prototype,_p=JSONItem.prototype=new TextItem;_p.constructor=JSONItem,_p._onLoad=_onLoad},{34:34,41:41}],40:[function(t,e,n){function r(){return"_jsonp"+(new Date).getTime()+~~(1e8*Math.random())}function i(t){t&&u.constructor.apply(this,arguments)}function o(t){u.load.apply(this,arguments);var e=this,n=this.url.lastIndexOf("=")+1,i=this.url.substr(0,n),o=this.url.substr(n);0===o.length?(o=r(),this.jsonpCallback=t):this.jsonpCallback=this.jsonpCallback||window[o],window[o]=function(t){a.parentNode&&a.parentNode.removeChild(a),e.content=t,e._onLoad()};var a=document.createElement("script");a.type="text/javascript",a.src=i+o,document.getElementsByTagName("head")[0].appendChild(a)}var a=t(35),s=t(34);e.exports=i,i.type="jsonp",i.extensions=[],s.register(i),i.retrieve=function(t){return"string"==typeof t&&t.indexOf("=")>-1?[t]:!1};var u=a.prototype,c=i.prototype=new a;c.constructor=i,c.load=o},{34:34,35:35}],41:[function(t,e,n){function r(t){t&&p.constructor.apply(this,arguments)}function i(){p.load.apply(this,arguments);var t,e=this;t=h?this.xmlhttp=new XMLHttpRequest:this.xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),this.hasLoading&&(t.onprogress=function(t){e._onXmlHttpProgress(t)}),t.onreadystatechange=function(){e._onXmlHttpChange()},t.open("GET",this.url,!0),h?t.send(null):t.send()}function o(t){this.loadingSignal.dispatch(t.loaded/t.total)}function a(){4==this.xmlhttp.readyState&&200==this.xmlhttp.status&&(this.content=this.xmlhttp.responseText,this._onLoad())}function s(){this.content&&(this.xmlhttp=u),p._onLoad.call(this)}var u,c=t(35),l=t(34),h=!!window.XMLHttpRequest;e.exports=r,r.type="text",r.extensions=["html","txt","svg"],l.register(r),r.retrieve=function(){return!1};var p=c.prototype,d=r.prototype=new c;d.constructor=r,d.load=i,d._onXmlHttpChange=a,d._onXmlHttpProgress=o,d._onLoad=s},{34:34,35:35}],42:[function(t,e,n){function r(t,e){if(t){this.loadThrough=e&&e.loadThrough!==a?e.loadThrough:!0,c.constructor.apply(this,arguments);try{this.content=new Video}catch(n){this.content=document.createElement("video")}}}function i(){c.load.apply(this,arguments);var t=this.content;t.preload="auto",t.src=this.url,this.loadThrough?t.addEventListener("canplaythrough",this.boundOnLoad,!1):t.addEventListener("canplay",this.boundOnLoad,!1),t.load()}function o(){this.content.removeEventListener("canplaythrough",this.boundOnLoad),this.content.removeEventListener("canplay",this.boundOnLoad),this.isLoaded||c._onLoad.call(this)}var a,s=t(35),u=t(34);e.exports=r,r.type="video",r.extensions=["mp4","webm","ogv"],u.register(r),r.retrieve=function(t){return!1};var c=s.prototype,l=r.prototype=new s;l.constructor=r,l.load=i,l._onLoad=o},{34:34,35:35}],43:[function(t,e,n){for(var r=t(44),i="undefined"==typeof window?{}:window,o=["moz","webkit"],a="AnimationFrame",s=i["request"+a],u=i["cancel"+a]||i["cancelRequest"+a],c=0;c<o.length&&!s;c++)s=i[o[c]+"Request"+a],u=i[o[c]+"Cancel"+a]||i[o[c]+"CancelRequest"+a];if(!s||!u){var l=0,h=0,p=[],d=1e3/60;s=function(t){if(0===p.length){var e=r(),n=Math.max(0,d-(e-l));l=n+e,setTimeout(function(){var t=p.slice(0);p.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(l)}catch(n){setTimeout(function(){throw n},0)}},Math.round(n))}return p.push({handle:++h,callback:t,cancelled:!1}),h},u=function(t){for(var e=0;e<p.length;e++)p[e].handle===t&&(p[e].cancelled=!0)}}e.exports=function(t){return s.call(i,t)},e.exports.cancel=function(){u.apply(i,arguments)}},{44:44}],44:[function(t,e,n){(function(t){(function(){var n,r,i;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-i)/1e6},r=t.hrtime,n=function(){var t;return t=r(),1e9*t[0]+t[1]},i=n()):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,t(15))},{15:15}],45:[function(t,e,n){e.exports=window.THREE},{}],46:[function(t,e,n){(function(){function t(t){function e(e,n,r,i,o,a){for(;o>=0&&a>o;o+=t){var s=i?i[o]:o;r=n(r,e[s],s,e)}return r}return function(n,r,i,o){r=x(r,o,4);var a=!I(n)&&w.keys(n),s=(a||n).length,u=t>0?0:s-1;return arguments.length<3&&(i=n[a?a[u]:u],u+=t),e(n,r,i,a,u,s)}}function r(t){return function(e,n,r){n=_(n,r);for(var i=E(e),o=t>0?0:i-1;o>=0&&i>o;o+=t)if(n(e[o],o,e))return o;return-1}}function i(t,e,n){return function(r,i,o){var a=0,s=E(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=e(p.call(r,a,s),w.isNaN),o>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&s>o;o+=t)if(r[o]===i)return o;return-1}}function o(t,e){var n=O.length,r=t.constructor,i=w.isFunction(r)&&r.prototype||c,o="constructor";for(w.has(t,o)&&!w.contains(e,o)&&e.push(o);n--;)o=O[n],o in t&&t[o]!==i[o]&&!w.contains(e,o)&&e.push(o)}var a=this,s=a._,u=Array.prototype,c=Object.prototype,l=Function.prototype,h=u.push,p=u.slice,d=c.toString,f=c.hasOwnProperty,m=Array.isArray,v=Object.keys,g=l.bind,y=Object.create,b=function(){},w=function(t){return t instanceof w?t:this instanceof w?void(this._wrapped=t):new w(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=w),n._=w):a._=w,w.VERSION="1.8.3";var x=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return null==t?w.identity:w.isFunction(t)?x(t,e,n):w.isObject(t)?w.matcher(t):w.property(t)};w.iteratee=function(t,e){return _(t,e,1/0)};var M=function(t,e){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var o=arguments[i],a=t(o),s=a.length,u=0;s>u;u++){var c=a[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}},L=function(t){if(!w.isObject(t))return{};if(y)return y(t);b.prototype=t;var e=new b;return b.prototype=null,e},S=function(t){return function(e){return null==e?void 0:e[t]}},P=Math.pow(2,53)-1,E=S("length"),I=function(t){var e=E(t);return"number"==typeof e&&e>=0&&P>=e};w.each=w.forEach=function(t,e,n){e=x(e,n);var r,i;if(I(t))for(r=0,i=t.length;i>r;r++)e(t[r],r,t);else{var o=w.keys(t);for(r=0,i=o.length;i>r;r++)e(t[o[r]],o[r],t)}return t},w.map=w.collect=function(t,e,n){e=_(e,n);for(var r=!I(t)&&w.keys(t),i=(r||t).length,o=Array(i),a=0;i>a;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o},w.reduce=w.foldl=w.inject=t(1),w.reduceRight=w.foldr=t(-1),w.find=w.detect=function(t,e,n){var r;return r=I(t)?w.findIndex(t,e,n):w.findKey(t,e,n),void 0!==r&&-1!==r?t[r]:void 0},w.filter=w.select=function(t,e,n){var r=[];return e=_(e,n),w.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},w.reject=function(t,e,n){return w.filter(t,w.negate(_(e)),n)},w.every=w.all=function(t,e,n){e=_(e,n);for(var r=!I(t)&&w.keys(t),i=(r||t).length,o=0;i>o;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},w.some=w.any=function(t,e,n){e=_(e,n);for(var r=!I(t)&&w.keys(t),i=(r||t).length,o=0;i>o;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},w.contains=w.includes=w.include=function(t,e,n,r){return I(t)||(t=w.values(t)),("number"!=typeof n||r)&&(n=0),w.indexOf(t,e,n)>=0},w.invoke=function(t,e){var n=p.call(arguments,2),r=w.isFunction(e);return w.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},w.pluck=function(t,e){return w.map(t,w.property(e))},w.where=function(t,e){return w.filter(t,w.matcher(e))},w.findWhere=function(t,e){return w.find(t,w.matcher(e))},w.max=function(t,e,n){var r,i,o=-(1/0),a=-(1/0);if(null==e&&null!=t){t=I(t)?t:w.values(t);for(var s=0,u=t.length;u>s;s++)r=t[s],r>o&&(o=r)}else e=_(e,n),w.each(t,function(t,n,r){i=e(t,n,r),(i>a||i===-(1/0)&&o===-(1/0))&&(o=t,a=i)});return o},w.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t){t=I(t)?t:w.values(t);for(var s=0,u=t.length;u>s;s++)r=t[s],o>r&&(o=r)}else e=_(e,n),w.each(t,function(t,n,r){i=e(t,n,r),(a>i||i===1/0&&o===1/0)&&(o=t,a=i)});return o},w.shuffle=function(t){for(var e,n=I(t)?t:w.values(t),r=n.length,i=Array(r),o=0;r>o;o++)e=w.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},w.sample=function(t,e,n){return null==e||n?(I(t)||(t=w.values(t)),t[w.random(t.length-1)]):w.shuffle(t).slice(0,Math.max(0,e))},w.sortBy=function(t,e,n){return e=_(e,n),w.pluck(w.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var A=function(t){return function(e,n,r){var i={};return n=_(n,r),w.each(e,function(r,o){var a=n(r,o,e);t(i,r,a)}),i}};w.groupBy=A(function(t,e,n){w.has(t,n)?t[n].push(e):t[n]=[e]}),w.indexBy=A(function(t,e,n){t[n]=e}),w.countBy=A(function(t,e,n){w.has(t,n)?t[n]++:t[n]=1}),w.toArray=function(t){return t?w.isArray(t)?p.call(t):I(t)?w.map(t,w.identity):w.values(t):[]},w.size=function(t){return null==t?0:I(t)?t.length:w.keys(t).length},w.partition=function(t,e,n){e=_(e,n);var r=[],i=[];return w.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},w.first=w.head=w.take=function(t,e,n){return null!=t?null==e||n?t[0]:w.initial(t,t.length-e):void 0},w.initial=function(t,e,n){return p.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},w.last=function(t,e,n){return null!=t?null==e||n?t[t.length-1]:w.rest(t,Math.max(0,t.length-e)):void 0},w.rest=w.tail=w.drop=function(t,e,n){return p.call(t,null==e||n?1:e)},w.compact=function(t){return w.filter(t,w.identity)};var R=function(t,e,n,r){for(var i=[],o=0,a=r||0,s=E(t);s>a;a++){var u=t[a];if(I(u)&&(w.isArray(u)||w.isArguments(u))){e||(u=R(u,e,n));var c=0,l=u.length;for(i.length+=l;l>c;)i[o++]=u[c++]}else n||(i[o++]=u)}return i};w.flatten=function(t,e){return R(t,e,!1)},w.without=function(t){return w.difference(t,p.call(arguments,1))},w.uniq=w.unique=function(t,e,n,r){w.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=_(n,r));for(var i=[],o=[],a=0,s=E(t);s>a;a++){var u=t[a],c=n?n(u,a,t):u;e?(a&&o===c||i.push(u),o=c):n?w.contains(o,c)||(o.push(c),i.push(u)):w.contains(i,u)||i.push(u)}return i},w.union=function(){return w.uniq(R(arguments,!0,!0))},w.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=E(t);i>r;r++){var o=t[r];if(!w.contains(e,o)){for(var a=1;n>a&&w.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},w.difference=function(t){var e=R(arguments,!0,!0,1);return w.filter(t,function(t){return!w.contains(e,t)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(t){for(var e=t&&w.max(t,E).length||0,n=Array(e),r=0;e>r;r++)n[r]=w.pluck(t,r);return n},w.object=function(t,e){for(var n={},r=0,i=E(t);i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},w.findIndex=r(1),w.findLastIndex=r(-1),w.sortedIndex=function(t,e,n,r){n=_(n,r,1);for(var i=n(e),o=0,a=E(t);a>o;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o},w.indexOf=i(1,w.findIndex,w.sortedIndex),w.lastIndexOf=i(-1,w.findLastIndex),w.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;r>o;o++,t+=n)i[o]=t;return i};var F=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=L(t.prototype),a=t.apply(o,i);return w.isObject(a)?a:o};w.bind=function(t,e){if(g&&t.bind===g)return g.apply(t,p.call(arguments,1));if(!w.isFunction(t))throw new TypeError("Bind must be called on a function");var n=p.call(arguments,2),r=function(){return F(t,r,e,this,n.concat(p.call(arguments)))};return r},w.partial=function(t){var e=p.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),a=0;i>a;a++)o[a]=e[a]===w?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return F(t,n,this,this,o)};return n},w.bindAll=function(t){var e,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(e=1;r>e;e++)n=arguments[e],t[n]=w.bind(t[n],t);return t},w.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return w.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},w.delay=function(t,e){var n=p.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},w.defer=w.partial(w.delay,w,1),w.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:w.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var c=w.now();s||n.leading!==!1||(s=c);var l=e-(c-s);return r=this,i=arguments,0>=l||l>e?(a&&(clearTimeout(a),a=null),s=c,o=t.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(u,l)),o}},w.debounce=function(t,e,n){var r,i,o,a,s,u=function(){var c=w.now()-a;e>c&&c>=0?r=setTimeout(u,e-c):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=w.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(s=t.apply(o,i),o=i=null),s}},w.wrap=function(t,e){return w.partial(e,t)},w.negate=function(t){return function(){return!t.apply(this,arguments)}},w.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},w.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},w.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},w.once=w.partial(w.before,2);var T=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(t){if(!w.isObject(t))return[];if(v)return v(t);var e=[];for(var n in t)w.has(t,n)&&e.push(n);return T&&o(t,e),e},w.allKeys=function(t){if(!w.isObject(t))return[];var e=[];for(var n in t)e.push(n);return T&&o(t,e),e},w.values=function(t){for(var e=w.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},w.mapObject=function(t,e,n){e=_(e,n);for(var r,i=w.keys(t),o=i.length,a={},s=0;o>s;s++)r=i[s],a[r]=e(t[r],r,t);return a},w.pairs=function(t){for(var e=w.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},w.invert=function(t){for(var e={},n=w.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},w.functions=w.methods=function(t){var e=[];for(var n in t)w.isFunction(t[n])&&e.push(n);return e.sort()},w.extend=M(w.allKeys),w.extendOwn=w.assign=M(w.keys),w.findKey=function(t,e,n){e=_(e,n);for(var r,i=w.keys(t),o=0,a=i.length;a>o;o++)if(r=i[o],e(t[r],r,t))return r},w.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;w.isFunction(e)?(i=w.allKeys(a),r=x(e,n)):(i=R(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,u=i.length;u>s;s++){var c=i[s],l=a[c];r(l,c,a)&&(o[c]=l)}return o},w.omit=function(t,e,n){if(w.isFunction(e))e=w.negate(e);else{var r=w.map(R(arguments,!1,!1,1),String);e=function(t,e){return!w.contains(r,e)}}return w.pick(t,e,n)},w.defaults=M(w.allKeys,!0),w.create=function(t,e){var n=L(t);return e&&w.extendOwn(n,e),n},w.clone=function(t){return w.isObject(t)?w.isArray(t)?t.slice():w.extend({},t):t},w.tap=function(t,e){return e(t),t},w.isMatch=function(t,e){var n=w.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;r>o;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var C=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof w&&(t=t._wrapped),e instanceof w&&(e=e._wrapped);var i=d.call(t);if(i!==d.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(w.isFunction(a)&&a instanceof a&&w.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if(u=t.length,u!==e.length)return!1;for(;u--;)if(!C(t[u],e[u],n,r))return!1}else{var c,l=w.keys(t);if(u=l.length,w.keys(e).length!==u)return!1;for(;u--;)if(c=l[u],!w.has(e,c)||!C(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0};w.isEqual=function(t,e){return C(t,e)},w.isEmpty=function(t){return null==t?!0:I(t)&&(w.isArray(t)||w.isString(t)||w.isArguments(t))?0===t.length:0===w.keys(t).length},w.isElement=function(t){return!(!t||1!==t.nodeType)},w.isArray=m||function(t){return"[object Array]"===d.call(t)},w.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){w["is"+t]=function(e){return d.call(e)==="[object "+t+"]"}}),w.isArguments(arguments)||(w.isArguments=function(t){return w.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(w.isFunction=function(t){return"function"==typeof t||!1}),w.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},w.isNaN=function(t){return w.isNumber(t)&&t!==+t},w.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===d.call(t)},w.isNull=function(t){return null===t},w.isUndefined=function(t){return void 0===t},w.has=function(t,e){return null!=t&&f.call(t,e)},w.noConflict=function(){return a._=s,this},w.identity=function(t){return t},w.constant=function(t){return function(){return t}},w.noop=function(){},w.property=S,w.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},w.matcher=w.matches=function(t){return t=w.extendOwn({},t),function(e){return w.isMatch(e,t)}},w.times=function(t,e,n){var r=Array(Math.max(0,t));e=x(e,n,1);for(var i=0;t>i;i++)r[i]=e(i);return r},w.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},w.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},k=w.invert(D),B=function(t){var e=function(e){return t[e]},n="(?:"+w.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};w.escape=B(D),w.unescape=B(k),w.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),w.isFunction(r)?r.call(t):r};var z=0;w.uniqueId=function(t){var e=++z+"";return t?t+e:e},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\u2028|\u2029/g,q=function(t){return"\\"+V[t]};w.template=function(t,e,n){!e&&n&&(e=n),e=w.defaults({},e,w.templateSettings);var r=RegExp([(e.escape||N).source,(e.interpolate||N).source,(e.evaluate||N).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,s){return o+=t.slice(i,s).replace(j,q),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(s){throw s.source=o,s}var u=function(t){return a.call(this,t,w)},c=e.variable||"obj";return u.source="function("+c+"){\n"+o+"}",u},w.chain=function(t){var e=w(t);return e._chain=!0,e};var U=function(t,e){return t._chain?w(e).chain():e};w.mixin=function(t){w.each(w.functions(t),function(e){var n=w[e]=t[e];w.prototype[e]=function(){var t=[this._wrapped];return h.apply(t,arguments),U(this,n.apply(w,t))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=u[t];w.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],U(this,n)}}),w.each(["concat","join","slice"],function(t){var e=u[t];w.prototype[t]=function(){return U(this,e.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return w})}).call(this)},{}],47:[function(t,e,n){function r(t,e,n){var r;return r=e?new o(t,e):new o(t)}var i=function(){return this}(),o=i.WebSocket||i.MozWebSocket;e.exports=o?r:null,o&&(r.prototype=o.prototype)},{}],48:[function(t,e,n){THREE.OrbitControls=function(t,e){function n(){return 2*Math.PI/60/60*f.autoRotateSpeed}function r(){return Math.pow(.95,f.zoomSpeed)}function i(t){if(f.enabled!==!1){if(t.preventDefault(),t.button===f.mouseButtons.ORBIT){if(f.noRotate===!0)return;C=O.ROTATE,v.set(t.clientX,t.clientY)}else if(t.button===f.mouseButtons.ZOOM){if(f.noZoom===!0)return;C=O.DOLLY,L.set(t.clientX,t.clientY)}else if(t.button===f.mouseButtons.PAN){if(f.noPan===!0)return;C=O.PAN,b.set(t.clientX,t.clientY)}C!==O.NONE&&(document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",a,!1),f.dispatchEvent(z))}}function o(t){if(f.enabled!==!1){t.preventDefault();var e=f.domElement===document?f.domElement.body:f.domElement;if(C===O.ROTATE){if(f.noRotate===!0)return;g.set(t.clientX,t.clientY),y.subVectors(g,v),f.rotateLeft(2*Math.PI*y.x/e.clientWidth*f.rotateSpeed),f.rotateUp(2*Math.PI*y.y/e.clientHeight*f.rotateSpeed),v.copy(g)}else if(C===O.DOLLY){if(f.noZoom===!0)return;S.set(t.clientX,t.clientY),P.subVectors(S,L),P.y>0?f.dollyIn():P.y<0&&f.dollyOut(),L.copy(S)}else if(C===O.PAN){if(f.noPan===!0)return;w.set(t.clientX,t.clientY),x.subVectors(w,b),f.pan(x.x,x.y),b.copy(w)}C!==O.NONE&&f.update()}}function a(){f.enabled!==!1&&(document.removeEventListener("mousemove",o,!1),document.removeEventListener("mouseup",a,!1),f.dispatchEvent(N),C=O.NONE)}function s(t){if(f.enabled!==!1&&f.noZoom!==!0&&C===O.NONE){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e>0?f.dollyOut():0>e&&f.dollyIn(),f.update(),f.dispatchEvent(z),f.dispatchEvent(N)}}function u(t){if(f.enabled!==!1&&f.noKeys!==!0&&f.noPan!==!0)switch(t.keyCode){case f.keys.UP:f.pan(0,f.keyPanSpeed),f.update();break;case f.keys.BOTTOM:f.pan(0,-f.keyPanSpeed),f.update();break;case f.keys.LEFT:f.pan(f.keyPanSpeed,0),f.update();break;case f.keys.RIGHT:f.pan(-f.keyPanSpeed,0),f.update()}}function c(t){if(f.enabled!==!1){switch(t.touches.length){case 1:if(f.noRotate===!0)return;C=O.TOUCH_ROTATE,v.set(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(f.noZoom===!0)return;C=O.TOUCH_DOLLY;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);L.set(0,r);break;case 3:if(f.noPan===!0)return;C=O.TOUCH_PAN,b.set(t.touches[0].pageX,t.touches[0].pageY);break;default:C=O.NONE}C!==O.NONE&&f.dispatchEvent(z)}}function l(t){if(f.enabled!==!1){t.preventDefault(),t.stopPropagation();var e=f.domElement===document?f.domElement.body:f.domElement;switch(t.touches.length){case 1:if(f.noRotate===!0)return;if(C!==O.TOUCH_ROTATE)return;g.set(t.touches[0].pageX,t.touches[0].pageY),y.subVectors(g,v),f.rotateLeft(2*Math.PI*y.x/e.clientWidth*f.rotateSpeed),f.rotateUp(2*Math.PI*y.y/e.clientHeight*f.rotateSpeed),v.copy(g),f.update();break;case 2:if(f.noZoom===!0)return;if(C!==O.TOUCH_DOLLY)return;var n=t.touches[0].pageX-t.touches[1].pageX,r=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(n*n+r*r);S.set(0,i),P.subVectors(S,L),P.y>0?f.dollyOut():P.y<0&&f.dollyIn(),L.copy(S),f.update();break;case 3:if(f.noPan===!0)return;if(C!==O.TOUCH_PAN)return;w.set(t.touches[0].pageX,t.touches[0].pageY),x.subVectors(w,b),f.pan(x.x,x.y),b.copy(w),f.update();break;default:C=O.NONE}}}function h(){f.enabled!==!1&&(f.dispatchEvent(N),C=O.NONE)}this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var p,d,f=this,m=1e-6,v=new THREE.Vector2,g=new THREE.Vector2,y=new THREE.Vector2,b=new THREE.Vector2,w=new THREE.Vector2,x=new THREE.Vector2,_=new THREE.Vector3,M=new THREE.Vector3,L=new THREE.Vector2,S=new THREE.Vector2,P=new THREE.Vector2,E=0,I=0,A=1,R=new THREE.Vector3,F=new THREE.Vector3,T=new THREE.Quaternion,O={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},C=O.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var D=(new THREE.Quaternion).setFromUnitVectors(t.up,new THREE.Vector3(0,1,0)),k=D.clone().inverse(),B={type:"change"},z={type:"start"},N={type:"end"};this.rotateLeft=function(t){void 0===t&&(t=n()),I-=t},this.rotateUp=function(t){void 0===t&&(t=n()),E-=t},this.panLeft=function(t){var e=this.object.matrix.elements;_.set(e[0],e[1],e[2]),_.multiplyScalar(-t),R.add(_)},this.panUp=function(t){var e=this.object.matrix.elements;_.set(e[4],e[5],e[6]),_.multiplyScalar(t),R.add(_)},this.pan=function(t,e){var n=f.domElement===document?f.domElement.body:f.domElement;if(f.object instanceof THREE.PerspectiveCamera){var r=f.object.position,i=r.clone().sub(f.target),o=i.length();o*=Math.tan(f.object.fov/2*Math.PI/180),f.panLeft(2*t*o/n.clientHeight),f.panUp(2*e*o/n.clientHeight)}else f.object instanceof THREE.OrthographicCamera?(f.panLeft(t*(f.object.right-f.object.left)/n.clientWidth),f.panUp(e*(f.object.top-f.object.bottom)/n.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(t){void 0===t&&(t=r()),f.object instanceof THREE.PerspectiveCamera?A/=t:f.object instanceof THREE.OrthographicCamera?(f.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*t)),f.object.updateProjectionMatrix(),f.dispatchEvent(B)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(t){void 0===t&&(t=r()),f.object instanceof THREE.PerspectiveCamera?A*=t:f.object instanceof THREE.OrthographicCamera?(f.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/t)),f.object.updateProjectionMatrix(),f.dispatchEvent(B)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=function(){var t=this.object.position;M.copy(t).sub(this.target),M.applyQuaternion(D),p=Math.atan2(M.x,M.z),d=Math.atan2(Math.sqrt(M.x*M.x+M.z*M.z),M.y),this.autoRotate&&C===O.NONE&&this.rotateLeft(n()),p+=I,d+=E,p=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,p)),d=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,d)),d=Math.max(m,Math.min(Math.PI-m,d));var e=M.length()*A;e=Math.max(this.minDistance,Math.min(this.maxDistance,e)),this.target.add(R),M.x=e*Math.sin(d)*Math.sin(p),M.y=e*Math.cos(d),M.z=e*Math.sin(d)*Math.cos(p),M.applyQuaternion(k),t.copy(this.target).add(M),this.object.lookAt(this.target),I=0,E=0,A=1,R.set(0,0,0),(F.distanceToSquared(this.object.position)>m||8*(1-T.dot(this.object.quaternion))>m)&&(this.dispatchEvent(B),F.copy(this.object.position),T.copy(this.object.quaternion))},this.reset=function(){C=O.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(B),this.update()},this.getPolarAngle=function(){return d},this.getAzimuthalAngle=function(){return p},this.domElement.addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.domElement.addEventListener("mousedown",i,!1),this.domElement.addEventListener("mousewheel",s,!1),this.domElement.addEventListener("DOMMouseScroll",s,!1),this.domElement.addEventListener("touchstart",c,!1),this.domElement.addEventListener("touchend",h,!1),this.domElement.addEventListener("touchmove",l,!1),window.addEventListener("keydown",u,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,e.exports=THREE.OrbitControls},{}],49:[function(t,e,n){function r(t){a?(s=t,i()):t()}function i(){u=document.querySelector(".mobile"),u.style.display="block",c=document.querySelector(".mobile-bypass"),c.addEventListener("click",o)}function o(){u.parentNode.removeChild(u),s()}var a=/(iPad|iPhone|Android)/i.test(navigator.userAgent);n.pass=r;var s,u,c},{}],50:[function(t,e,n){function r(t){return t.replace(l,a)}function i(t){return t.replace(h,s)}function o(t){return t.replace(p,s)}function a(t,e){return c.ShaderChunk[e]+"\n"}function s(t,e){return e}function u(t){return t=r(t),t=i(t),o(t)}var c=t(45),l=/\/\/\s?chunk\(\s?(\w+)\s?\);/g,h=/(_\d+_\d+)(_\d+_\d+)+/g,p=/GLOBAL_VAR_(.+)(_\d+_\d+)+/g;e.exports=u},{45:45}],51:[function(t,e,n){function r(){O.useStats&&(b=new Stats,A(b.domElement,{position:"absolute",left:"0px",top:"0px",zIndex:2048}),document.body.appendChild(b.domElement)),M=new F.WebGLRenderer({}),M.setClearColor(13421772),M.shadowMap.type=F.PCFSoftShadowMap,M.shadowMap.enabled=!0,
document.body.appendChild(M.domElement),_=new F.Scene,_.fog=new F.FogExp2(13421772,.001),x=new F.PerspectiveCamera(45,1,1,3e3),x.position.set(0,3e3,5e3),w=new V(x,M.domElement),w.noPan=!0,w.minDistance=250,w.minPolarAngle=.3,w.maxPolarAngle=Math.PI/2,w.target.y=100,w.update(),O.mouse=new F.Vector2(it/window.innerWidth*2-1,2*-(ot/window.innerHeight)+1),O.mouse3d=K.origin,k.init(),_.add(k.mesh),L=new C,_.add(L),D.init(),_.add(D.mesh),B.init(M,L),_.add(B.mesh),E=new j.Composer(M),S=new q({blurAmount:1,applyZoomBlur:!0,zoomBlurStrength:.5}),W.push(S),P=new U(1,.3),P.isActive=!0,W.push(P),I=document.querySelector(".logo"),window.addEventListener("click",u),window.addEventListener("mousedown",l),window.addEventListener("touchstart",c(l)),window.addEventListener("mousemove",h),window.addEventListener("touchmove",c(h)),window.addEventListener("mouseup",p),window.addEventListener("touchend",c(p)),window.addEventListener("resize",f);var t=o(z,N,{});t.pitch=function(){return this._pitch},t.yaw=function(){return this._yaw},t.roll=function(){return this._roll},d({hands:[t]},!0),T.loop(d),J=Date.now(),f(),m()}function o(t,e,n){var r,i;for(var u in t)s(t,u)&&(r=t[u],i=e[u],"object"==typeof r?n[u]=o(r,i,r.length?[]:{}):isNaN(r)||Object.defineProperty(n,u,{get:a.bind(null,t,e,u)}));return n}function a(t,e,n){var r=t[n],i=e[n];return r+(i-r)*Q}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function u(){$=!0}function c(t){return function(e){t(e.changedTouches[0])}}function l(){tt=!0}function h(t){O.mouse.x=(t.pageX+it)/H*2-1,O.mouse.y=2*-((t.pageY+ot)/G)+1}function p(){tt=!1}function d(t,e){if(e||nt||(nt=!0),t.hands&&t.hands.length&&(rt=t.hands[0],et=!0,$)){$=!1;t.hands[0]}}function f(){H=window.innerWidth,G=window.innerHeight,E.setSize(H,G),x.aspect=H/G,x.updateProjectionMatrix(),M.setSize(H,G)}function m(){var t=Date.now();R(m),O.useStats&&b.begin(),g(t-J),O.useStats&&b.end(),J=t}function v(t,e,n){return t+(e-t)*n}function g(t){X=Math.min(X+2e-4*t,1),Z=Math.min(Z+1e-4*t,1);var e=Math.pow(X,.3),n=Math.pow(Z,.3);w.maxDistance=1===Z?1200:v(1400,500,n),w.update(),x.updateMatrixWorld(),K.origin.setFromMatrixPosition(x.matrixWorld),K.direction.set(O.mouse.x,O.mouse.y,.5).unproject(x).sub(K.origin).normalize();var r=K.origin.length()/Math.cos(Math.PI-K.direction.angleTo(K.origin));K.origin.add(K.direction.multiplyScalar(r)),nt===y?(Q+=.01*((tt?1:0)-Q)*t,z.palmVelocity[0]=N.palmVelocity[0]=20*(K.origin.x-L.position.x),z.palmVelocity[1]=N.palmVelocity[1]=20*(K.origin.y-L.position.y),z.palmVelocity[2]=N.palmVelocity[2]=20*(K.origin.z-L.position.z),L.position.copy(K.origin)):(et||(z.palmVelocity[0]=z.palmVelocity[1]=z.palmVelocity[2]=0),L.position.x-=.05*L.position.x,L.position.y-=.05*L.position.y,L.position.z-=.05*L.position.z),L.leapUpdate(rt),B.update(t),k.update(t,x);var o=Math.min(1.2*(1-2*Math.abs(Z-.5)),1),a=10*(1-o);I.style.opacity=o,I.style.display=o?"block":"none",I.style.webkitFilter="blur("+a+"px)",o=.8+.3*Math.pow(X,1.5),580>H&&(o*=.5),I.style.transform="scale3d("+o+","+o+",1)",P.params.boost=v(1.1,1,e),P.params.reduction=v(-.1,.4,e),S.blendPass.params.opacity=v(1,O.bloomOpacity,e),S.isActive=!!S.blendPass.params.opacity,k.pointLight.shadowDarkness=O.shadowDarkness;var s=!1;for(i=0,len=W.length;i<len;i++)if(W[i].isActive){s=!0;break}if(M.autoClearColor=!0,s)for(E.reset(),E.render(_,x),i=0,len=W.length;i<len;i++)W[i].isActive&&E.pass(W[i]),E.toScreen();else M.render(_,x);et=!1}var y,b,w,x,_,M,L,S,P,E,I,A=(t(33),t(17)),R=t(43),F=t(45),T=t(73),O=t(60),C=t(53),D=t(57),k=t(58),B=t(59),z=t(54),N=t(56),V=t(48),j=t(1),q=t(6),U=t(11),Y=t(49),H=0,G=0,W=[],J=0,X=0,Z=0,Q=0,K=new F.Ray,$=!1,tt=!1,et=!1,nt=y,rt=y,it=80,ot=80;Y.pass(function(){var t=new Image;t.src="images/logo.png",t.width?r():t.onload=r})},{1:1,11:11,17:17,33:33,43:43,45:45,48:48,49:49,53:53,54:54,56:56,57:57,58:58,59:59,6:6,60:60,73:73}],52:[function(t,e,n){function r(t,e,n){u.Object3D.call(this),this.fingerIndex=t,this.fromNodeIndex=e,this.toNodeIndex=n,this.outputMatrix=new u.Matrix4,this.tmpPosition=new u.Vector3,this.tmpQuaternion=new u.Quaternion,this.tmpScale=new u.Vector3,this.nodeAdjustmentQuaternion=(new u.Quaternion).setFromAxisAngle(new u.Vector3(1,0,0),-Math.PI/2),this.bone=new u.Mesh(i(),c()),this.bone.castShadow=!0,this.bone.receiveShadow=!0,this.add(this.bone),this.node=new u.Mesh(o(),c()),this.node.castShadow=!0,this.node.receiveShadow=!0,this.add(this.node)}function i(){return p||(p=new u.CylinderGeometry(1,1,1,12,1),p.translate(0,-.5,0)),p}function o(){return d||(d=new u.SphereGeometry(1,10,12)),d}function a(){var t=this.outputMatrix,e=this.tmpPosition,n=this.tmpQuaternion,r=this.tmpScale;return t.copy(this.bone.matrixWorld),t.decompose(e,n,r),t.compose(e,n,f),t.getInverse(t),t.elements[3]=r.x,t.elements[7]=r.y,t.elements[11]=r.z,Array.prototype.slice.call(t.elements)}function s(t){var e=t[this.fingerIndex],n=e.positions,r=n[this.fromNodeIndex],i=n[this.toNodeIndex],o=e.width/2;this.node.position.set(r[0],r[1],r[2]),this.bone.position.set(i[0],i[1],i[2]),this.bone.lookAt(this.node.position),this.node.scale.set(o,o,o);var a=this.bone.position.distanceTo(this.node.position);this.node.position.copy(this.bone.position),this.bone.scale.set(o,a,o),this.bone.quaternion.multiply(this.nodeAdjustmentQuaternion)}var u=(t(60),t(45)),c=t(61).getMaterial;e.exports=r;var l=u.Object3D.prototype,h=r.prototype=Object.create(l);h.constructor=r,h.updateOutputMatrix=a,h.leapUpdate=s;var p,d,f=new u.Vector3(1,1,1)},{45:45,60:60,61:61}],53:[function(t,e,n){function r(){u.Object3D.call(this),this.fingerBones=[],this.palmOutputMatrix=new u.Matrix4,this.tmpPosition=new u.Vector3,this.tmpQuaternion=new u.Quaternion,this.tmpScale=new u.Vector3;var t=(new u.Quaternion).setFromAxisAngle(new u.Vector3(1,0,0),-Math.PI/2);t.multiply((new u.Quaternion).setFromAxisAngle(new u.Vector3(0,0,1),Math.PI/6)),this.palmOutputAdjustmentMatrix=(new u.Matrix4).makeRotationFromQuaternion(t),this.palmMeshAdjustmentQuaternion=(new u.Quaternion).setFromAxisAngle(new u.Vector3(0,1,0),Math.PI/6),this.palmVelocity=new u.Vector3,this._initFingers(),this._initPalm()}function i(){for(var t,e=0;5>e;e++)for(var n=1;4>n;n++)t=new c(e,n,n+1),this.fingerBones.push(t),this.add(t)}function o(){var t=new u.CylinderGeometry(1,1,1,6);this.palm=new u.Mesh(t,l()),this.palm.castShadow=!0,this.palm.receiveShadow=!0,this.add(this.palm)}function a(t){for(var e=t.fingers,n=this.fingerBones,r=0,i=n.length;i>r;r++)n[r].leapUpdate(e);this.palm.position.fromArray(t.palmPosition),this.palm.rotation.set(t.pitch(),-t.yaw(),t.roll()),this.palm.translateZ(20),this.palm.translateX(-5),this.palm.quaternion.multiply(this.palmMeshAdjustmentQuaternion);var o=(new u.Vector3).fromArray(t.pinky.positions[1]),a=(new u.Vector3).fromArray(t.thumb.positions[1]),s=.45*o.distanceTo(a);this.palm.scale.set(s,1.2*t.thumb.width,s),this.palmVelocity.fromArray(t.palmVelocity),this.updateMatrixWorld(),this.updateOutputMatrix()}function s(){var t=[],e=this.palmOutputMatrix,n=this.tmpPosition,r=this.tmpQuaternion,i=this.tmpScale;e.copy(this.palm.matrixWorld),e.multiply(this.palmOutputAdjustmentMatrix),e.decompose(n,r,i),e.compose(n,r,d),e.getInverse(e),e.elements[3]=.866025*i.x,e.elements[7]=.866025*i.y,e.elements[11]=i.z,t.push(Array.prototype.slice.call(e.elements));for(var o=this.fingerBones,a=0,s=o.length;s>a;a++)t.push(o[a].updateOutputMatrix()),o[a].updateOutputMatrix();return t}var u=(t(60),t(45)),c=t(52),l=t(61).getMaterial;e.exports=r;var h=u.Object3D.prototype,p=r.prototype=Object.create(h);p.constructor=r,p._initFingers=i,p._initPalm=o,p.leapUpdate=a,p.updateOutputMatrix=s;var d=new u.Vector3(1,1,1)},{45:45,52:52,60:60,61:61}],54:[function(t,e,n){e.exports={fingers:[{positions:[[-82.7319,33.8079,81.6507],[-82.7319,33.8079,81.6507],[-39.3405,53.4473,66.7093],[-8.43841,66.8659,61.464],[-3.5891,70.409,43.9993]],width:20.25},{positions:[[-96.16,53.3051,82.8463],[-55.7517,106.4,51.8535],[-31.345,135.869,32.3164],[-14.5136,145.228,17.7113],[-5.19045,147.288,9.40499]],width:19.3428},{positions:[[-104.87,55.9003,74.5382],[-73.2802,106.494,38.3453],[-48.4068,134.747,8.23954],[-28.5851,139.889,-11.4911],[-18.231,138.466,-20.5768]],width:18.9972},{positions:[[-112.945,55.4585,65.2907],[-91.7436,99.994,26.6792],[-70.4668,128.419,-.442044],[-51.3668,135.907,-19.0572],[-40.7008,136.068,-27.7728]],width:18.077},{positions:[[-118.298,48.5991,54.0274],[-106.452,89.7683,14.9498],[-93.3419,110.39,-10.6071],[-80.2055,114.368,-24.5409],[-70.0599,113.711,-32.0629]],width:16.0574}],palmPosition:[-81.83,83.3129,45.2651],palmVelocity:[0,0,0],_pitch:1.0615306607563884,_yaw:.6538980433882265,_roll:.7851885703254726,pinky:{positions:[0,[-106.452,89.7683,14.9498]]},thumb:{positions:[0,[-82.7319,33.8079,81.6507]],width:20.25}}},{}],55:[function(t,e,n){function r(t,e){g=t;var n=g.getContext();if(!n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS))return void alert("No support for vertex shader textures!");if(!n.getExtension("OES_texture_float"))return void alert("No OES_texture_float support for float textures!");x=[e.palmOutputMatrix];for(var r=0,i=e.fingerBones.length;i>r;r++)x.push(e.fingerBones[r].outputMatrix);b=new M.Scene,w=new M.Camera,w.position.z=1,l=new M.ShaderMaterial({uniforms:{resolution:{type:"v2",value:new M.Vector2(S,S)},texture:{type:"t",value:null}},vertexShader:L("#define GLSLIFY 1\nvoid main() {\r\n    gl_Position = vec4( position, 1.0 );\r\n}\r\n"),fragmentShader:L("#define GLSLIFY 1\nuniform vec2 resolution;\r\nuniform sampler2D texture;\r\n\r\nvoid main() {\r\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n    vec3 color = texture2D( texture, uv ).xyz;\r\n    gl_FragColor = vec4( color, 1.0 );\r\n}\r\n")}),h=new M.ShaderMaterial({uniforms:{texturePosition:{type:"t",value:null},textureVelocity:{type:"t",value:null},resolution:{type:"v2",value:new M.Vector2(S,S)},data:{type:"m4v",value:x},handBounceRatio:{type:"f",value:_.handBounceRatio},handForce:{type:"f",value:_.handForce},gravity:{type:"f",value:_.gravity},palmVelocity:{type:"v3",value:e.palmVelocity}},vertexShader:L("#define GLSLIFY 1\nvoid main() {\r\n    gl_Position = vec4( position, 1.0 );\r\n}\r\n"),fragmentShader:L("#define GLSLIFY 1\nuniform vec2 resolution;\r\n\r\nuniform sampler2D textureVelocity;\r\nuniform sampler2D texturePosition;\r\nuniform mat4 data[16];\r\nuniform vec3 palmVelocity;\r\n\r\nuniform float handBounceRatio;\r\nuniform float handForce;\r\nuniform float gravity;\r\n\r\nconst float INTERSECTION_PRECISION = 1.0;\r\nconst float FAR = 2000.0;\r\n\r\nfloat sdSphere_4_0( vec3 p, float s ) {\r\n  return length(p)-s;\r\n}\r\n\r\nfloat sdCappedCylinderLower_4_1( vec3 p, vec2 h ){\r\n  vec2 d = abs(vec2(length(p.xz),p.y + h.y)) - h;\r\n  return min(max(d.x,d.y),0.0) + length(max(d,0.0));\r\n}\r\n\r\nfloat sdFingerBone_4_2( in vec3 p, in mat4 fingerBone) {\r\n\r\n    vec3 scale = vec3(fingerBone[0][3], fingerBone[1][3], fingerBone[2][3]);\r\n\r\n    fingerBone[0][3] = 0.0;\r\n    fingerBone[1][3] = 0.0;\r\n    fingerBone[2][3] = 0.0;\r\n\r\n    p = (fingerBone * vec4(p, 1.0)).xyz;\r\n\r\n    return min(\r\n        sdSphere_4_0(p, scale.x),\r\n        sdCappedCylinderLower_4_1(p, vec2(scale.x, scale.y / 2.0))\r\n    );\r\n}\r\n\r\n\n\n\r\nfloat sdHexPrism_1_3( vec3 p, vec2 h ) {\r\n    vec3 q = abs(p);\r\n    return max(q.z-h.y,max((q.x*0.866025+q.y*0.5),q.y)-h.x);\r\n}\r\n\r\nfloat map_1_4( in vec3 p ) {\r\n    float d = GLOBAL_VAR_FAR_1_5;\r\n\r\n    mat4 palmData = GLOBAL_VAR_data_1_6[0];\r\n    vec3 scale = vec3(palmData[0][3], palmData[1][3], palmData[2][3]);\r\n\r\n    palmData[0][3] = 0.0;\r\n    palmData[1][3] = 0.0;\r\n    palmData[2][3] = 0.0;\r\n\r\n    d = min(d, sdHexPrism_1_3((palmData * vec4(p, 1.0)).xyz, vec2(scale.x, scale.z / 2.0)));\r\n\r\n    for( int i = 1; i < 16; i++ ) {\r\n        d = min(d, sdFingerBone_4_2(p, GLOBAL_VAR_data_1_6[i]));\r\n    }\r\n\r\n    return d;\r\n}\r\n\r\n\n\n\n\r\nvec3 calcNormal_2_7( in vec3 p ) {\r\n\r\n    vec2 e = vec2(1.0, -1.0) * 0.5773 * 0.01;\r\n    return normalize( e.xyy * map_1_4_2_8( p + e.xyy ) +\r\n        e.yyx * map_1_4_2_8( p + e.yyx ) +\r\n        e.yxy * map_1_4_2_8( p + e.yxy ) +\r\n        e.xxx * map_1_4_2_8( p + e.xxx ) );\r\n}\r\n\r\n\n\nfloat hash_3_9( float v ) { return fract( sin(v) * 12.419821); }\r\n\nhighp float random_5_10(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt= dot(co.xy ,vec2(a,b));\n    highp float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\n\n\n\r\nvoid main() {\r\n\r\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n\r\n    vec4 positionInfo = texture2D( texturePosition, uv );\r\n    vec3 position = positionInfo.xyz;\r\n    vec3 velocity = texture2D( textureVelocity, uv ).xyz;\r\n\r\n    float d = map_1_4(position);\r\n\r\n    if(positionInfo.w < 0.005) {\r\n\r\n        d = FAR;\r\n        velocity = vec3( 0.0, random_5_10(uv) * 1.0, 0.0 );\r\n\r\n    } else {\r\n\r\n        if(position.y < 0.0) {\r\n            float groundBounceRatio =  random_5_10(position.xz);\r\n            velocity.y *= -0.5 * groundBounceRatio;\r\n            velocity.xz *= 0.5 * groundBounceRatio;\r\n\r\n            // add some fake physics on the floor to make it looks better when\r\n            // the hand is not blocking the particles\r\n            float strength = length(velocity) * pow(positionInfo.w, 3.0);\r\n            velocity.x += (random_5_10(uv + 0.1) - 0.5) *strength;\r\n            velocity.z += (random_5_10(uv + 0.4) - 0.5) *strength;\r\n        } else {\r\n            velocity.y -= (0.03 - 0.005 * random_5_10(uv + 5.0)) * gravity;\r\n        }\r\n\r\n        float velocityDistance = length(velocity);\r\n        d = map_1_4(position);\r\n        if(d < velocityDistance) {\r\n\r\n            if(d > INTERSECTION_PRECISION) {\r\n                // raymarch\r\n                vec3 rd = normalize(velocity);\r\n                position = position + rd * d;\r\n\r\n                float dd = 0.0;\r\n                for( int i = 0; i < 10; i++ ) {\r\n                    dd = map_1_4( position);\r\n                    if(dd < INTERSECTION_PRECISION || d > FAR) break;\r\n                    d += dd;\r\n                    position += rd * dd;\r\n                }\r\n\r\n            }\r\n            vec3 normal = calcNormal_2_7(position);\r\n\r\n            velocity = reflect(velocity, normal) * handBounceRatio;\r\n            vec3 palmDirection = normalize(palmVelocity);\r\n            velocity += palmVelocity * handForce * max(dot(palmDirection, normal), 0.0);\r\n\r\n        }\r\n    }\r\n\r\n    gl_FragColor = vec4(velocity, d );\r\n\r\n}\r\n"),transparent:!1,depthWrite:!1,depthTest:!1}),p=new M.ShaderMaterial({uniforms:{resolution:{type:"v2",value:new M.Vector2(S,S)},texturePosition:{type:"t",value:null},textureVelocity:{type:"t",value:null},textureVelocity2:{type:"t",value:null},dropRadius:{type:"f",value:_.particlesDropRadius},fromY:{type:"f",value:_.particlesFromY},yDynamicRange:{type:"f",value:_.particlesYDynamicRange},data:{type:"m4v",value:x}},vertexShader:L("#define GLSLIFY 1\nvoid main() {\r\n    gl_Position = vec4( position, 1.0 );\r\n}\r\n"),fragmentShader:L("#define GLSLIFY 1\nuniform vec2 resolution;\r\n\r\nuniform sampler2D textureVelocity2;\r\nuniform sampler2D textureVelocity;\r\nuniform sampler2D texturePosition;\r\nuniform mat4 data[16];\r\n\r\nuniform float dropRadius;\r\nuniform float fromY;\r\nuniform float yDynamicRange;\r\n\r\nconst float INTERSECTION_PRECISION = 1.0;\r\nconst float FAR = 2000.0;\r\nconst float PI_2 = 6.2831853072;\r\n\r\nfloat sdSphere_4_0( vec3 p, float s ) {\r\n  return length(p)-s;\r\n}\r\n\r\nfloat sdCappedCylinderLower_4_1( vec3 p, vec2 h ){\r\n  vec2 d = abs(vec2(length(p.xz),p.y + h.y)) - h;\r\n  return min(max(d.x,d.y),0.0) + length(max(d,0.0));\r\n}\r\n\r\nfloat sdFingerBone_4_2( in vec3 p, in mat4 fingerBone) {\r\n\r\n    vec3 scale = vec3(fingerBone[0][3], fingerBone[1][3], fingerBone[2][3]);\r\n\r\n    fingerBone[0][3] = 0.0;\r\n    fingerBone[1][3] = 0.0;\r\n    fingerBone[2][3] = 0.0;\r\n\r\n    p = (fingerBone * vec4(p, 1.0)).xyz;\r\n\r\n    return min(\r\n        sdSphere_4_0(p, scale.x),\r\n        sdCappedCylinderLower_4_1(p, vec2(scale.x, scale.y / 2.0))\r\n    );\r\n}\r\n\r\n\n\n\r\nfloat sdHexPrism_1_3( vec3 p, vec2 h ) {\r\n    vec3 q = abs(p);\r\n    return max(q.z-h.y,max((q.x*0.866025+q.y*0.5),q.y)-h.x);\r\n}\r\n\r\nfloat map_1_4( in vec3 p ) {\r\n    float d = GLOBAL_VAR_FAR_1_5;\r\n\r\n    mat4 palmData = GLOBAL_VAR_data_1_6[0];\r\n    vec3 scale = vec3(palmData[0][3], palmData[1][3], palmData[2][3]);\r\n\r\n    palmData[0][3] = 0.0;\r\n    palmData[1][3] = 0.0;\r\n    palmData[2][3] = 0.0;\r\n\r\n    d = min(d, sdHexPrism_1_3((palmData * vec4(p, 1.0)).xyz, vec2(scale.x, scale.z / 2.0)));\r\n\r\n    for( int i = 1; i < 16; i++ ) {\r\n        d = min(d, sdFingerBone_4_2(p, GLOBAL_VAR_data_1_6[i]));\r\n    }\r\n\r\n    return d;\r\n}\r\n\r\n\n\n\n\r\nvec3 calcNormal_2_7( in vec3 p ) {\r\n\r\n    vec2 e = vec2(1.0, -1.0) * 0.5773 * 0.01;\r\n    return normalize( e.xyy * map_1_4_2_8( p + e.xyy ) +\r\n        e.yyx * map_1_4_2_8( p + e.yyx ) +\r\n        e.yxy * map_1_4_2_8( p + e.yxy ) +\r\n        e.xxx * map_1_4_2_8( p + e.xxx ) );\r\n}\r\n\r\n\n\nfloat hash_3_9( float v ) { return fract( sin(v) * 12.419821); }\r\n\nhighp float random_5_10(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt= dot(co.xy ,vec2(a,b));\n    highp float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\n\n\n\r\nvoid main() {\r\n\r\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n\r\n    vec4 positionInfo = texture2D( texturePosition, uv );\r\n    vec3 position = positionInfo.xyz;\r\n    vec3 prevVelocity = texture2D( textureVelocity2, uv ).xyz;\r\n    vec4 velocityInfo = texture2D( textureVelocity, uv );\r\n    vec3 velocity = velocityInfo.xyz;\r\n\r\n    float d = velocityInfo.w;\r\n\r\n    positionInfo.w -= 0.005;\r\n\r\n    if(positionInfo.w < 0.0) {\r\n\r\n        positionInfo.w = 1.0 + random_5_10(uv + 2.0);\r\n        float a = (uv.x) * PI_2;\r\n        float r = pow((uv.y), 0.75) * dropRadius;\r\n        position = vec3( cos(a) * r, fromY + random_5_10(uv + 1.0) * yDynamicRange, sin(a) * r );\r\n\r\n    } else {\r\n\r\n        float velocityDistance = length(prevVelocity);\r\n        if(d < velocityDistance) {\r\n\r\n            if(d > INTERSECTION_PRECISION) {\r\n                // raymarch\r\n                vec3 rd = normalize(prevVelocity);\r\n                position = position + rd * d;\r\n\r\n                float dd = 0.0;\r\n                for( int i = 0; i < 10; i++ ) {\r\n                    dd = map_1_4( position);\r\n                    if(dd < INTERSECTION_PRECISION || d > FAR) break;\r\n                    d += dd;\r\n                    position += rd * dd;\r\n                }\r\n\r\n            }\r\n            vec3 normal = calcNormal_2_7(position);\r\n\r\n            if(d < 0.0) {\r\n                position += normal * (-d + INTERSECTION_PRECISION);\r\n            }\r\n\r\n        }\r\n\r\n        position += velocity;\r\n    }\r\n\r\n    gl_FragColor = vec4(position, positionInfo.w);\r\n\r\n}\r\n"),transparent:!1,depthWrite:!1,depthTest:!1}),y=new M.Mesh(new M.PlaneBufferGeometry(2,2),l),b.add(y),d=new M.WebGLRenderTarget(S,S,{wrapS:M.RepeatWrapping,wrapT:M.RepeatWrapping,minFilter:M.NearestFilter,magFilter:M.NearestFilter,format:M.RGBAFormat,type:M.FloatType,depthBuffer:!1,stencilBuffer:!1}),f=d.clone(),a(s(),d),a(d,f),m=new M.WebGLRenderTarget(S,S,{wrapS:M.RepeatWrapping,wrapT:M.RepeatWrapping,minFilter:M.NearestFilter,magFilter:M.NearestFilter,format:M.RGBAFormat,type:M.FloatType,depthBuffer:!1,stencilBuffer:!1}),v=m.clone(),a(u(),m),a(m,v)}function i(t){var e=d;d=f,f=e,y.material=h,h.uniforms.textureVelocity.value=f,h.uniforms.texturePosition.value=m,g.render(b,w,d)}function o(t){var e=m;m=v,v=e,y.material=p,p.uniforms.texturePosition.value=v,p.uniforms.textureVelocity.value=d,p.uniforms.textureVelocity2.value=f,g.render(b,w,m)}function a(t,e){y.material=l,l.uniforms.texture.value=t,g.render(b,w,e)}function s(){for(var t=new Float32Array(4*P),e=0,n=t.length;n>e;e+=4)t[e+0]=0,t[e+1]=Math.random(),t[e+2]=0;var r=new M.DataTexture(t,S,S,M.RGBAFormat,M.FloatType);return r.minFilter=M.NearestFilter,r.magFilter=M.NearestFilter,r.needsUpdate=!0,r.flipY=!1,r}function u(){for(var t,e,n=new Float32Array(4*P),r=_.particlesDropRadius,i=_.particlesFromY,o=_.particlesYDynamicRange,a=0,s=n.length;s>a;a+=4)e=Math.random()*Math.PI,t=Math.pow(Math.random(),.75)*r,n[a+0]=Math.cos(e)*t,n[a+1]=i+Math.random()*o,n[a+2]=Math.sin(e)*t,n[a+3]=.5+Math.random();var u=new M.DataTexture(n,S,S,M.RGBAFormat,M.FloatType);return u.minFilter=M.NearestFilter,u.magFilter=M.NearestFilter,u.needsUpdate=!0,u.generateMipmaps=!1,u.flipY=!1,u}function c(t){return p.uniforms.dropRadius.value=_.particlesDropRadius,p.uniforms.fromY.value=_.particlesFromY,p.uniforms.yDynamicRange.value=_.particlesYDynamicRange,h.uniforms.handBounceRatio.value=_.handBounceRatio,h.uniforms.handForce.value=_.handForce,h.uniforms.gravity.value=_.gravity,i(t),o(t),m}var l,h,p,d,f,m,v,g,y,b,w,x,_=t(60),M=t(45),L=t(50),S=n.TEXTURE_SIZE=_.textureSize,P=n.AMOUNT=S*S;n.init=r,n.update=c},{45:45,50:50,60:60}],56:[function(t,e,n){e.exports={fingers:[{positions:[[-38.2189,60.9604,64.5924],[-38.2189,60.9604,64.5924],[-1.12559,79.7574,49.932],[12.0741,86.9312,23.8296],[4.75387,83.9228,10.1354]],width:17.887},{positions:[[-51.5461,77.0885,65.4124],[-27.7155,120.936,23.7887],[-8.3735,97.377,1.18308],[-7.1981,76.1218,2.81282],[-9.16495,65.5395,6.96613]],width:17.0857},{positions:[[-60.7616,77.3919,59.6436],[-45.1707,117.62,15.6383],[-18.6337,91.6693,-5.21932],[-13.5415,67.644,.0511352],[-13.9111,56.4441,5.98309]],width:16.7804},{positions:[[-69.2867,74.9599,53.3851],[-62.4294,108.825,10.1692],[-36.1111,86.3636,-8.81518],[-27.4399,64.586,-1.79382],[-25.7971,54.2056,5.14412]],width:15.9676},{positions:[[-75.169,66.8402,45.8014],[-76.0903,97.0578,4.45619],[-52.3843,82.8792,-10.1212],[-42.1453,70.5831,-3.60624],[-37.7832,62.9693,4.02072]],width:14.1837}],palmPosition:[-48.9255,98.0567,26.448],palmVelocity:[-2.16856,-2.66415,-.147639],_pitch:.8568779317864111,_yaw:.23460461915433872,_roll:.6830778953159898,pinky:{positions:[0,[-76.0903,97.0578,4.45619]]},thumb:{positions:[0,[-38.2189,60.9604,64.5924]],width:17.887}}},{}],57:[function(t,e,n){function r(){var t=new o.PlaneGeometry(4e3,4e3,10,10),e=new o.MeshPhongMaterial({color:10066329}),r=n.mesh=new o.Mesh(t,e);r.rotation.x=-1.57,r.castShadow=!1,r.receiveShadow=!0}var i,o=(t(60),t(45));n.mesh=i,n.init=r},{45:45,60:60}],58:[function(t,e,n){function r(){c=n.mesh=new s.Object3D,c.position.y=150;var t=new s.AmbientLight(3355443);c.add(t),l=n.pointLight=new s.PointLight(13421772,1,800),l.castShadow=!0,l.shadowCameraNear=10,l.shadowCameraFar=800,l.shadowCameraFov=90,l.shadowBias=a.shadowDarkness,l.shadowDarkness=.3,l.shadowMapWidth=2048,l.shadowMapHeight=1024,c.add(l);var e=new s.PlaneGeometry(100,100),r=new s.ShaderMaterial({uniforms:{},vertexShader:u("#define GLSLIFY 1\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n    vUv = uv;\r\n\r\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n}\r\n"),fragmentShader:u("#define GLSLIFY 1\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n    float d = max(1.0 - length(vUv - 0.5) * 2.0, 0.0);\r\n    gl_FragColor = vec4( d );\r\n}\r\n"),transparent:!0,blending:s.AdditiveBlending,depthTest:!0,depthWrite:!1});h=new s.Mesh(e,r),c.add(h)}function i(t,e){p+=t*a.lightSpeed;var n=5e-4*p-.2;c.position.x=200*Math.cos(n),c.position.z=200*Math.sin(n),h.lookAt(e.position)}var o,a=t(60),s=t(45),u=t(50),c=n.mesh=o,l=n.pointLight=o;n.init=r,n.update=i;var h,p=0},{45:45,50:50,60:60}],59:[function(t,e,n){function r(t,e){l.init(t,e),i(),o(),p=u.useBillboardParticle?n.mesh=new c.Mesh(d,f):n.mesh=new c.Points(d,f),p.castShadow=!0,p.receiveShadow=!0,p.customDistanceMaterial=m}function i(){var t=l.TEXTURE_SIZE,e=l.AMOUNT;d=new c.BufferGeometry;var n,r,i;if(u.useBillboardParticle){r=new Float32Array(3*e*3),i=new Float32Array(3*e*2);var o=new Float32Array(3*e*3);d.addAttribute("positionFlip",new c.BufferAttribute(o,3));var a,s,h=2*Math.PI/3;for(n=0;e>n;n++)a=6*n,s=9*n,r[s+0]=Math.sin(2*h+Math.PI),r[s+1]=Math.cos(2*h+Math.PI),r[s+3]=Math.sin(h+Math.PI),r[s+4]=Math.cos(h+Math.PI),r[s+6]=Math.sin(3*h+Math.PI),r[s+7]=Math.cos(3*h+Math.PI),o[s+0]=Math.sin(2*h),o[s+1]=Math.cos(2*h),o[s+3]=Math.sin(h),o[s+4]=Math.cos(h),o[s+6]=Math.sin(3*h),o[s+7]=Math.cos(3*h),i[a+0]=i[a+2]=i[a+4]=n%t/t,i[a+1]=i[a+3]=i[a+5]=~~(n/t)/t}else{r=new Float32Array(3*e),i=new Float32Array(2*e);var p;for(n=0;e>n;n++)p=2*n,i[p+0]=n%t/t,i[p+1]=~~(n/t)/t}d.addAttribute("position",new c.BufferAttribute(r,3)),d.addAttribute("fboUV",new c.BufferAttribute(i,2))}function o(){f=new c.ShaderMaterial({uniforms:{texturePosition:{type:"t",value:null},flipRatio:{type:"f",value:0},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new c.Color(16777215)},shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}},defines:{USE_BILLBOARD:u.useBillboardParticle},vertexShader:h("#define GLSLIFY 1\nattribute vec2 fboUV;\r\nuniform sampler2D texturePosition;\r\n\r\n#ifdef USE_BILLBOARD\r\n\r\n    attribute vec3 positionFlip;\r\n    uniform float flipRatio;\r\n\r\n#else\r\n\r\n    varying float vAlpha;\r\n\r\n#endif\r\n\r\n// chunk(shadowmap_pars_vertex);\r\n\r\nvoid main() {\r\n\r\n    vec4 posInfo = texture2D( texturePosition, fboUV );\r\n    vec3 pos = posInfo.xyz;\r\n\r\n    vec4 worldPosition = modelMatrix * vec4( pos, 1.0 );\r\n    vec4 mvPosition = viewMatrix * worldPosition;\r\n\r\n    #ifdef USE_BILLBOARD\r\n\r\n        vec4 flipOffset = vec4(mix(position, positionFlip, flipRatio) * 0.5, 1.0);\r\n        worldPosition += flipOffset;\r\n\r\n    #else\r\n        gl_PointSize = ( 500.0 / length( mvPosition.xyz ) );\r\n        mvPosition.y += gl_PointSize * 0.5;\r\n\r\n    #endif\r\n\r\n    // chunk(shadowmap_vertex);\r\n\r\n\r\n    #ifdef USE_BILLBOARD\r\n\r\n        gl_Position = projectionMatrix * (mvPosition + flipOffset);\r\n\r\n    #else\r\n\r\n        vAlpha = smoothstep(0.0, 0.1, posInfo.w);\r\n        gl_Position = projectionMatrix * mvPosition;\r\n\r\n    #endif\r\n\r\n\r\n}\r\n"),fragmentShader:h("#define GLSLIFY 1\r\n// chunk(common);\r\n// chunk(fog_pars_fragment);\r\n// chunk(shadowmap_pars_fragment);\r\n\r\n#ifdef USE_BILLBOARD\r\n\r\n#else\r\n\r\n    varying float vAlpha;\r\n\r\n#endif\r\n\r\nvoid main() {\r\n\r\n    vec3 outgoingLight = vec3(1.0);\r\n\r\n    // chunk(shadowmap_fragment);\r\n\r\n    outgoingLight *= 0.1 + pow(shadowMask, vec3(1.5)) * 0.9;\r\n\r\n    // chunk(fog_fragment);\r\n    // chunk(linear_to_gamma_fragment);\r\n\r\n\r\n    #ifdef USE_BILLBOARD\r\n\r\n        gl_FragColor = vec4( outgoingLight, 1.0 );\r\n\r\n    #else\r\n\r\n        float d = length(gl_PointCoord.xy - .5) * 2.0;\r\n\r\n        gl_FragColor = vec4( outgoingLight, vAlpha ) * (1.0 - step(1.0, d)) ;\r\n\r\n    #endif\r\n}\r\n"),transparent:u.useBillboardParticle?!1:!0,blending:u.useBillboardParticle?c.NoBlending:c.NormalBlending,depthTest:!0,depthWrite:!0,fog:!0}),m=new c.ShaderMaterial({uniforms:{lightPos:{type:"v3",value:new c.Vector3(0,0,0)},texturePosition:{type:"t",value:null},flipRatio:{type:"f",value:0}},defines:{USE_BILLBOARD:u.useBillboardParticle},vertexShader:h("#define GLSLIFY 1\nattribute vec2 fboUV;\r\n\r\nuniform sampler2D texturePosition;\r\n\r\n\r\n\r\n#ifdef USE_BILLBOARD\r\n\r\n    attribute vec3 positionFlip;\r\n    uniform float flipRatio;\r\n\r\n#endif\r\n\r\nvarying vec4 vWorldPosition;\r\n\r\nvoid main() {\r\n\r\n    vec3 pos = texture2D( texturePosition, fboUV ).xyz;\r\n\r\n    vec4 worldPosition = modelMatrix * vec4( pos, 1.0 );\r\n    vec4 mvPosition = viewMatrix * worldPosition;\r\n\r\n    #ifdef USE_BILLBOARD\r\n\r\n        vec4 flipOffset = vec4(mix(position, positionFlip, flipRatio) * 0.5, 1.0);\r\n        gl_Position = projectionMatrix * (mvPosition + flipOffset);\r\n\r\n    #else\r\n\r\n        gl_PointSize = ( 300.0 / length( mvPosition.xyz ) );\r\n        mvPosition.y += gl_PointSize* 0.5;\r\n        gl_Position = projectionMatrix * mvPosition;\r\n\r\n    #endif\r\n\r\n    vWorldPosition = worldPosition;\r\n\r\n}\r\n"),fragmentShader:h("#define GLSLIFY 1\nuniform vec3 lightPos;\r\nvarying vec4 vWorldPosition;\r\n\r\nvec4 pack1K ( float depth ) {\r\n\r\n   depth /= 1000.0;\r\n   const vec4 bitSh = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\r\n   const vec4 bitMsk = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\r\n   vec4 res = fract( depth * bitSh );\r\n   res -= res.xxyz * bitMsk;\r\n   return res;\r\n\r\n}\r\n\r\nfloat unpack1K ( vec4 color ) {\r\n\r\n   const vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\r\n   return dot( color, bitSh ) * 1000.0;\r\n\r\n}\r\n\r\nvoid main () {\r\n\r\n   gl_FragColor = pack1K( length( vWorldPosition.xyz - lightPos.xyz ) );\r\n\r\n}\r\n"),depthTest:!0,depthWrite:!0,side:c.BackSide})}function a(){var t=l.update(0);p.material.uniforms.texturePosition.value=t,p.customDistanceMaterial.uniforms.texturePosition.value=t,u.useBillboardParticle&&(p.material.uniforms.flipRatio.value^=1,p.customDistanceMaterial.uniforms.flipRatio.value^=1)}var s,u=t(60),c=t(45),l=t(55),h=t(50),p=n.mesh=s;n.init=r,n.update=a;var d,f,m},{45:45,50:50,55:55,60:60}],60:[function(t,e,n){n.useStats=!1,n.useBillboardParticle=!1,n.textureSize=512,n.shadowDarkness=.35,n.lightSpeed=0,n.bloomOpacity=.45,n.particlesDropRadius=20,n.particlesFromY=300,n.particlesYDynamicRange=300,n.handBounceRatio=.1,n.handForce=.015,n.gravity=10},{}],61:[function(t,e,n){function r(){return i||(i=new o.MeshPhongMaterial({color:16777215})),i}var i,o=(t(60),t(45));n.getMaterial=r},{45:45,60:60}],62:[function(t,e,n){var r=(t(76),t(22)),i=r.vec3,o=r.mat3,a=r.mat4,s=(t(46),e.exports=function(t,e){this.finger=t,this._center=null,this._matrix=null,this.type=e.type,this.prevJoint=e.prevJoint,this.nextJoint=e.nextJoint,this.width=e.width;var n=new Array(3);i.sub(n,e.nextJoint,e.prevJoint),this.length=i.length(n),this.basis=e.basis});s.prototype.left=function(){return this._left?this._left:(this._left=o.determinant(this.basis[0].concat(this.basis[1]).concat(this.basis[2]))<0,this._left)},s.prototype.matrix=function(){if(this._matrix)return this._matrix;var t=this.basis,e=this._matrix=a.create();return e[0]=t[0][0],e[1]=t[0][1],e[2]=t[0][2],e[4]=t[1][0],e[5]=t[1][1],e[6]=t[1][2],e[8]=t[2][0],e[9]=t[2][1],e[10]=t[2][2],e[3]=this.center()[0],e[7]=this.center()[1],e[11]=this.center()[2],this.left()&&(e[0]*=-1,e[1]*=-1,e[2]*=-1),this._matrix},s.prototype.lerp=function(t,e){i.lerp(t,this.prevJoint,this.nextJoint,e)},s.prototype.center=function(){if(this._center)return this._center;var t=i.create();return this.lerp(t,.5),this._center=t,t},s.prototype.direction=function(){return[-1*this.basis[2][0],-1*this.basis[2][1],-1*this.basis[2][2]]}},{22:22,46:46,76:76}],63:[function(t,e,n){var r=e.exports=function(t){this.pos=0,this._buf=[],this.size=t};r.prototype.get=function(t){return void 0==t&&(t=0),t>=this.size||t>=this._buf.length?void 0:this._buf[(this.pos-t-1)%this.size]},r.prototype.push=function(t){return this._buf[this.pos%this.size]=t,this.pos++}},{}],64:[function(t,e,n){var r=t(77).chooseProtocol,i=t(14).EventEmitter,o=t(46),a=e.exports=function(t){this.opts=o.defaults(t||{},{host:"127.0.0.1",enableGestures:!1,scheme:this.getScheme(),port:this.getPort(),background:!1,optimizeHMD:!1,requestProtocolVersion:a.defaultProtocolVersion}),this.host=this.opts.host,this.port=this.opts.port,this.scheme=this.opts.scheme,this.protocolVersionVerified=!1,this.background=null,this.optimizeHMD=null,this.on("ready",function(){this.enableGestures(this.opts.enableGestures),
this.setBackground(this.opts.background),this.setOptimizeHMD(this.opts.optimizeHMD),this.opts.optimizeHMD?console.log("Optimized for head mounted display usage."):console.log("Optimized for desktop usage.")})};a.defaultProtocolVersion=6,a.prototype.getUrl=function(){return this.scheme+"//"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"},a.prototype.getScheme=function(){return"ws:"},a.prototype.getPort=function(){return 6437},a.prototype.setBackground=function(t){this.opts.background=t,this.protocol&&this.protocol.sendBackground&&this.background!==this.opts.background&&(this.background=this.opts.background,this.protocol.sendBackground(this,this.opts.background))},a.prototype.setOptimizeHMD=function(t){this.opts.optimizeHMD=t,this.protocol&&this.protocol.sendOptimizeHMD&&this.optimizeHMD!==this.opts.optimizeHMD&&(this.optimizeHMD=this.opts.optimizeHMD,this.protocol.sendOptimizeHMD(this,this.opts.optimizeHMD))},a.prototype.handleOpen=function(){this.connected||(this.connected=!0,this.emit("connect"))},a.prototype.enableGestures=function(t){this.gesturesEnabled=t?!0:!1,this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))},a.prototype.handleClose=function(t,e){this.connected&&(this.disconnect(),1001===t&&this.opts.requestProtocolVersion>1&&(this.protocolVersionVerified?this.protocolVersionVerified=!1:this.opts.requestProtocolVersion--),this.startReconnection())},a.prototype.startReconnection=function(){var t=this;this.reconnectionTimer||(this.reconnectionTimer=setInterval(function(){t.reconnect()},500))},a.prototype.stopReconnection=function(){this.reconnectionTimer=clearInterval(this.reconnectionTimer)},a.prototype.disconnect=function(t){return t||this.stopReconnection(),this.socket?(this.socket.close(),delete this.socket,delete this.protocol,delete this.background,delete this.optimizeHMD,delete this.focusedState,this.connected&&(this.connected=!1,this.emit("disconnect")),!0):void 0},a.prototype.reconnect=function(){this.connected?this.stopReconnection():(this.disconnect(!0),this.connect())},a.prototype.handleData=function(t){var e,n=JSON.parse(t);void 0===this.protocol?(e=this.protocol=r(n),this.protocolVersionVerified=!0,this.emit("ready")):e=this.protocol(n),this.emit(e.type,e)},a.prototype.connect=function(){return this.socket?void 0:(this.socket=this.setupSocket(),!0)},a.prototype.send=function(t){this.socket.send(t)},a.prototype.reportFocus=function(t){this.connected&&this.focusedState!==t&&(this.focusedState=t,this.emit(this.focusedState?"focus":"blur"),this.protocol&&this.protocol.sendFocused&&this.protocol.sendFocused(this,this.focusedState))},o.extend(a.prototype,i.prototype)},{14:14,46:46,77:77}],65:[function(t,e,n){var r=e.exports=t(64),i=t(46),o=e.exports=function(t){r.call(this,t);var e=this;this.on("ready",function(){e.startFocusLoop()}),this.on("disconnect",function(){e.stopFocusLoop()})};i.extend(o.prototype,r.prototype),o.__proto__=r,o.prototype.useSecure=function(){return"https:"===location.protocol},o.prototype.getScheme=function(){return this.useSecure()?"wss:":"ws:"},o.prototype.getPort=function(){return this.useSecure()?6436:6437},o.prototype.setupSocket=function(){var t=this,e=new WebSocket(this.getUrl());return e.onopen=function(){t.handleOpen()},e.onclose=function(e){t.handleClose(e.code,e.reason)},e.onmessage=function(e){t.handleData(e.data)},e.onerror=function(e){t.useSecure()&&"wss:"===t.scheme&&(t.scheme="ws:",t.port=6437,t.disconnect(),t.connect())},e},o.prototype.startFocusLoop=function(){if(!this.focusDetectorTimer){var t=this,e=null;e="undefined"!=typeof document.hidden?"hidden":"undefined"!=typeof document.mozHidden?"mozHidden":"undefined"!=typeof document.msHidden?"msHidden":"undefined"!=typeof document.webkitHidden?"webkitHidden":void 0,void 0===t.windowVisible&&(t.windowVisible=void 0===e?!0:document[e]===!1);var n=window.addEventListener("focus",function(e){t.windowVisible=!0,i()}),r=window.addEventListener("blur",function(e){t.windowVisible=!1,i()});this.on("disconnect",function(){window.removeEventListener("focus",n),window.removeEventListener("blur",r)});var i=function(){var n=void 0===e?!0:document[e]===!1;t.reportFocus(n&&t.windowVisible)};i(),this.focusDetectorTimer=setInterval(i,100)}},o.prototype.stopFocusLoop=function(){this.focusDetectorTimer&&(clearTimeout(this.focusDetectorTimer),delete this.focusDetectorTimer)}},{46:46,64:64}],66:[function(t,e,n){var r=t(47),i=t(64),o=t(46),a=e.exports=function(t){i.call(this,t);var e=this;this.on("ready",function(){e.reportFocus(!0)})};o.extend(a.prototype,i.prototype),a.__proto__=i,a.prototype.setupSocket=function(){var t=this,e=new r(this.getUrl());return e.on("open",function(){t.handleOpen()}),e.on("message",function(e){t.handleData(e)}),e.on("close",function(e,n){t.handleClose(e,n)}),e.on("error",function(){t.startReconnection()}),e}},{46:46,47:47,64:64}],67:[function(t,e,n){(function(n){var r=t(70),i=t(72),o=t(76),a=t(69),s=t(63),u=t(75),c=t(14).EventEmitter,l=t(71).gestureListener,h=t(68),p=t(46),d=e.exports=function(e){var i="undefined"!=typeof n&&n.versions&&n.versions.node,o=this;e=p.defaults(e||{},{inNode:i}),this.inNode=e.inNode,e=p.defaults(e||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",suppressAnimationLoop:!this.useAnimationLoop(),loopWhileDisconnected:!0,useAllPlugins:!1,checkVersion:!0}),this.animationFrameRequested=!1,this.onAnimationFrame=function(t){o.lastConnectionFrame.valid&&o.emit("animationFrame",o.lastConnectionFrame),o.emit("frameEnd",t),o.loopWhileDisconnected&&(o.connection.focusedState!==!1||o.connection.opts.background)?window.requestAnimationFrame(o.onAnimationFrame):o.animationFrameRequested=!1},this.suppressAnimationLoop=e.suppressAnimationLoop,this.loopWhileDisconnected=e.loopWhileDisconnected,this.frameEventName=e.frameEventName,this.useAllPlugins=e.useAllPlugins,this.history=new s(200),this.lastFrame=r.Invalid,this.lastValidFrame=r.Invalid,this.lastConnectionFrame=r.Invalid,this.accumulatedGestures=[],this.checkVersion=e.checkVersion,void 0===e.connectionType?this.connectionType=t(this.inBrowser()?65:66):this.connectionType=e.connectionType,this.connection=new this.connectionType(e),this.streamingCount=0,this.devices={},this.plugins={},this._pluginPipelineSteps={},this._pluginExtendedMethods={},e.useAllPlugins&&this.useRegisteredPlugins(),this.setupFrameEvents(e),this.setupConnectionEvents(),this.startAnimationLoop()};d.prototype.gesture=function(t,e){var n=l(this,t);return void 0!==e&&n.stop(e),n},d.prototype.setBackground=function(t){return this.connection.setBackground(t),this},d.prototype.setOptimizeHMD=function(t){return this.connection.setOptimizeHMD(t),this},d.prototype.inBrowser=function(){return!this.inNode},d.prototype.useAnimationLoop=function(){return this.inBrowser()&&!this.inBackgroundPage()},d.prototype.inBackgroundPage=function(){return"undefined"!=typeof chrome&&chrome.extension&&chrome.extension.getBackgroundPage&&chrome.extension.getBackgroundPage()===window},d.prototype.connect=function(){return this.connection.connect(),this},d.prototype.streaming=function(){return this.streamingCount>0},d.prototype.connected=function(){return!!this.connection.connected},d.prototype.startAnimationLoop=function(){this.suppressAnimationLoop||this.animationFrameRequested||(this.animationFrameRequested=!0,window.requestAnimationFrame(this.onAnimationFrame))},d.prototype.disconnect=function(){return this.connection.disconnect(),this},d.prototype.frame=function(t){return this.history.get(t)||r.Invalid},d.prototype.loop=function(t){return t&&("function"==typeof t?this.on(this.frameEventName,t):this.setupFrameEvents(t)),this.connect()},d.prototype.addStep=function(t){this.pipeline||(this.pipeline=new u(this)),this.pipeline.addStep(t)},d.prototype.processFrame=function(t){t.gestures&&(this.accumulatedGestures=this.accumulatedGestures.concat(t.gestures)),this.lastConnectionFrame=t,this.startAnimationLoop(),this.emit("deviceFrame",t)},d.prototype.processFinishedFrame=function(t){if(this.lastFrame=t,t.valid&&(this.lastValidFrame=t),t.controller=this,t.historyIdx=this.history.push(t),t.gestures){t.gestures=this.accumulatedGestures,this.accumulatedGestures=[];for(var e=0;e!=t.gestures.length;e++)this.emit("gesture",t.gestures[e],t)}this.pipeline&&(t=this.pipeline.run(t),t||(t=r.Invalid)),this.emit("frame",t),this.emitHandEvents(t)},d.prototype.emitHandEvents=function(t){for(var e=0;e<t.hands.length;e++)this.emit("hand",t.hands[e])},d.prototype.setupFrameEvents=function(t){t.frame&&this.on("frame",t.frame),t.hand&&this.on("hand",t.hand)},d.prototype.setupConnectionEvents=function(){var t=this;this.connection.on("frame",function(e){t.processFrame(e)}),this.on(this.frameEventName,function(e){t.processFinishedFrame(e)});var e=function(){if(t.connection.opts.requestProtocolVersion<5&&0==t.streamingCount){t.streamingCount=1;var n={attached:!0,streaming:!0,type:"unknown",id:"Lx00000000000"};t.devices[n.id]=n,t.emit("deviceAttached",n),t.emit("deviceStreaming",n),t.emit("streamingStarted",n),t.connection.removeListener("frame",e)}},n=function(){if(t.streamingCount>0){for(var e in t.devices)t.emit("deviceStopped",t.devices[e]),t.emit("deviceRemoved",t.devices[e]);t.emit("streamingStopped",t.devices[e]),t.streamingCount=0;for(var e in t.devices)delete t.devices[e]}};this.connection.on("focus",function(){t.loopWhileDisconnected&&t.startAnimationLoop(),t.emit("focus")}),this.connection.on("blur",function(){t.emit("blur")}),this.connection.on("protocol",function(e){e.on("beforeFrameCreated",function(e){t.emit("beforeFrameCreated",e)}),e.on("afterFrameCreated",function(e,n){t.emit("afterFrameCreated",e,n)}),t.emit("protocol",e)}),this.connection.on("ready",function(){t.checkVersion&&!t.inNode&&t.checkOutOfDate(),t.emit("ready")}),this.connection.on("connect",function(){t.emit("connect"),t.connection.removeListener("frame",e),t.connection.on("frame",e)}),this.connection.on("disconnect",function(){t.emit("disconnect"),n()}),this.connection.on("deviceConnect",function(r){r.state?(t.emit("deviceConnected"),t.connection.removeListener("frame",e),t.connection.on("frame",e)):(t.emit("deviceDisconnected"),n())}),this.connection.on("deviceEvent",function(e){var n=e.state,r=t.devices[n.id],i={};for(var o in n)r&&r.hasOwnProperty(o)&&r[o]==n[o]||(i[o]=!0);t.devices[n.id]=n,i.attached&&t.emit(n.attached?"deviceAttached":"deviceRemoved",n),i.streaming&&(n.streaming?(t.streamingCount++,t.emit("deviceStreaming",n),1==t.streamingCount&&t.emit("streamingStarted",n),i.attached||t.emit("deviceConnected")):i.attached&&n.attached||(t.streamingCount--,t.emit("deviceStopped",n),0==t.streamingCount&&t.emit("streamingStopped",n),t.emit("deviceDisconnected")))}),this.on("newListener",function(t,e){("deviceConnected"==t||"deviceDisconnected"==t)&&console.warn(t+" events are depricated.  Consider using 'streamingStarted/streamingStopped' or 'deviceStreaming/deviceStopped' instead")})},d.prototype.checkOutOfDate=function(){console.assert(this.connection&&this.connection.protocol);var t=this.connection.protocol.serviceVersion,e=this.connection.protocol.version,n=this.connectionType.defaultProtocolVersion;return n>e?(console.warn("Your Protocol Version is v"+e+", this app was designed for v"+n),h.warnOutOfDate({sV:t,pV:e}),!0):!1},d._pluginFactories={},d.plugin=function(t,e){return this._pluginFactories[t]&&console.warn('Plugin "'+t+'" already registered'),this._pluginFactories[t]=e},d.plugins=function(){return p.keys(this._pluginFactories)};var f=function(t,e,n){-1!=["beforeFrameCreated","afterFrameCreated"].indexOf(e)?this.on(e,n):(this.pipeline||(this.pipeline=new u(this)),this._pluginPipelineSteps[t]||(this._pluginPipelineSteps[t]=[]),this._pluginPipelineSteps[t].push(this.pipeline.addWrappedStep(e,n)))},m=function(t,e,n){var s;switch(this._pluginExtendedMethods[t]||(this._pluginExtendedMethods[t]=[]),e){case"frame":s=r;break;case"hand":s=i;break;case"pointable":s=o,p.extend(a.prototype,n),p.extend(a.Invalid,n);break;case"finger":s=a;break;default:throw t+' specifies invalid object type "'+e+'" for prototypical extension'}p.extend(s.prototype,n),p.extend(s.Invalid,n),this._pluginExtendedMethods[t].push([s,n])};d.prototype.use=function(t,e){var n,r,i,o;if(r="function"==typeof t?t:d._pluginFactories[t],!r)throw"Leap Plugin "+t+" not found.";if(e||(e={}),this.plugins[t])return p.extend(this.plugins[t],e),this;this.plugins[t]=e,o=r.call(this,e);for(i in o)n=o[i],"function"==typeof n?f.call(this,t,i,n):m.call(this,t,i,n);return this},d.prototype.stopUsing=function(t){var e,n,r=this._pluginPipelineSteps[t],i=this._pluginExtendedMethods[t],o=0;if(this.plugins[t]){if(r)for(o=0;o<r.length;o++)this.pipeline.removeStep(r[o]);if(i)for(o=0;o<i.length;o++){e=i[o][0],n=i[o][1];for(var a in n)delete e.prototype[a],delete e.Invalid[a]}return delete this.plugins[t],this}},d.prototype.useRegisteredPlugins=function(){for(var t in d._pluginFactories)this.use(t)},p.extend(d.prototype,c.prototype)}).call(this,t(15))},{14:14,15:15,46:46,63:63,65:65,66:66,68:68,69:69,70:70,71:71,72:72,75:75,76:76}],68:[function(t,e,n){(function(t){var n=e.exports=function(t,e){this.options=e||{},this.message=t,this.createElement()};n.prototype.createElement=function(){this.element=document.createElement("div"),this.element.className="leapjs-dialog",this.element.style.position="fixed",this.element.style.top="8px",this.element.style.left=0,this.element.style.right=0,this.element.style.textAlign="center",this.element.style.zIndex=1e3;var t=document.createElement("div");this.element.appendChild(t),t.style.className="leapjs-dialog",t.style.display="inline-block",t.style.margin="auto",t.style.padding="8px",t.style.color="#222",t.style.background="#eee",t.style.borderRadius="4px",t.style.border="1px solid #999",t.style.textAlign="left",t.style.cursor="pointer",t.style.whiteSpace="nowrap",t.style.transition="box-shadow 1s linear",t.innerHTML=this.message,this.options.onclick&&t.addEventListener("click",this.options.onclick),this.options.onmouseover&&t.addEventListener("mouseover",this.options.onmouseover),this.options.onmouseout&&t.addEventListener("mouseout",this.options.onmouseout),this.options.onmousemove&&t.addEventListener("mousemove",this.options.onmousemove)},n.prototype.show=function(){return document.body.appendChild(this.element),this},n.prototype.hide=function(){return document.body.removeChild(this.element),this},n.warnOutOfDate=function(t){t||(t={});var e="http://developer.leapmotion.com?";t.returnTo=window.location.href;for(var r in t)e+=r+"="+encodeURIComponent(t[r])+"&";var i,o=function(t){if("leapjs-decline-upgrade"!=t.target.id){var n=window.open(e,"_blank","height=800,width=1000,location=1,menubar=1,resizable=1,status=1,toolbar=1,scrollbars=1");window.focus&&n.focus()}return i.hide(),!0},a="This site requires Leap Motion Tracking V2.<button id='leapjs-accept-upgrade'  style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 16px;'>Upgrade</button><button id='leapjs-decline-upgrade' style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 8px; '>Not Now</button>";return i=new n(a,{onclick:o,onmousemove:function(t){t.target==document.getElementById("leapjs-decline-upgrade")?(document.getElementById("leapjs-decline-upgrade").style.color="#000",document.getElementById("leapjs-decline-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"):(document.getElementById("leapjs-accept-upgrade").style.color="#000",document.getElementById("leapjs-accept-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none")},onmouseout:function(){document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"}}),i.show()},n.hasWarnedBones=!1,n.warnBones=function(){this.hasWarnedBones||(this.hasWarnedBones=!0,console.warn("Your Leap Service is out of date"),"undefined"!=typeof t&&t.versions&&t.versions.node||this.warnOutOfDate({reason:"bones"}))}}).call(this,t(15))},{15:15}],69:[function(t,e,n){var r=t(76),i=t(62),o=t(68),a=t(46),s=e.exports=function(t){r.call(this,t),this.dipPosition=t.dipPosition,this.pipPosition=t.pipPosition,this.mcpPosition=t.mcpPosition,this.carpPosition=t.carpPosition,this.extended=t.extended,this.type=t.type,this.finger=!0,this.positions=[this.carpPosition,this.mcpPosition,this.pipPosition,this.dipPosition,this.tipPosition],t.bases?this.addBones(t):o.warnBones()};a.extend(s.prototype,r.prototype),s.prototype.addBones=function(t){this.metacarpal=new i(this,{type:0,width:this.width,prevJoint:this.carpPosition,nextJoint:this.mcpPosition,basis:t.bases[0]}),this.proximal=new i(this,{type:1,width:this.width,prevJoint:this.mcpPosition,nextJoint:this.pipPosition,basis:t.bases[1]}),this.medial=new i(this,{type:2,width:this.width,prevJoint:this.pipPosition,nextJoint:this.dipPosition,basis:t.bases[2]}),this.distal=new i(this,{type:3,width:this.width,prevJoint:this.dipPosition,nextJoint:t.btipPosition,basis:t.bases[3]}),this.bones=[this.metacarpal,this.proximal,this.medial,this.distal]},s.prototype.toString=function(){return"Finger [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"},s.Invalid={valid:!1}},{46:46,62:62,68:68,76:76}],70:[function(t,e,n){var r=t(72),i=t(76),o=t(71).createGesture,a=t(22),s=a.mat3,u=a.vec3,c=t(74),l=t(69),h=t(46),p=e.exports=function(t){if(this.valid=!0,this.id=t.id,this.timestamp=t.timestamp,this.hands=[],this.handsMap={},this.pointables=[],this.tools=[],this.fingers=[],t.interactionBox&&(this.interactionBox=new c(t.interactionBox)),this.gestures=[],this.pointablesMap={},this._translation=t.t,this._rotation=h.flatten(t.r),this._scaleFactor=t.s,this.data=t,this.type="frame",this.currentFrameRate=t.currentFrameRate,t.gestures)for(var e=0,n=t.gestures.length;e!=n;e++)this.gestures.push(o(t.gestures[e]));this.postprocessData(t)};p.prototype.postprocessData=function(t){t||(t=this.data);for(var e=0,n=t.hands.length;e!=n;e++){var o=new r(t.hands[e]);o.frame=this,this.hands.push(o),this.handsMap[o.id]=o}t.pointables=h.sortBy(t.pointables,function(t){return t.id});for(var a=0,s=t.pointables.length;a!=s;a++){var u=t.pointables[a],c=u.dipPosition?new l(u):new i(u);c.frame=this,this.addPointable(c)}},p.prototype.addPointable=function(t){if(this.pointables.push(t),this.pointablesMap[t.id]=t,(t.tool?this.tools:this.fingers).push(t),void 0!==t.handId&&this.handsMap.hasOwnProperty(t.handId)){var e=this.handsMap[t.handId];switch(e.pointables.push(t),(t.tool?e.tools:e.fingers).push(t),t.type){case 0:e.thumb=t;break;case 1:e.indexFinger=t;break;case 2:e.middleFinger=t;break;case 3:e.ringFinger=t;break;case 4:e.pinky=t}}},p.prototype.tool=function(t){var e=this.pointable(t);return e.tool?e:i.Invalid},p.prototype.pointable=function(t){return this.pointablesMap[t]||i.Invalid},p.prototype.finger=function(t){var e=this.pointable(t);return e.tool?i.Invalid:e},p.prototype.hand=function(t){return this.handsMap[t]||r.Invalid},p.prototype.rotationAngle=function(t,e){if(!this.valid||!t.valid)return 0;var n=this.rotationMatrix(t),r=.5*(n[0]+n[4]+n[8]-1),i=Math.acos(r);if(i=isNaN(i)?0:i,void 0!==e){var o=this.rotationAxis(t);i*=u.dot(o,u.normalize(u.create(),e))}return i},p.prototype.rotationAxis=function(t){return this.valid&&t.valid?u.normalize(u.create(),[this._rotation[7]-t._rotation[5],this._rotation[2]-t._rotation[6],this._rotation[3]-t._rotation[1]]):u.create()},p.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return s.create();var e=s.transpose(s.create(),this._rotation);return s.multiply(s.create(),t._rotation,e)},p.prototype.scaleFactor=function(t){return this.valid&&t.valid?Math.exp(this._scaleFactor-t._scaleFactor):1},p.prototype.translation=function(t){return this.valid&&t.valid?u.subtract(u.create(),this._translation,t._translation):u.create()},p.prototype.toString=function(){var t="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";return this.gestures&&(t+=" | Gesture count:("+this.gestures.length+")"),t+=" ]"},p.prototype.dump=function(){var t="";t+="Frame Info:<br/>",t+=this.toString(),t+="<br/><br/>Hands:<br/>";for(var e=0,n=this.hands.length;e!=n;e++)t+="  "+this.hands[e].toString()+"<br/>";t+="<br/><br/>Pointables:<br/>";for(var r=0,i=this.pointables.length;r!=i;r++)t+="  "+this.pointables[r].toString()+"<br/>";if(this.gestures){t+="<br/><br/>Gestures:<br/>";for(var o=0,a=this.gestures.length;o!=a;o++)t+="  "+this.gestures[o].toString()+"<br/>"}return t+="<br/><br/>Raw JSON:<br/>",t+=JSON.stringify(this.data)},p.Invalid={valid:!1,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return i.Invalid},finger:function(){return i.Invalid},hand:function(){return r.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return s.create()},rotationAxis:function(){return u.create()},scaleFactor:function(){return 1},translation:function(){return u.create()}}},{22:22,46:46,69:69,71:71,72:72,74:74,76:76}],71:[function(t,e,n){var r=t(22),i=r.vec3,o=t(14).EventEmitter,a=t(46),s=(n.createGesture=function(t){var e;switch(t.type){case"circle":e=new u(t);break;case"swipe":e=new c(t);break;case"screenTap":e=new l(t);break;case"keyTap":e=new h(t);break;default:throw"unknown gesture type"}return e.id=t.id,e.handIds=t.handIds.slice(),e.pointableIds=t.pointableIds.slice(),e.duration=t.duration,e.state=t.state,e.type=t.type,e},n.gestureListener=function(t,e){var n={},r={};t.on("gesture",function(t,i){if(t.type==e){if(("start"==t.state||"stop"==t.state)&&void 0===r[t.id]){var o=new s(t,i);r[t.id]=o,a.each(n,function(t,e){o.on(e,t)})}r[t.id].update(t,i),"stop"==t.state&&delete r[t.id]}});var i={start:function(t){return n.start=t,i},stop:function(t){return n.stop=t,i},complete:function(t){return n.stop=t,i},update:function(t){return n.update=t,i}};return i},n.Gesture=function(t,e){this.gestures=[t],this.frames=[e]});s.prototype.update=function(t,e){this.lastGesture=t,this.lastFrame=e,this.gestures.push(t),this.frames.push(e),this.emit(t.state,this)},s.prototype.translation=function(){return i.subtract(i.create(),this.lastGesture.startPosition,this.lastGesture.position)},a.extend(s.prototype,o.prototype);var u=function(t){this.center=t.center,this.normal=t.normal,this.progress=t.progress,this.radius=t.radius};u.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var c=function(t){this.startPosition=t.startPosition,this.position=t.position,this.direction=t.direction,this.speed=t.speed};c.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var l=function(t){this.position=t.position,this.direction=t.direction,this.progress=t.progress};l.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var h=function(t){this.position=t.position,this.direction=t.direction,this.progress=t.progress};h.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+"]"}},{14:14,22:22,46:46}],72:[function(t,e,n){var r=t(76),i=t(62),o=t(22),a=o.mat3,s=o.vec3,u=t(46),c=e.exports=function(t){this.id=t.id,this.palmPosition=t.palmPosition,this.direction=t.direction,this.palmVelocity=t.palmVelocity,this.palmNormal=t.palmNormal,this.sphereCenter=t.sphereCenter,this.sphereRadius=t.sphereRadius,this.valid=!0,this.pointables=[],this.fingers=[],t.armBasis?this.arm=new i(this,{type:4,width:t.armWidth,prevJoint:t.elbow,nextJoint:t.wrist,basis:t.armBasis}):this.arm=null,this.tools=[],this._translation=t.t,this._rotation=u.flatten(t.r),this._scaleFactor=t.s,this.timeVisible=t.timeVisible,this.stabilizedPalmPosition=t.stabilizedPalmPosition,this.type=t.type,this.grabStrength=t.grabStrength,this.pinchStrength=t.pinchStrength,this.confidence=t.confidence};c.prototype.finger=function(t){var e=this.frame.finger(t);return e&&e.handId==this.id?e:r.Invalid},c.prototype.rotationAngle=function(t,e){if(!this.valid||!t.valid)return 0;var n=t.hand(this.id);if(!n.valid)return 0;var r=this.rotationMatrix(t),i=.5*(r[0]+r[4]+r[8]-1),o=Math.acos(i);if(o=isNaN(o)?0:o,void 0!==e){var a=this.rotationAxis(t);o*=s.dot(a,s.normalize(s.create(),e))}return o},c.prototype.rotationAxis=function(t){if(!this.valid||!t.valid)return s.create();var e=t.hand(this.id);return e.valid?s.normalize(s.create(),[this._rotation[7]-e._rotation[5],this._rotation[2]-e._rotation[6],this._rotation[3]-e._rotation[1]]):s.create()},c.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return a.create();var e=t.hand(this.id);if(!e.valid)return a.create();var n=a.transpose(a.create(),this._rotation),r=a.multiply(a.create(),e._rotation,n);return r},c.prototype.scaleFactor=function(t){if(!this.valid||!t.valid)return 1;var e=t.hand(this.id);return e.valid?Math.exp(this._scaleFactor-e._scaleFactor):1},c.prototype.translation=function(t){if(!this.valid||!t.valid)return s.create();var e=t.hand(this.id);return e.valid?[this._translation[0]-e._translation[0],this._translation[1]-e._translation[1],this._translation[2]-e._translation[2]]:s.create()},c.prototype.toString=function(){return"Hand ("+this.type+") [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "},c.prototype.pitch=function(){return Math.atan2(this.direction[1],-this.direction[2])},c.prototype.yaw=function(){return Math.atan2(this.direction[0],-this.direction[2])},c.prototype.roll=function(){return Math.atan2(this.palmNormal[0],-this.palmNormal[1])},c.Invalid={valid:!1,fingers:[],tools:[],pointables:[],left:!1,pointable:function(){return r.Invalid},finger:function(){return r.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return a.create()},rotationAxis:function(){return s.create()},scaleFactor:function(){return 1},translation:function(){return s.create()}}},{22:22,46:46,62:62,76:76}],73:[function(t,e,n){e.exports={Controller:t(67),Frame:t(70),Gesture:t(71),Hand:t(72),Pointable:t(76),Finger:t(69),InteractionBox:t(74),CircularBuffer:t(63),UI:t(78),JSONProtocol:t(77).JSONProtocol,glMatrix:t(22),mat3:t(22).mat3,vec3:t(22).vec3,loopController:void 0,version:t(81),_:t(46),EventEmitter:t(14).EventEmitter,loop:function(t,e){return t&&void 0===e&&"[object Function]"==={}.toString.call(t)&&(e=t,t={}),this.loopController?t&&this.loopController.setupFrameEvents(t):this.loopController=new this.Controller(t),this.loopController.loop(e),this.loopController},plugin:function(t,e){this.Controller.plugin(t,e)}}},{14:14,22:22,46:46,63:63,67:67,69:69,70:70,71:71,72:72,74:74,76:76,77:77,78:78,81:81}],74:[function(t,e,n){var r=t(22),i=r.vec3,o=e.exports=function(t){this.valid=!0,this.center=t.center,this.size=t.size,this.width=t.size[0],this.height=t.size[1],this.depth=t.size[2]};o.prototype.denormalizePoint=function(t){return i.fromValues((t[0]-.5)*this.size[0]+this.center[0],(t[1]-.5)*this.size[1]+this.center[1],(t[2]-.5)*this.size[2]+this.center[2])},o.prototype.normalizePoint=function(t,e){var n=i.fromValues((t[0]-this.center[0])/this.size[0]+.5,(t[1]-this.center[1])/this.size[1]+.5,(t[2]-this.center[2])/this.size[2]+.5);return e&&(n[0]=Math.min(Math.max(n[0],0),1),n[1]=Math.min(Math.max(n[1],0),1),n[2]=Math.min(Math.max(n[2],0),1)),n},o.prototype.toString=function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"},o.Invalid={valid:!1}},{22:22}],75:[function(t,e,n){var r=e.exports=function(t){this.steps=[],this.controller=t};r.prototype.addStep=function(t){this.steps.push(t)},r.prototype.run=function(t){for(var e=this.steps.length,n=0;n!=e&&t;n++)t=this.steps[n](t);return t},r.prototype.removeStep=function(t){var e=this.steps.indexOf(t);if(-1===e)throw"Step not found in pipeline";this.steps.splice(e,1)},r.prototype.addWrappedStep=function(t,e){var n=this.controller,r=function(r){var i,o,a;for(i="frame"==t?[r]:r[t+"s"]||[],o=0,a=i.length;a>o;o++)e.call(n,i[o]);return r};return this.addStep(r),r}},{}],76:[function(t,e,n){var r=t(22),i=(r.vec3,e.exports=function(t){this.valid=!0,this.id=t.id,this.handId=t.handId,this.length=t.length,this.tool=t.tool,this.width=t.width,this.direction=t.direction,this.stabilizedTipPosition=t.stabilizedTipPosition,this.tipPosition=t.tipPosition,this.tipVelocity=t.tipVelocity,this.touchZone=t.touchZone,this.touchDistance=t.touchDistance,this.timeVisible=t.timeVisible});i.prototype.toString=function(){return"Pointable [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"},i.prototype.hand=function(){return this.frame.hand(this.handId)},i.Invalid={valid:!1}},{22:22}],77:[function(t,e,n){var r=t(70),i=(t(72),t(76),t(69),t(46)),o=t(14).EventEmitter,a=function(t){this.type=t.type,this.state=t.state};n.chooseProtocol=function(t){var e;switch(t.version){case 1:case 2:case 3:case 4:case 5:case 6:e=s(t),e.sendBackground=function(t,n){t.send(e.encode({background:n}))},e.sendFocused=function(t,n){t.send(e.encode({focused:n}))},e.sendOptimizeHMD=function(t,n){t.send(e.encode({optimizeHMD:n}))};break;default:throw"unrecognized version"}return e};var s=n.JSONProtocol=function(t){var e=function(t){if(t.event)return new a(t.event);e.emit("beforeFrameCreated",t);var n=new r(t);return e.emit("afterFrameCreated",n,t),n};return e.encode=function(t){return JSON.stringify(t)},e.version=t.version,e.serviceVersion=t.serviceVersion,e.versionLong="Version "+t.version,e.type="protocol",i.extend(e,o.prototype),e}},{14:14,46:46,69:69,70:70,72:72,76:76}],78:[function(t,e,n){n.UI={Region:t(80),Cursor:t(79)}},{79:79,80:80}],79:[function(t,e,n){e.exports=function(){return function(t){var e=t.pointables.sort(function(t,e){return t.z-e.z})[0];return e&&e.valid&&(t.cursorPosition=e.tipPosition),t}}},{}],80:[function(t,e,n){var r=t(14).EventEmitter,i=t(46),o=e.exports=function(t,e){this.start=new Vector(t),this.end=new Vector(e),this.enteredFrame=null};o.prototype.hasPointables=function(t){for(var e=0;e!=t.pointables.length;e++){var n=t.pointables[e].tipPosition;if(n.x>=this.start.x&&n.x<=this.end.x&&n.y>=this.start.y&&n.y<=this.end.y&&n.z>=this.start.z&&n.z<=this.end.z)return!0}return!1},o.prototype.listener=function(t){var e=this;return t&&t.nearThreshold&&this.setupNearRegion(t.nearThreshold),function(t){return e.updatePosition(t)}},o.prototype.clipper=function(){var t=this;return function(e){return t.updatePosition(e),t.enteredFrame?e:null}},o.prototype.setupNearRegion=function(t){var e=this.nearRegion=new o([this.start.x-t,this.start.y-t,this.start.z-t],[this.end.x+t,this.end.y+t,this.end.z+t]),n=this;e.on("enter",function(t){n.emit("near",t)}),e.on("exit",function(t){n.emit("far",t)}),n.on("exit",function(t){n.emit("near",t)})},o.prototype.updatePosition=function(t){return this.nearRegion&&this.nearRegion.updatePosition(t),this.hasPointables(t)&&null==this.enteredFrame?(this.enteredFrame=t,this.emit("enter",this.enteredFrame)):this.hasPointables(t)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame)),t},o.prototype.normalize=function(t){return new Vector([(t.x-this.start.x)/(this.end.x-this.start.x),(t.y-this.start.y)/(this.end.y-this.start.y),(t.z-this.start.z)/(this.end.z-this.start.z)])},o.prototype.mapToXY=function(t,e,n){var r=this.normalize(t),i=r.x,o=r.y;return i>1?i=1:-1>i&&(i=-1),o>1?o=1:-1>o&&(o=-1),[(i+1)/2*e,(1-o)/2*n,r.z]},i.extend(o.prototype,r.prototype)},{14:14,46:46}],81:[function(t,e,n){e.exports={full:"0.6.4",major:0,
minor:6,dot:4}},{}]},{},[51]);